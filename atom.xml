<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[始终]]></title>
  <subtitle><![CDATA[不忘初心]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://liam0205.me/"/>
  <updated>2015-03-19T12:48:23.533Z</updated>
  <id>http://liam0205.me/</id>
  
  <author>
    <name><![CDATA[Liam Huang]]></name>
    <email><![CDATA[liamhuang0205+blog@gmail.com]]></email>
  </author>
  
  <generator uri="http://zespia.tw/hexo/">Hexo</generator>
  
  <entry>
    <title><![CDATA[为什么我乐于分享？]]></title>
    <link href="http://liam0205.me/2015/03/19/why-i-love-to-share/"/>
    <id>http://liam0205.me/2015/03/19/why-i-love-to-share/</id>
    <published>2015-03-19T11:39:39.000Z</published>
    <updated>2015-03-19T12:39:15.000Z</updated>
    <content type="html"><![CDATA[<p>今天在<a href="http://www.zhihu.com" target="_blank">知乎</a>上第一次尝试回答了<a href="http://www.zhihu.com/question/25520742/answer/42443974" target="_blank">一个感情类问题</a>，得到了<a href="http://www.zhihu.com/people/yeka" target="_blank">周筠老师</a>的赞同。虽说是感情类问题，但主要想提及的是关于分享和共同进步的问题。无奈这个话题相对提问来说有些偏，所以只能另开文章讨论。</p>
<a id="more"></a>

<p>媳妇儿是个文科生，偏偏和我这个理科生看对了眼。我喜欢文学，却不得要领。每次看见媳妇儿写的文章，都羡慕嫉妒并着抓耳挠腮。媳妇儿是典型的文科生，对现象和规律不如理科生那么敏感。正赶着媳妇儿要学开车，对离合器一无所知有些犯怵。走在张家界的澧水大桥上，我就给她从她接触过的几个简单的物理公式讲起，借着变速自行车的例子把离合器和变速箱的原理讲了一遍。我不知道媳妇儿有没有都听明白，但是我讲完扭头看着她，分明是一脸崇拜的花痴样（我已经做好了跪搓衣板的准备，笑）。</p>
<p>媳妇儿说，她前男友是学语言的。偏偏媳妇儿是一个上进的姑娘，那时见着男朋友懂这门语言，就想请教。然而他却怎么也不肯教，问起原因，说是「担心教会了之后就没有吸引力了」。于是媳妇儿就问我，为什么我愿意将我所知道的知识分享给她。我说，「我把这些东西教给你，帮你打开思路，那样每天就能看见一个更好的你了，而且我也有向你学习啊」。</p>
<p>其实，两个人学习的专业不同、从事的行业不同、经历的人生不同，这些不同必然造成思维方式和处事模式的差异。两个人互相从对方身上学习，互相进步，这样日子才会过得越来越好，关系也会越来越亲密。</p>
<p>后来回到住处，媳妇儿给我说「你知道嘛，爱情就是两个人互相促进共同进步，所以我和你在一起特别有安全感」。文科生就是文科生，不对，媳妇儿不愧是我媳妇儿，我对媳妇儿这句话深表赞同，而且我认为在工作上也是如此。</p>
<p>父亲在我小的时候，因为工作的关系，去过不少公司工厂。每次出差回来，父亲都会讲讲所见所闻。虽然大多数的故事我都记不得了，但是有一则故事我一直记到现在。</p>
<p>父亲说，那次去的化工厂的技术部副主任以前是个技术过硬的老师傅，靠着自己的技术一步步走到这个位置。但是，现在的主任比他年轻得多，而且是以前还在他手下干过活。其实按照老师傅的资历和技术，他早就可以得到提拔。只是老师傅当年掌握着关键技术，因为害怕被人取代，所以不真心实意地教徒弟。这样一来，很长时间里都没有人能代替老师傅的位置。因此虽然薪资加了不少，但是领导一直不怎么提拔他。他就只能看着自己曾经的手下一步步超越自己。</p>
<p>其实，一方面，总结和分享的过程对自己也是一种学习；另一方面，学习是相互的，在自己分享的过程中，也会从对方身上学到自己不具备的东西；再者，给对方机会也最终是给自己机会。所以，真正自信的人都不会害怕分享自己的知识和技能，他们的着眼点永远是共同进步，一起变得更好。</p>
<p>所以啊，在被请教的时候，以及，更多地在生活的细微末节上，都不要吝惜自己的知识不乐于分享，更不要自觉高人一等盛气凌人。我一直认为，成长不是变得势利，而是变得温柔，对全世界都温柔。乐于分享，乐于共同进步，就是一种温柔呢。</p>
]]></content>
    <summary type="html"><![CDATA[<p>今天在<a href="http://www.zhihu.com" target="_blank">知乎</a>上第一次尝试回答了<a href="http://www.zhihu.com/question/25520742/answer/42443974" target="_blank">一个感情类问题</a>，得到了<a href="http://www.zhihu.com/people/yeka" target="_blank">周筠老师</a>的赞同。虽说是感情类问题，但主要想提及的是关于分享和共同进步的问题。无奈这个话题相对提问来说有些偏，所以只能另开文章讨论。</p>
]]></summary>
    
      <category term="Share" scheme="http://liam0205.me/tags/Share/"/>
    
      <category term="Life" scheme="http://liam0205.me/categories/Life/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[微笑着离开]]></title>
    <link href="http://liam0205.me/2015/02/01/smile-to-leave/"/>
    <id>http://liam0205.me/2015/02/01/smile-to-leave/</id>
    <published>2015-02-01T04:07:45.000Z</published>
    <updated>2015-02-03T04:34:26.000Z</updated>
    <content type="html"><![CDATA[<p>于是我化作一颗树，长在你必经的路旁，在阳光下慎重地开满了花，朵朵都是我前世的期盼。<br>当你走进，请你细听，颤抖的叶是我等待的热情。<br>而当你终于无视走过，在你身后落了一地的，不是花瓣，而是我凋零的心。<br>——「一颗开花的树」·席慕蓉</p>
<a id="more"></a>

<p>这是一首席慕蓉先生的诗，我很喜欢。以前我给你读过，告诉你说，还好不是「凋零的心」。然后我将它改编，写在微博上。</p>
<p>我化作一棵树，长在你必经的路旁，在阳光下慎重地开满了花。<br>每当有人走过，花儿就挥手致意。<br>而当你走过，花儿就开始欢呼，开始雀跃；仿佛我的灵魂飞旋在上空，在盘旋，在跳舞。</p>
<p>然而如今，似乎终于到了凋零的时候。席慕蓉先生终究是先哲前辈，肆意地改编先生的诗，却最终落入先生的套。</p>
<p>二零一四年八月一日，这是我们分手的日子。今天猛然想起，掰着指头一算，居然已过半年。小时候妈妈总说，玩起来时间过得特别快，所以要特别注意管理好自己的时间。今次我第一次发现，除掉开心，原来痛苦的时候，时间也可以飞逝而过的。</p>
<p>我还记得，你刚去诺村的时候，我不在身边。我很担心，于是拜托他照顾你。我还记得，在一周年纪念的时候，他抢在第一个回复，祝我们幸福。然而如今却是你和他在一起了。</p>
<p>所以我因此而难过吗？不，并不是。那我难过吗？是的，当然有。</p>
<p>分手之后你告诉我，你在和他约会。我说我知道了。但是我没有说，我早就知道你挂掉电话，和他一起出去超市，然后在餐厅共进晚餐。<br>分手之后你告诉我，你并不是在我和他之间做选择。我说我知道了。但是我没有说，我早就知道你在他家过夜，彻夜不归。<br>其实从你们开始在一起之后的事情，我都知道，这是我一直都没有说。</p>
<p>诺村很小，其中的华人圈子更小。说是在约会而不承认「在一起了」，其实没有什么意义，只是自欺欺人对吧。</p>
<p>于是我很难过，你却质问我说「难道你不能接受，一个曾经爱过你的人，不再爱你了吗」。我说我可以。但是我没有说，我不能接受你的背叛、欺瞒以及在分手之后用这些冠冕堂皇的句子企图安慰我。</p>
<p>所以我应该恨吗？我想我可以的。异地很难，我做好了心理准备，也做到了我能做的一切，得到的却是这样的结果。我当然可以恨，谁也不能指责我。然而我却要对自己说，我不可以恨。恨你，会把过去的美好的回忆清零，也会把将来的美好抹杀。所以我不可以恨。</p>
<p>于是我开始撕裂自己。我开始在每个将醒未醒的脑海里自己扇自己的耳光，企图把你赶出这个梦境。我开始在心里用木板搭建起房子，将有你的记忆全数封印。我必须强迫自己，将我曾经珍惜的东西视作尘土，以此求得一点好过。</p>
<p>然而方向错了，注定寻不到终点。人的记忆和计算机的硬盘里的数据不一样，不是说删除就能删除的。不管如何撕裂自己，终究都还是那个我；也不管如何封闭，房子总有可以透视的洞口。强迫自己忘记，却保留着可供回忆的实体，希冀终究可以不要忘记，这本身就是一个悖论。因此我要的解药不是忘记，而是真正接受之后的坦然和若无其事。</p>
<p>于是我删掉了所有的照片，丢掉了所有的纪念。我希望不要再看见这些看到就痛苦的东西，而是在内心保留过去你带给我的美好，以及向往未来的美好。我希望不是忘记，而是坦然接受，各自祝福。就好像安怡推荐的歌中唱响的那样，离开你，却带着更完美的微笑。</p>
]]></content>
    <summary type="html"><![CDATA[<p>于是我化作一颗树，长在你必经的路旁，在阳光下慎重地开满了花，朵朵都是我前世的期盼。<br>当你走进，请你细听，颤抖的叶是我等待的热情。<br>而当你终于无视走过，在你身后落了一地的，不是花瓣，而是我凋零的心。<br>——「一颗开花的树」·席慕蓉</p>
]]></summary>
    
      <category term="Love" scheme="http://liam0205.me/tags/Love/"/>
    
      <category term="Smile" scheme="http://liam0205.me/tags/Smile/"/>
    
      <category term="Leave" scheme="http://liam0205.me/tags/Leave/"/>
    
      <category term="Life" scheme="http://liam0205.me/categories/Life/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[在 LaTeX 中进行文学编程]]></title>
    <link href="http://liam0205.me/2015/01/23/literate-programming-in-latex/"/>
    <id>http://liam0205.me/2015/01/23/literate-programming-in-latex/</id>
    <published>2015-01-23T07:48:35.000Z</published>
    <updated>2015-01-23T15:37:24.000Z</updated>
    <content type="html"><![CDATA[<p>文学编程是 TeX 的作者高德纳提出的编程方式，主张程序员在编写代码的过程中详细地记录自己的思维方式和内在逻辑。</p>
<p>这种编程方式注重编码的逻辑而将编码本身放在更次要的位置，因而不充分的设计在这种变成方式下无所遁形。文学编程的另一个优点是它产生的代码文档能帮助程序员在任意时候重新会想起当时编码的思路。</p>
<p>在 LaTeX 中，可以用 Doc 和 DocStrip 这两个工具来实现文学编程。</p>
<a id="more"></a>

<p>对于程序员来说，最重要的有三个部分：</p>
<ul>
<li>代码；</li>
<li>代码文档；</li>
<li>用户手册。</li>
</ul>
<p>使用 Doc 和 DocStrip 可以将这三个部分集中到一个 <code>.dtx</code> 文件当中。这篇文章将分三个部分讲述如何构建这样一个 <code>.dtx</code> 文件。</p>
<h2 id="-ins_ 文件 "><code>.ins</code> 文件</h2>
<p>INS 三个字母是「Install」的缩写，顾名思义，这个文件是和安装相关的。<code>.ins</code> 文件通常用来控制 TeX 从 <code>.dtx</code> 文件里释放宏包文件，它的结构最为简单，大概是这样的。</p>
<ol>
<li>作为注释的版权信息</li>
<li><strong>载入 <code>docstrip.tex</code></strong></li>
<li>写入 DocStrip 的控制命令</li>
<li>编写将写入生成文件的版权信息</li>
<li><strong>生成文件指令</strong></li>
<li>写入提示信息用以完成安装</li>
<li><strong>结束安装文件</strong></li>
</ol>
<p>这里粗体标记的是必不可少的部分，其他部分或多或少都可以省略。</p>
<p>我们逐步构建一个完整的 <code>.ins</code> 文件。</p>
<hr>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span class="comment">%% Copyright (C) 2003--2015</span>
<span class="comment">%% CTEX.ORG and any individual authors listed elsewhere in this file.</span>
<span class="comment">%% --------------------------------------------------------------------------</span>
<span class="comment">%%</span>
<span class="comment">%% This work may be distributed and/or modified under the</span>
<span class="comment">%% conditions of the LaTeX Project Public License, either</span>
<span class="comment">%% version 1.3c of this license or (at your option) any later</span>
<span class="comment">%% version. This version of this license is in</span>
<span class="comment">%%    http://www.latex-project.org/lppl/lppl-1-3c.txt</span>
<span class="comment">%% and the latest version of this license is in</span>
<span class="comment">%%    http://www.latex-project.org/lppl.txt</span>
<span class="comment">%% and version 1.3 or later is part of all distributions of</span>
<span class="comment">%% LaTeX version 2005/12/01 or later.</span>
<span class="comment">%%</span>
<span class="comment">%% This work has the LPPL maintenance status `maintained'.</span>
<span class="comment">%%</span>
<span class="comment">%% The Current Maintainers of this work are Leo Liu, Qing Lee and Liam Huang.</span>
<span class="comment">%% --------------------------------------------------------------------------</span>
</pre></td></tr></table></figure>



<p>这是 <code>ctex</code> 宏包的版权声明信息。</p>
<ul>
<li>这里的每一行都以百分号开头，因此在声明版权的同时不会影响正常的编译流程。</li>
<li>版权声明部分，首先是声明版权的归属。</li>
<li>接下来，声明许可协议为 LPPL。大多数 TeX 相关的宏包或软件，都在 LPPL 协议下发布。</li>
</ul>
<hr>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="command">\input</span> docstrip.tex
</pre></td></tr></table></figure>



<p>载入 <code>docstrip.tex</code>。</p>
<hr>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="command">\keepsilent</span>
</pre></td></tr></table></figure>



<p>这是 DocStrip 的控制命令之一，其作用是关闭 DocStrip 的日志输出功能。默认情况下，DocStrip 会详细输出它的每一步操作。对于大多数人来说，成败上千行的日志徒惹人嫌弃，因此我们关闭它。</p>
<p>更多的控制命令可以参考 DocStrip 的文档。</p>
<hr>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="code"><pre><span class="command">\preamble</span>

    Copyright (C) 2003-2015
    CTEX.ORG and any individual authors listed in the documentation.
------------------------------------------------------------------------------

    This work may be distributed and/or modified under the
    conditions of the LaTeX Project Public License, either
    version 1.3c of this license or (at your option) any later
    version. This version of this license is in
       http://www.latex-project.org/lppl/lppl-1-3c.txt
    and the latest version of this license is in
       http://www.latex-project.org/lppl.txt
    and version 1.3 or later is part of all distributions of
    LaTeX version 2005/12/01 or later.

    This work has the LPPL maintenance status `maintained'.

    The Current Maintainers of this work are Leo Liu, Qing Lee and Liam Huang.
------------------------------------------------------------------------------

<span class="command">\endpreamble</span>
</pre></td></tr></table></figure>



<p>在 <code>\preamble</code> 和 <code>\endpreamble</code> 之间的部分，将被写入由 DocStrip 生成的所有文档（默认情况下）。比如上面这段 <code>ctex</code> 宏包的版权信息将写入每一个生成的文件。</p>
<hr>
<p>下面的内容是整个 <code>.ins</code> 文件里最重要的部分，它控制着如何生成最终的宏包文件。</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="command">\generate</span>
  <span class="special">{</span>
    <span class="command">\usedir</span><span class="special">{</span>tex/latex/ctex<span class="special">}</span>
    <span class="command">\file</span><span class="special">{</span>ctex.sty<span class="special">}</span>                 <span class="special">{</span><span class="command">\from</span><span class="special">{</span><span class="command">\jobname</span>.dtx<span class="special">}</span><span class="special">{</span>package,style<span class="special">}</span><span class="special">}</span>
    <span class="command">\file</span><span class="special">{</span>ctexcap.sty<span class="special">}</span>              <span class="special">{</span><span class="command">\from</span><span class="special">{</span><span class="command">\jobname</span>.dtx<span class="special">}</span><span class="special">{</span>package,ctexcap<span class="special">}</span><span class="special">}</span>
    <span class="command">\file</span><span class="special">{</span>ctexsize.sty<span class="special">}</span>             <span class="special">{</span><span class="command">\from</span><span class="special">{</span><span class="command">\jobname</span>.dtx<span class="special">}</span><span class="special">{</span>package,ctexsize<span class="special">}</span><span class="special">}</span>
    <span class="command">\file</span><span class="special">{</span>ctexart.cls<span class="special">}</span>              <span class="special">{</span><span class="command">\from</span><span class="special">{</span><span class="command">\jobname</span>.dtx<span class="special">}</span><span class="special">{</span>class,article<span class="special">}</span><span class="special">}</span>
    <span class="command">\file</span><span class="special">{</span>ctexbook.cls<span class="special">}</span>             <span class="special">{</span><span class="command">\from</span><span class="special">{</span><span class="command">\jobname</span>.dtx<span class="special">}</span><span class="special">{</span>class,book<span class="special">}</span><span class="special">}</span>
    <span class="command">\file</span><span class="special">{</span>ctexrep.cls<span class="special">}</span>              <span class="special">{</span><span class="command">\from</span><span class="special">{</span><span class="command">\jobname</span>.dtx<span class="special">}</span><span class="special">{</span>class,report<span class="special">}</span><span class="special">}</span>
    <span class="command">\file</span><span class="special">{</span>ctexspa.def<span class="special">}</span>
      <span class="special">{</span>
        <span class="command">\from</span><span class="special">{</span><span class="command">\jobname</span>.dtx<span class="special">}</span>         <span class="special">{</span>ctexspa<span class="special">}</span>
        <span class="command">\from</span><span class="special">{</span>ctexpunct.spa<span class="special">}</span>        <span class="special">{</span><span class="special">}</span>
      <span class="special">}</span>
  <span class="special">}</span>
</pre></td></tr></table></figure>



<p><code>\generate</code> 命令中的<code>\file{⟨filename⟩}{\from{⟨sourcefilename⟩}{⟨optionlist⟩}}</code> 用来指定宏包文件的生成方式。这里的含义是，从 <code>⟨sourcefilename⟩</code> 中抽取含有 <code>⟨optionlist⟩</code> 标记的部分，生成 <code>⟨filename⟩</code> 这个文件。</p>
<p>一个 <code>\generate</code> 里可以有多个 <code>\file</code> 命令。一个 <code>\file</code> 命令里可以有多个 <code>\from</code> 命令。一个 <code>\from</code> 命令里的 <code>⟨option⟩</code>，组成 <code>⟨optionlist⟩</code>。其中 <code>⟨option⟩</code> 需要用逗号隔开，<code>\file</code> 之间和 <code>\from</code> 之间则不需要。</p>
<hr>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="code"><pre><span class="command">\obeyspaces</span>
<span class="command">\Msg</span><span class="special">{</span>*************************************************************<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*                                                           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>* To finish the installation you have to move the following *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>* file into proper directories searched by TeX:             *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*                                                           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>* The recommended directory is TDS:tex/latex/ctex           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*                                                           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*     ctex.sty                                              *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*     ctexcap.sty                                           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*     ctexsize.sty                                          *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*     ctexart.cls                                           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*     ctexbook.cls                                          *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*     ctexrep.cls                                           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*     ctexspa.def                                           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*                                                           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>* To produce the documentation run the file ctex.dtx        *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>* through XeLaTeX.                                          *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*                                                           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>* Happy TeXing!                                             *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*                                                           *<span class="special">}</span>
<span class="command">\Msg</span><span class="special">{</span>*************************************************************<span class="special">}</span>
</pre></td></tr></table></figure>



<p>这里的内容会在处理完 <code>.ins</code> 文件之后显示在控制台，用来提示使用者将文件置入指定的目录。TeX 会忽略连续的空格，第一行的 <code>\obeyspaces</code> 则会让 TeX 输出这些空格。</p>
<hr>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="command">\endbatchfile</span>
</pre></td></tr></table></figure>



<p>显式地结束安装文件，此后的所有内容都会被忽略。</p>
<p>将上面的代码依次粘贴到一起，就是一个最简单的 <code>.ins</code> 文件了。</p>
<h2 id="-dtx_ 文件 "><code>.dtx</code> 文件</h2>
<p><code>.dtx</code> 文件比 <code>.ins</code> 文件复杂得多。<code>.ins</code> 文件在整个过程中会被读取一次，而 <code>.dtx</code> 文件却会被读取三次。下面是对此三个步骤的简略描述。如果暂时看不懂也没有关系，下一节我们将会化身人肉编译器，逐行分析示例。</p>
<p>处理 <code>.ins</code> 文件的时候，会载入 <code>.dtx</code> 文件。这时候 <code>.dtx</code> 文件中以 <code>%</code> 开头的行将被全部忽略，而以 <code>%</code> 开头的行则会用于记录 <code>⟨option⟩</code>。程序会根据 <code>.ins</code> 文件中 <code>\generate</code> 命令里 <code>\from</code> 的指示的 <code>⟨option⟩</code> 抽取 <code>.dtx</code> 文件中 <code>⟨option⟩</code> 相关内容。这个过程中，没有以 <code>%</code> 开头的行会根据 <code>⟨option⟩</code> 写入文件，而 <code>%</code> 开头的行则被抑制并保护起来。最终生成宏包文件。</p>
<p>第二遍处理 <code>.dtx</code> 文件的时候，在读入 <code>\documentclass{ltxdoc}</code> 之前，所有的内容与通常意义上的 LaTeX 代码完全一致。因此需要依靠 <code>\iffalse</code> 和 <code>% \iffalse</code> 来保护相关代码，这些代码通常是 README 文件和 LICENSE 文件。在读入 <code>\DocInput{filename.dtx}</code> 之后，<code>.dtx</code> 文件会被第三次载入处理。处理完成之后遇到 <code>\end{document}</code>，后续的内容被全部忽略。最终生成说明文档。</p>
<p>第三遍处理 <code>.dtx</code> 是被 <code>\DocInput</code> 载入的。此时，文档内（几乎）所有的 <code>%</code> 都被忽略。因为 LaTeX 只能有一个 <code>\documentclass</code> 以及一对 <code>\begin{document}</code> 和 <code>\end{document}</code>，所以 <code>\end{document}</code> 之前的所有内容都应当在这一次处理的时候被忽略。因此这部分内容应该被 <code>\iffalse</code> 和 <code>\fi</code> 保护起来。</p>
<p><code>.dtx</code> 文件由以下部分组成。</p>
<ol>
<li>包含在 <code>% \iffalse</code> 和 <code>% \fi</code> 中间的版权信息</li>
<li><strong>包含在 <code>% \iffalse</code> 和 <code>% \fi</code> 中间的宏包基本信息</strong></li>
<li><strong>包含在 <code>%&lt;*driver&gt;</code> 和 <code>%&lt;/driver&gt;</code> 中间的 <code>ltxdoc</code> 文档类及相关代码，这部分代码也应包含在 <code>% \iffalse</code> 和 <code>% \fi</code> 中间</strong></li>
<li><strong>在 <code>\end{document}</code> 之后的说明文档，这部分文档应该隐藏在行首的 <code>%</code> 之后</strong></li>
<li><strong>在说明文档最后的代码说明，以及间杂在代码说明中间的代码，其中代码说明也应该隐藏在行首的 <code>%</code> 之后，而代码本身则不应该被 <code>%</code> 保护</strong></li>
</ol>
<p>示例 <code>.dtx</code> 文件的具体内容，可以参看下一节。</p>
<h2 id=" 人肉编译器 ">人肉编译器</h2>
<p>我们来看两个文件，分别是 <a href="/attachment/LaTeX-useful-tools/dtxtut/dtxtut.ins"><code>dtxtut.ins</code></a> 和 <a href="/attachment/LaTeX-useful-tools/dtxtut/dtxtut.dtx"><code>dtxtut.dtx</code></a>。你可以下载这两个文件，然后跟着我的思路一起分析。</p>
<p>首先我们要生成宏包文件，在命令行中运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>xelatex dtxtut.ins
</pre></td></tr></table></figure>



<p>注意，这里的后缀名不可省略。</p>
<p>文件读入之后，直到 12 行都是注释，直接忽略。接着到了第 13 行，读入了 <code>docstrip.tex</code> 这个文件。随后进行了一些设置之后来到了第 26 行.</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="command">\generate</span><span class="special">{</span><span class="command">\file</span><span class="special">{</span><span class="command">\jobname</span>.sty<span class="special">}</span><span class="special">{</span><span class="command">\from</span><span class="special">{</span><span class="command">\jobname</span>.dtx<span class="special">}</span><span class="special">{</span>package<span class="special">}</span><span class="special">}</span><span class="special">}</span>
</pre></td></tr></table></figure>



<p>这里 <code>\jobname</code> 是当前文件的名字（不含后缀），即 <code>dtxtut</code>。所以这里会从 <code>dtxtut.dtx</code> 文件中，抽取 <code>package</code> 的部分，组成名为 <code>dtxtut.sty</code> 这个文件。</p>
<p>现在我们读取 <code>dtxtut.dtx</code>。前 18 行都是注释，忽略。19 — 21 行是 <code>package</code> 部分，输出。23 行开始了名为 <code>driver</code> 的部分，直到 32 行结束。接下来一直到 81 行都是注释，忽略。82 行开始了名为 <code>package</code> 的部分，于是程序将 82 行开始到 100 行中没有注释掉的部分抽出来，输出。这样，输出的内容接在 <code>\preamble</code> 之后，保存为 <code>dtxtut.sty</code> 文件。</p>
<p>接下来我们生成宏包文档，在命令行中运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>xelatex dtxtut.dtx
</pre></td></tr></table></figure>



<p>同样，这里的后缀名不可省略。</p>
<p>前 23 行都是注释，忽略。24 行载入了 <code>ltxdoc</code> 文档类，随后载入了刚刚生成的 <code>dtxtut.sty</code> 宏包。26 行的 <code>\EnableCrossrefs</code> 打开了代码索引的生成（如果你将来不需要，可以用 <code>\DisableCrossrefs</code> 打开）。27 行的 <code>\CodelineIndex</code> 则使得索引指向代码行号，而不是页码。28 行的 <code>\RecordChanges</code> 则会让文档类记录宏包的变化记录。</p>
<p>接下来，30 行的 <code>\DocInput{\jobname.dtx}</code> 重新载入了这个文件本身，但（几乎）所有的 <code>%</code> 符号都被忽略。第 1 行遇到 <code>\iffalse</code>，直到 16 行的 <code>\fi</code>，中间的内容都被忽略。17 行是空行。18 行又遇到 <code>\iffalse</code>，直到 33 行的 <code>\fi</code>，中间的内容都被忽略。注意，这里正好跳过了 <code>driver</code> 部分。</p>
<p>接下来的 <code>\CheckSum</code> 和 <code>\CharacterTable</code> 是为了检测 <code>.dtx</code> 文件完整性的两个工具。众所周知，<code>.dtx</code> 文件包含了一个宏包的几乎所有信息，如果文件在网络传输的过程中出错，则宏包安装必然失败。因此，检测文件的完整性就变得很有必要。</p>
<p><code>\CheckSum</code> 采用了一个很简单的方案来检验完整性。它将从 <code>\StopEventually</code> 开始到 <code>\Finale</code> 结尾的，在 <code>macrocode</code> 环境里的反斜杠 <code>\</code> 计数，将计数的值作为校验和。在生成文档的过程中，程序将会计算这个值，并于 <code>\CheckSum{}</code> 中的值进行比对。若二者不一致，则说明传输过程中可能出现错误。</p>
<p><code>\CharacterTable</code> 更为直接一点。程序将检查代码中出现的符号均包含在 <code>\CharacterTable</code> 之中。若不然，则认为传输过程中可能出错。</p>
<p>接下来的内容，直到第 76 行都很好理解。77 行出现了 <code>\StopEventually</code> 命令，并在参数中启动了 <code>\PrintIndex</code> 命令。我们刚才说了 <code>\StopEventually</code> 会开启校验和的检查，而 <code>\PrintIndex</code> 则会在此处打印代码索引。</p>
<p><code>macrocode</code> 环境是一个特殊的环境，它有点类似于 LaTeX 原生的 <code>verbatim</code> 环境。它在大多数情况下的行为和 <code>verbatim</code> 环境相同，大体上是将代码输出到最终的文档当中。</p>
<p>这样持续运行到 103 行，遇到 <code>\Finale</code> 命令，校验和计算的终点。此时，程序将会计算出校验和，并与文档中给出的校验和进行比较。如果 <code>\CheckSum</code> 不存在，或者给出的值为 <code>0</code>，那么程序会给出正确的值，让你填入文档。如果 <code>\CheckSum</code> 存在，但值与程序计算的不符，那么程序会报错，并给出正确的值。改正后重新编译才能得到文档。如果 <code>\CheckSum</code> 存在，且校验和通过，那么程序会继续运行。</p>
<p>104 行是 <code>\endinput</code>，结束整个文件，本次对 <code>dtxtut.dtx</code> 的处理结束，回到上一次的断点。</p>
<p>30 行之后，31 行就是 <code>\end{document}</code>，文档处理结束，之后的内容全都被忽略。输出文档，退出。</p>
<h2 id=" 将 _-dtx_ 和 _-ins_ 合二为一 ">将 <code>.dtx</code> 和 <code>.ins</code> 合二为一</h2>
<p>细心的读者会发现，整个过程中，<code>.dtx</code> 文件承担了几乎所有的功能，而 <code>.ins</code> 文件只是一个「指路人」。这些读者可能会思考，是不是有办法将 <code>.ins</code> 文件并入 <code>.dtx</code> 文件呢？答案是肯定的。</p>
<p>对于这类合二为一的 <code>.dtx</code> 文件，使用 Plain TeX 格式编译，会启动 DocStrip 工具，得到宏包文件；使用 LaTeX 格式编译，则会生成文档。</p>
<p>这里给出一个来自<a href="http://www.zhihu.com/question/27693438" target="_blank">知乎提问</a>的<a href="/attachment/LaTeX-useful-tools/dtxtut/insdtxtut.dtx">示例</a>（略有修改），你可以在<a href="http://www.zhihu.com/question/27693438/answer/37669407" target="_blank">我的答案</a>里看到对此的具体分析。</p>
<h2 id=" 最后的最后 ">最后的最后</h2>
<p>今天是 W 的生日。祝你生日快乐~</p>
]]></content>
    <summary type="html"><![CDATA[<p>文学编程是 TeX 的作者高德纳提出的编程方式，主张程序员在编写代码的过程中详细地记录自己的思维方式和内在逻辑。</p>
<p>这种编程方式注重编码的逻辑而将编码本身放在更次要的位置，因而不充分的设计在这种变成方式下无所遁形。文学编程的另一个优点是它产生的代码文档能帮助程序员在任意时候重新会想起当时编码的思路。</p>
<p>在 LaTeX 中，可以用 Doc 和 DocStrip 这两个工具来实现文学编程。</p>
]]></summary>
    
      <category term="Literate Programming" scheme="http://liam0205.me/tags/Literate%20Programming/"/>
    
      <category term="dtx" scheme="http://liam0205.me/tags/dtx/"/>
    
      <category term="Macro" scheme="http://liam0205.me/tags/Macro/"/>
    
      <category term="LaTeX" scheme="http://liam0205.me/categories/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[欧洲史·三：浪漫主义与古希腊哲学]]></title>
    <link href="http://liam0205.me/2015/01/22/history-of-europ-03/"/>
    <id>http://liam0205.me/2015/01/22/history-of-europ-03/</id>
    <published>2015-01-22T08:09:38.000Z</published>
    <updated>2015-01-22T16:13:57.000Z</updated>
    <content type="html"><![CDATA[<p>前两篇文章（<a href="/2014/12/30/history-of-europe-01/">第一篇</a>、<a href="/2015/01/06/history-of-europe-02/">第二篇</a>）讨论了欧洲文明发源的三股力量，以及欧洲思想发源的几次思想运动。今次，我们将暂别对理性的讨论，转而讨论与理性相对的浪漫主义；同时我们也会一睹古希腊三大哲人的风采。</p>
<a id="more"></a>

<h2 id=" 浪漫主义 ">浪漫主义</h2>
<h3 id=" 浪漫主义运动从德国发端 ">浪漫主义运动从德国发端</h3>
<p>我们前面说到，欧洲这个混合体由希腊罗马、教会和日耳曼民族组成。前面说到的浪漫主义运动、宗教改革、科学革命还有启蒙运动主要都是前两个部分相互作用的结果。今次要谈的浪漫主义运动则发短语继承自日耳曼民族的德意志民族。（公元 919 年之后建国的国家中的人民称德意志，之前称日耳曼）</p>
<p>18 世纪末，法国爆发了大革命，传统的君主制阶层观念、贵族以及天主教会统治制度在三年内被推翻；新的自由、平等、博爱等原则被建立起来。尽管人们对理性的期望很高，但是法国大革命废除了君主和教会之后，并没有迎来民智开启的时代，反而因为激进的思想，迎来了流血、暴政和独裁。</p>
<p>针对法国启蒙运动的观点，发端于德意志的浪漫主义运动崇尚感受、情绪和强烈的情感。德国人认为理性但抽象的词语不能用来描绘人类和社会，这完全是空谈；他们相信自己的历史和文化根治于自己体内，因此与法国人是不同的，所以法国人在沙龙里谈论的普世理性是不存在的；他们希望知道早期日耳曼民族在进入结合体之前是什么状态，喜欢他们的活力和补拙。</p>
<p>浪漫主义认为<strong>文明是人为的，因此文明会束缚和局限我们。因此，超脱这些束缚，活在传统文化当中，才算是活得完整。</strong>至此，知识分子才开始尊重并对文化开始有兴趣，开始收集民俗文化和乡村歌谣。并且从此，这些观念深植于欧洲人的思想之中。</p>
<h3 id=" 民主主义源自浪漫主义 ">民主主义源自浪漫主义</h3>
<p>浪漫主义对自己民族历史和文化的尊重被扩大强化之后，就形成了民族主义。民族主义者认为拥有相同历史、文化和语言的人们组成的民族应当生活在一起，并组建自己的政府。民族主义者认为，多民族的国家里，任何一个民族都无法充分表达自己的观点，无法充分伸张自己的文化，因此任何民族的智慧都无法开花结果。</p>
<h3 id=" 教会的结局 ">教会的结局</h3>
<p>中世纪结束之后，文艺复兴、宗教改革、科学革命、启蒙运动以及浪漫主义运动分别在不同的角度削弱了教会的权威。事实上，现代理性、科学和进步的思想从文艺复兴、科学革命和启蒙运动一脉相承自古希腊；而现在对文化、解放思想的崇尚则从浪漫主义运动继承自日耳曼民族。反观教会，留下的则是一片空白。</p>
<h2 id=" 理性和浪漫的撕扯 ">理性和浪漫的撕扯</h2>
<p>理性和浪漫是两股根植在欧洲人心中的截然相反的力量。这两股力量往往对立，互相撕扯。</p>
<p>我们先来看一个例子。如果在学校里给学生讲述下面这段故事，并将之奉为真理，你会怎么看待？这个故事来自旧约圣经的第一篇：创世纪。</p>
<blockquote>
<p>耶和华上帝用地上的尘土造人，将生气吹在他鼻孔里，他就成了有灵的活人，名叫亚当。</p>
</blockquote>
<p>如果你的孩子是这个学校里的一个学生，你会怎么想呢？作为一个现代社会的文明人，你一定会反对学校这样的做法，你会认为学校在胡说八道误人子弟。</p>
<p>那么反过来，再看另外一个故事。这个故事是澳大利亚土著人的一个传说。</p>
<blockquote>
<p>很久很久以前，有个老人非常疼爱他的侄儿。年轻的侄儿远赴异国，爱上了一个年轻女孩儿。这对情侣后来不顾长辈的反对，私奔出走。但女孩儿已被许配给另外一个人，所以女孩儿的部落派人追到他们，杀死了他的侄儿。老人听到噩耗非常伤心，不顾年老体弱，跋涉到这个国家，打算将侄儿的尸体带回故土。</p>
<p>侄儿已经成年，然而老人年事已高。将侄儿的尸体从异国运回故土，对于老人来说是个沉重的负担。但是老人办到了，它将尸体带回，妥善安葬。至今你仍然能够看到老人跋涉的足迹，仍然能看到他中途休息的地方，仍然能看到他的泪水汇成的水潭。</p>
</blockquote>
<p>同样的假设，你会怎么想呢？尽管你知道这个故事浪漫主义色彩浓厚，肯定不是真实的，但是你可能仍然会希望学校将这个「美好」的故事讲给学生们听。</p>
<p>两个故事都有明显不真实的地方，但是我们对它们的态度却截然不同。面对第一个故事的时候，理性占了上风；而面对第二个故事的时候，浪漫主义的情怀却占了上风。</p>
<p>若然生活在启蒙时代，可能会有人对你说：「如果你的孩子想知道水潭的来源，那你可以送他去学地质学」。可能还有人会对你说：「这些土著人的思想已经被黑暗和魔法带来的恐惧束缚住了，你不要相信这些」。这感觉很别扭不是吗？对于我们来说，我们往往会迷失在浪漫主义的情怀之中，潜意识地认为土著人的生活方式更加纯粹、健全和自然，不由自主地希望这些「信仰」传承下去。</p>
<p>这样的撕扯就是理性和浪漫对立的一面。这样的撕扯源自于启蒙运动和浪漫主义运动的冲突，而追根究底的原因是欧洲文明那个奇怪的混合体的矛盾。这样的撕扯不断困扰和瓦解着欧洲的道德观念和智识生活，并成为欧洲人的「宿命」之一。</p>
<h2 id=" 古希腊三大哲人的风采 ">古希腊三大哲人的风采</h2>
<p>让我们「重归」理性。</p>
<p>前文已经提到，文艺复兴时期的人们认为「古典就是最好的」。这样的观点在 17 世纪才因古希腊人的宇宙观（地心说）被打破而逐渐缓解。自那时起，人们慢慢将目光从古希腊已有的成就上转移开来，开始关注现代人可能达成的成就。</p>
<p>不过，尽管如此，在一些领域里我们的成就依然坐落在希腊人打下的基石上。而对后世影响甚深的人就是古希腊的三大哲人：苏格拉底、柏拉图和亚里士多德。</p>
<h3 id=" 苏格拉底 ">苏格拉底</h3>
<p>苏格拉底是一个，呃……，对思辨的向往近乎疯魔的人。他作为古希腊最伟大的哲人之一，并没有给出真理，但是去做了更伟大的事：给出了迈向真理的方法。</p>
<p>苏格拉底认为真理切实存在，但平常人的心智并不足以理解真理。因此，渴望得到真理的人必须耕耘其心智。而这种方法其实就是「有理有据地怀疑一切」。</p>
<p>苏格拉底问答法是类似于这样的对话：</p>
<blockquote>
<p>老师：什么是革命？</p>
<p>学生：用武力推翻政府就是革命。</p>
<p>老师：如果国王的弟弟弑君篡位，那么这样以武力推翻的行为是革命吗？</p>
<p>学生：不是。</p>
<p>老师：那除了武力推翻之外，还需要怎样的条件才能算是革命呢？</p>
</blockquote>
<p>苏格拉底问答法实际是在不断地举出反例的过程中，修正已有的观点。这样的方法能不断剔除谬误的部分，使得结论逐渐趋向真理。</p>
<h3 id=" 柏拉图 ">柏拉图</h3>
<p>柏拉图是苏格拉底的弟子。如今有关苏格拉底的实际，一部分就是出自柏拉图之手。苏格拉底「怀疑一切」的主张影响了雅典的统治者，因此被最终处死。在柏拉图的描述中，苏格拉底平静地面对死亡，对无法思辨的苟且无法容忍，从容地结束了自己的生命。</p>
<p>然而，如若换过一个角度，人们对苏格拉底的崇敬可能就会大打折扣。比如，如果公诉苏格拉底的检察官之子因为听信苏格拉底的言论，怀疑一切，最终成为一个不务正业的酒鬼；然后检察官认为苏格拉底是妖言惑众，应当处死。</p>
<p>这样的思辨，其实正是苏格拉底崇尚的「怀疑一切」。而对一切事物都充满怀疑，会让我们迷失方向；我们不可能靠纯粹的理性生活、工作并组成社会，我们在理性的同时，也需要有风俗、习惯甚至是宗教来指引方向。</p>
<p>柏拉图认为，<strong>我们在世间的所思所想，其实只是另一个崇高世界里的影子</strong>。因此，单纯地依靠思辨，单纯地怀疑一切，并不能求得真理。柏拉图为了说明他的观点，举了一个例子。</p>
<blockquote>
<p>假设有一群人，被关在暗无天日的深邃山洞。山洞只有一个洞口，被铁门锁死。洞口的外面是长长的走廊，走廊的尽头有一只火把。</p>
<p>火把摇曳的火光将经过的人和动物投影在山洞里的墙壁上，于是这些人在山洞里为看到的影子评头论足，进行推理辩论，相信这就是这个世界上真实的存在。</p>
</blockquote>
<p>这其实就是中国「坐进观天」故事的翻版，很可笑不是吗？<strong>当你身锁牢笼却不自知，目光局限在其中，光靠思辨是不可能获得真理的</strong>。</p>
<h3 id=" 亚里士多德 ">亚里士多德</h3>
<p>亚里士多德是柏拉图的学生，没错他是苏格拉底的徒孙。亚里士多德在许多方面都有重大贡献，他总结整理了很多已有的知识，并根据自己的观察得出了很多精彩的结论。诚然，受于条件所限（身处某个牢笼），他的结论在如今看来并不完全正确（比如地心说）；但是，亚里士多德对与清晰思考的理论却依然闪耀。这就是「亚里士多德三段论」。</p>
<p>亚里士多德的三段论将论述分为三个部分，前两个部分是前提，第三个部分是结论。第一个部分是抽象的概述；第二个部分是对具体实例的描述；第三个部分则针对实例做出推论。<strong>如果前提正确，并且推论过程符合逻辑，那么结论就必然是正确的</strong>。</p>
<p>比如：</p>
<blockquote>
<p>每一只正常的猫都有四条腿。</p>
<p>Kitty 是一只正常的猫。</p>
<p>Kitty 有四条腿。</p>
</blockquote>
<p>这就是一个成立的结论。首先，前两个前提是正确的；其次，两个前提之间有「连续的主宾判断逻辑」；因此，结论成立。</p>
<p>再比如：</p>
<blockquote>
<p>每一只正常的猫都有四条腿。</p>
<p>Kitty 有四条腿。</p>
<p>Kitty 是一只正常的猫。</p>
</blockquote>
<p>这是一个不成立的结论。尽管两个前提是正确的，但是两个前提之间并没有连续的逻辑，因此结论是站不住脚的。比如，Kitty 可能是一只兔子，或是一只狗。</p>
<p>再比如：</p>
<blockquote>
<p>每一只猫都是黑色的。</p>
<p>Kitty 是一只猫。</p>
<p>Kitty 是黑色的。</p>
</blockquote>
<p>这也是一个不成立的结论。尽管两个前提之间有连续的逻辑，但是第一个前提是错误的，因此结论也是站不住脚的。</p>
<p>尽管举出的例子很简单，但是却反映了亚里士多德三段论的威力。三段论的意义在于</p>
<ul>
<li>它给出了推理的一般规则：严谨遵循这个规则就能求得真理；</li>
<li>它给出了检验推论的标准：从前提的正确性和推理的逻辑性两方面检查推论，若然有一方面错误，则结论不成立。</li>
</ul>
<h2 id=" 小结 ">小结</h2>
<p>欧洲的文明发端于古代希腊和罗马与教会和日耳曼民族混合成为的一个不稳定的混合体。这个混合体随着文艺复兴运动而逐渐瓦解，经历宗教改革、科学革命、启蒙运动和浪漫主义运动，宗教的力量被削弱，逐渐形成我们如今看到的欧洲。</p>
<p>理性和浪漫的力量彼此对立，互相撕扯。这份根植在欧洲人文化血脉里的矛盾，煎熬着欧洲人的同时，也成为欧洲不断进步的动力。</p>
<p>尽管在科学革命之后，人们已不再将古希腊的学术奉为圭臬，但实际上是人们重新走在了由希腊人奠基的理性思辨道路上。苏格拉底为人们展现了通往真理的道路；他的弟子柏拉图用经典的比喻警醒人们不能坐进观天；柏拉图的弟子亚里士多德则在前辈的基础上整理了很多知识，并总结出了威力强大的「三段论」。</p>
<p>真想去欧洲看看呀~ : )</p>
]]></content>
    <summary type="html"><![CDATA[<p>前两篇文章（<a href="/2014/12/30/history-of-europe-01/">第一篇</a>、<a href="/2015/01/06/history-of-europe-02/">第二篇</a>）讨论了欧洲文明发源的三股力量，以及欧洲思想发源的几次思想运动。今次，我们将暂别对理性的讨论，转而讨论与理性相对的浪漫主义；同时我们也会一睹古希腊三大哲人的风采。</p>
]]></summary>
    
      <category term="History" scheme="http://liam0205.me/tags/History/"/>
    
      <category term="Europe" scheme="http://liam0205.me/tags/Europe/"/>
    
      <category term="Romantic" scheme="http://liam0205.me/tags/Romantic/"/>
    
      <category term="Greece" scheme="http://liam0205.me/tags/Greece/"/>
    
      <category term="Philosophy" scheme="http://liam0205.me/tags/Philosophy/"/>
    
      <category term="Literature and Social Sciences" scheme="http://liam0205.me/categories/Literature%20and%20Social%20Sciences/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[欧洲史·二：欧洲的思潮]]></title>
    <link href="http://liam0205.me/2015/01/06/history-of-europe-02/"/>
    <id>http://liam0205.me/2015/01/06/history-of-europe-02/</id>
    <published>2015-01-06T13:27:37.000Z</published>
    <updated>2015-01-22T08:20:23.000Z</updated>
    <content type="html"><![CDATA[<p><a href="/2014/12/30/history-of-europe-01/">上一次</a>讲到欧洲文明发端的三股力量和古典、中世纪和近代在事件和时间上的划分。今次写一写和思想有关的东西。</p>
<p>上述三股力量组成的混合体经历了长达一千年的中世纪时期。然而，尽管持续时间很长，这个混合体内部却并不稳定。伴随着文艺复兴的开始，从公元 1400 年左右开始，这个混合体逐渐崩毁，并开始建立起新的秩序。</p>
<a id="more"></a>


<h2 id=" 文艺复兴 ">文艺复兴</h2>
<p>前一篇文章里提到，中世纪时期，基督教会保留了许许多多的古希腊科学文化知识。然而，基督教会却没有将这些科学文化知识公开；而是藏起来，选择其中对维护自己教义有利的知识，甚至是曲解其中的含义来维护自己的教义。这实际上是对人的思想的一种控制。基督教会利用这些知识，将人们日常生活中能够观察到的现象和基督教的神学联系起来，控制人们的思想，巩固自己的地位。</p>
<p>文艺复兴运动的意义在于，当时有许多游离于教会之外的学者，将这些知识从神学当中剥离开来。它将人们的生活从神圣的教会的光辉中解脱出来，认为宗教只是私人事情的一部分，不应该左右社会，也不应该控制人们的思想。总而言之，它将社会逐渐世俗化。</p>
<p>将知识从教会的手中解放出来本来应当是一件好事。可是，当时的学者认可古希腊的科技知识，向往其时的社会状态，并对此达到了一种狂热的地步。<strong>他们认为古希腊的科技文化知识是经典的、最好的、无与伦比无法超越的。也就是说，他们继承了古希腊的知识，却未能继承古希腊人们辩证的思想。</strong></p>
<p>在文艺复兴运动中，思想得以从教会的控制中解放，然而将古希腊当做是「上限」却又阻碍了欧洲「再进一步」。</p>
<p>事实上，「古典」、「中世纪」和「近代」这样的划分就是文艺复兴时期的观点。那时候人们认为古典世界已然臻至完美，却在中世纪被基督教会掌控逐渐偏离正道，而文艺复兴又重新回到了正轨。古希腊人曾经认为人体是完美的，在艺术上的裸体展现得是人体的力量和美。而中世纪的绘画雕塑则对裸体遮遮掩掩，反映的是基督教的原罪，认为裸体是邪恶的。到了文艺复兴，米开朗琪罗的雕塑作品，当然是裸体塑像，则被认为是尊贵、高尚和美丽的化身。</p>
<p>而反过来，欧洲人至今以基督诞生的那年作为纪年起点。前一种对年代的划分明显排斥基督教，实际的纪元却又与基督教密不可分。</p>
<p>此间的矛盾一方面反映了欧洲继承自「混合体」，另一方面反映出文艺复兴虽然是思想的一次革命，但却不够彻底。</p>
<h2 id=" 宗教改革 ">宗教改革</h2>
<p>前文提到，在进入罗马帝国的几百年间，基督教发展出了庞大而完善的体制；在罗马帝国灭亡之后，教皇与君主平起平坐，管理文武百官。最终的结果就是前文提到的「基督教变成了罗马人的宗教」。</p>
<p>实际上，教会发展到最后，变成了这样一种怪物：教义由教会制定、整个社会也受教会管理、对犯错的人的审判也由教会进行。你没看错，立法权、行政权、司法权都被教会一手掌握。这种畸形的怪物发展到什么地步呢？如果你是一个富商，在你将死的时候，会有神父告诉你，你必须把钱捐出来给教会，不然你就进不了天堂。</p>
<p>马丁·路德是一名虔诚的基督教徒，他对自己的原罪感到无可奈何，对如何救赎毫无头绪，终日煎熬。他不知道自己一个浑身罪恶的人，如何才能得到救赎。有一天，马丁·路德读到《圣经》中保罗写给罗马教会的书信，信中说：「只要你相信耶稣基督，就能得到救赎」。也就是说，你其实什么也不用做，不用遵循教会制定的法度，不用对神父言听计从，只要相信上帝，坚守自己的信仰，就能得到救赎。</p>
<p>马丁·路德认为，《圣经》是唯一的权威：凡是圣经上没有写的，教会就没有理由去制定或者执行哪个「训令」。马丁·路德意识到，人们的思想为教会所控制，根本原因在于《圣经》是由拉丁文所写，并不是人人都能阅读的。于是马丁·路德将《圣经》翻译成德文，使得人人都能从《圣经》中得到自我救赎的力量。</p>
<p>马丁·路德的基督教后来从罗马教会的基督教中分离出来。遵循「因信称义」的观点的马丁·路德教派，后来发展为「基督新教」，而罗马教会的基督教，则被称为「天主教」。</p>
<p>宗教改革的核心观点在于，<strong>《圣经》是唯一的权威，基督教并不是罗马人的，要让基督教回到中世纪之前的样子</strong>。</p>
<p>有意思的是，马丁·路德从天主教那里拿来《圣经》把它翻译出来，变得人人都可以读，人人都可以从中得到自己的见解。于是，原本唯一的、权威的解读不复存在了，各种解读并立而起，马丁·路德自己的解释也被攻击。经过百余年的争吵，谁也无法说服谁，天主教和基督新教慢慢变得和平共处。</p>
<p>文艺复兴和宗教改革在一定意义上都是「回到过去」。文艺复兴从罗马教会那里拿来古希腊和古罗马的文化知识，来对抗教会对知识的钳制；宗教改革则从罗马教会那里拿来圣经，颠覆天主教的神学和权威。接下来 17 世纪的科学革命则整个颠覆了过去人们的观念。</p>
<h2 id=" 科学革命 ">科学革命</h2>
<p>由于观测手段的限制，希腊人认为地球是宇宙的中心——有谁能推动地球呢？17 世纪，这个观点终于被推翻。地球环绕着太阳运行，太阳才是这个天体系统的中心。</p>
<p>首先是观测。随着观测手段的不断进步，人们对星体运行的轨迹描绘得越来越精确。与此同时，这些轨迹与地心说的轨迹误差越来越大，地心说的维护者不得不去不断进行修正，使得地心说的模型变得越来越复杂。其次时理论。牛顿的万有引力定律和相应的数学手段为日心说提供了有力的理论武器。人们精确地计算出了地球绕太阳运转的轨道，与观测事实符合得很好。</p>
<p>这样一来，地心说终于招架不住，教会不得不低头，承认日心说。在科学发展的过程中，人们产生了两种情绪：</p>
<ul>
<li><strong>希腊人错了，古典并不是完美的</strong></li>
<li><strong>自以为特别的我们在宇宙中其实很普通</strong></li>
</ul>
<p>好在，那个时代的人并没有因为日心说、进化论之类的发现而妄自菲薄，贬低自己的重要性。相反，他们认为，如果人们能够借由理性，探索出整个自然体系的运作规律、用数学模型精确表达，再将这些成果反馈到人类生活上，人类就会发生巨大的改变。这种渴望，成为了启蒙运动的原动力。</p>
<h2 id=" 启蒙运动 ">启蒙运动</h2>
<p>启蒙运动于 18 世纪从法国开始，其目的是<strong>弘扬理性，用理性改造神学、政府和社会观念</strong>。</p>
<p>启蒙运动时期的人们认为，当时的法国有两大非理性势力。其一是教会。教会到处宣传神迹故事，控制人们的思想，威胁他们说如果不听话就要去地狱受苦。其二是法国国王。国王说自己是受上帝神谕管理这个国家的，质疑王权就是违反教义。（奉天承运什么的……）</p>
<p>启蒙运动过程中，有一部百科全书被人们汇总出来。它是第一部现代意义上的百科全书。其<strong>将理性运用于一切事物，将神、宗教和其他概念并列于同一个层级</strong>。这传达出一个信息：<strong>宗教是迷信</strong>。</p>
<p>从文艺复兴到宗教改革，从科学革命到启蒙运动，曾经主导欧洲社会的基督教会地位被不断削弱，欧洲走上了理性、进步的道路。</p>
]]></content>
    <summary type="html"><![CDATA[<p><a href="/2014/12/30/history-of-europe-01/">上一次</a>讲到欧洲文明发端的三股力量和古典、中世纪和近代在事件和时间上的划分。今次写一写和思想有关的东西。</p>
<p>上述三股力量组成的混合体经历了长达一千年的中世纪时期。然而，尽管持续时间很长，这个混合体内部却并不稳定。伴随着文艺复兴的开始，从公元 1400 年左右开始，这个混合体逐渐崩毁，并开始建立起新的秩序。</p>
]]></summary>
    
      <category term="History" scheme="http://liam0205.me/tags/History/"/>
    
      <category term="Europe" scheme="http://liam0205.me/tags/Europe/"/>
    
      <category term="Christianity" scheme="http://liam0205.me/tags/Christianity/"/>
    
      <category term="God" scheme="http://liam0205.me/tags/God/"/>
    
      <category term="Reason" scheme="http://liam0205.me/tags/Reason/"/>
    
      <category term="Science" scheme="http://liam0205.me/tags/Science/"/>
    
      <category term="Romantic" scheme="http://liam0205.me/tags/Romantic/"/>
    
      <category term="Literature and Social Sciences" scheme="http://liam0205.me/categories/Literature%20and%20Social%20Sciences/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[欧洲史·一：欧洲文明开端的三股力量]]></title>
    <link href="http://liam0205.me/2014/12/30/history-of-europe-01/"/>
    <id>http://liam0205.me/2014/12/30/history-of-europe-01/</id>
    <published>2014-12-30T15:26:43.000Z</published>
    <updated>2014-12-30T15:29:09.000Z</updated>
    <content type="html"><![CDATA[<p>欧洲文明的发端，有三股力量：</p>
<ol>
<li>古希腊和古罗马的科学文化；</li>
<li>作为犹太民族宗教的分支的基督教；</li>
<li>征服了罗马帝国的日耳曼战士文化。</li>
</ol>
<a id="more"></a>

<h2 id=" 希腊和罗马 ">希腊和罗马</h2>
<p>一句话概括的话，希腊人在科学文化上极其聪明；而罗马人则相对更加骁勇善战，治国、治军、工程建筑比希腊人更优秀。</p>
<p>希腊人的聪明不需多说：哲学、艺术、文学、数学、科学、医学、政治，这些学科的源头都可以追溯到希腊。现代数学中，随处可见的「希腊字母」，实际上也是对此的一种「纪念」。</p>
<p>罗马人的骁勇也不需多说：古罗马的版图疆域横跨亚欧非，环绕整个地中海。</p>
<p>这样一来的结果就是，罗马人统治了欧洲，但是罗马人却以懂的希腊的语言和文化为荣。</p>
<h2 id=" 基督教的力量 ">基督教的力量</h2>
<p>基督教是犹太教的一个分支。</p>
<p>在犹太人的眼里，「上帝」是唯一的神，而自己的族群（犹太人）则是上帝的选民。此外，犹太人相信遵守上帝的条律，也就是上帝借由「摩西」的口说出来的「摩西十诫」，就能得到上帝的优待。摩西十诫的要求实际上是一种道德的约束，这些约束在犹太人的发展中逐渐成为律法。</p>
<p>犹太教的一些特点和古希腊和古罗马人的信仰是有很多不同的。首先，犹太教只承认耶和华为唯一的真神；其次，犹太教中，道德和律法是密不可分的，古希腊和古罗马却非是如此（希腊神话里的神各种乱伦什么的）。</p>
<p>耶稣是一个犹太人。在耶稣传道的时候，巴勒斯坦已经被罗马帝国纳入版图。耶稣在传道过程中，修改、发扬了犹太教的教义；特别是，耶稣把犹太人严苛的道德训诫转化成了「宇宙大爱」。</p>
<blockquote>
<p>大家都说：「你应当爱你的亲人，应当恨你的仇人」。<br>我却要说：「你们应当爱你的仇人」。——《马太福音书》</p>
</blockquote>
<p>由于耶稣作为讲道人传播的教义与犹太教的教义有相悖的地方，所以犹太教的领导人和罗马帝国练手杀死了耶稣——将他钉在十字架上。</p>
<p>耶稣的死留下了一个分歧，即：只有先变成犹太人，才可以信奉基督教；还是承认耶稣关于「爱」的教会凌驾与一切之上，人人都可以信奉基督教？如果前一个派系获得胜利，那么如今的基督教将只是犹太教的一个小小分支；而显然，后一个派系获得了胜利。</p>
<h2 id=" 日耳曼民族 ">日耳曼民族</h2>
<p>日耳曼民族最开始居于罗马帝国的北方。日耳曼人骁勇善战，甚至可以说是「为了打仗而生」：日耳曼人认为「可以用流血去换得的东西，用流汗这样的方式去换得，是没骨气的表现，是下等人才会做的事情」。</p>
<p>从公元 400 年之后开始，日耳曼人开始入侵罗马帝国；而到了公元 476 年前后，这样的蛮族取代了整个罗马帝国。</p>
<h2 id=" 三者的联结 ">三者的联结</h2>
<p>对于犹太人，罗马人只是把他们当做是一群稀奇古怪的人，所以对信奉犹太教的人，作为统治者的罗马人并不怎么关心。但是在罗马人眼里，信奉基督教的人是一群反动分子——因为他们认为上帝是唯一的神，而不愿意对君主行礼——欲要除之而后快。</p>
<p>就这样，罗马人对基督教打压了三百多年。</p>
<p>不过，在公元 313 年，<strong>君士坦丁大帝</strong>公开表示支持基督教会。于是基督教成为了罗马帝国正式而唯一的宗教，基督教的发展走上正轨。于是，<strong>罗马帝国变成了基督教的天下</strong>。</p>
<p>这时候的基督教，在「地下工作」的三四百年间，发展出了自己的法度并设有法庭和监狱；教会也同时掌管婚姻、继承和税收。基督教会俨然是「第二个政府」。在罗马帝国灭亡之后，基督教会保留了下来。教皇和君主平起平坐，管理文武百官。二者结合，<strong>基督教会变成了罗马人的教会</strong>。</p>
<p>与此同时，基督教会在罗马帝国的灭亡过程中，保留了相当的古希腊和古罗马的科学文化技术。教会的人，利用这些先进的科技文化，对自己的教义进行解读，以维护自己的权利。诚然，基督教曲解了相当的科学成就，但是客观上，<strong>基督教将古希腊和古罗马的文明保存了下来</strong>。</p>
<p>日耳曼蛮族在侵略罗马帝国的过程中逐渐发现一个棘手的问题：他们目不识丁，不懂得如何统治自己的国家。日耳曼民族的首领在打仗的过程中，化身为国王，将征服的土地分给手下的士兵；这些士兵化身为贵族，条件是在过往需要用兵的时候要出兵。</p>
<p>基督教的教主对国王表示自己并不需要土地，避免了与国王和贵族的冲突；同时表示愿意帮助管理国家，赢得了国王的支持。同时，主教们对士兵说，「如果你认可基督教的上帝，那么就能变得更勇武」。最终，<strong>日耳曼蛮族支持基督教</strong>。</p>
<h2 id=" 小结 ">小结</h2>
<p>从古希腊和古罗马开始，到罗马帝国覆灭，这段时间称为<strong>古典时期</strong>；从这三者的联结开始，到 14 世纪三者联结的崩毁，称为<strong>中世纪</strong>；中世纪之后则称为<strong>近代</strong>。</p>
<h2 id=" 番外 ">番外</h2>
<p>教会虽然最终称为了日耳曼蛮族的搭档，但是基督教并不是一个好战的宗教。虽然在先后和罗马、日耳曼民族的合作中变得渐渐支持「正义的战争」，但是却依旧不能接受日耳曼民族的好战的价值观。</p>
<p>不过日耳曼蛮族毕竟目不识丁，妥妥地被继承了希腊罗马科技文化的教会坑了。</p>
<p>教会鼓励他们对战斗的热爱，却改造他们的思想，让他们只参与「正义的战斗」。而何为正义，则全凭教会说了算。比如教会鼓励十字军东征，去夺回陷入伊斯兰教手中的东方的圣地。</p>
<p>同时，教会也要求骑士尊重出身贵族的女士，保护她们、敬重他们。</p>
<p>在骑士绝迹之后，这些被教会改造的中世纪遗风转化成为了所谓的「绅士风度」。</p>
]]></content>
    <summary type="html"><![CDATA[<p>欧洲文明的发端，有三股力量：</p>
<ol>
<li>古希腊和古罗马的科学文化；</li>
<li>作为犹太民族宗教的分支的基督教；</li>
<li>征服了罗马帝国的日耳曼战士文化。</li>
</ol>
]]></summary>
    
      <category term="History" scheme="http://liam0205.me/tags/History/"/>
    
      <category term="Europe" scheme="http://liam0205.me/tags/Europe/"/>
    
      <category term="Greece" scheme="http://liam0205.me/tags/Greece/"/>
    
      <category term="Rome" scheme="http://liam0205.me/tags/Rome/"/>
    
      <category term="Germanic" scheme="http://liam0205.me/tags/Germanic/"/>
    
      <category term="Christianity" scheme="http://liam0205.me/tags/Christianity/"/>
    
      <category term="Literature and Social Sciences" scheme="http://liam0205.me/categories/Literature%20and%20Social%20Sciences/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[订制 Sublime Text 下 LaTeXTools 插件的编译脚本]]></title>
    <link href="http://liam0205.me/2014/12/14/advanced-builder-latextools/"/>
    <id>http://liam0205.me/2014/12/14/advanced-builder-latextools/</id>
    <published>2014-12-14T10:15:34.000Z</published>
    <updated>2014-12-14T12:25:13.000Z</updated>
    <content type="html"><![CDATA[<p><a href="https://github.com/SublimeText/LaTeXTools" target="_blank">LaTeXTools</a> 是 <a href="http://www.sublimetext.com" target="_blank">Sublime Text</a> 上的一个插件，用以增强在 Sublime Text 上编辑和编译 LaTeX 文档的体验。但是其自带的编译脚本比较难用，缺点如下：</p>
<ul>
<li>调用 LaTeXmk 或者 TeXify，多次编译，速度缓慢，难以切换。</li>
<li>无法在编译时方便地添加命令行参数，导致依赖 <code>\write18</code> 命令的宏包（比如 <code>minted</code>）无法使用。</li>
</ul>
<p>为了解决这个问题，我自己写了一个编译脚本，命名为 <code>advancedBuilder.py</code>。</p>
<a id="more"></a>

<h2 id=" 安装方法 ">安装方法</h2>
<ul>
<li>在<a href="/attachment/LaTeX-useful-tools/advancedBuilder.py">这里</a>下载编译脚本；</li>
<li>打开 Sublime Text 目录；</li>
<li>将脚本拷贝至 <code>./Packages/LaTeXTools/builders/</code>；</li>
<li>编辑 <code>./Packages/User/LaTeXTools.sublime-settings</code>，将 <code>&quot;builder&quot;</code> 值从原来的 <code>traditional</code> 改为 <code>advanced</code>，即：<code>&quot;builder&quot;: &quot;advanced&quot;</code>；</li>
<li>重启 Sublime Text。</li>
</ul>
<h2 id=" 使用方法 ">使用方法</h2>
<p>基本的使用方法和原本的 <code>traditionalBuilder.py</code> 相同，即使用快捷键 <code>Ctrl + B</code> 编译（Mac OS X 是 <code>CMD + B</code>）。但在文档开头的注释中，增加了更多的用法。</p>
<h3 id=" 改变编译流程 ">改变编译流程</h3>
<p>可以在主文档开头的注释中，使用下列语法改变编译流程。</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">%!TEX builder = BUILDER</span>
</pre></td></tr></table></figure>



<p>其中 <code>BUILDER</code> 的可选值有：</p>
<ul>
<li><code>SIMPLE</code></li>
<li><code>LATEXMK</code></li>
<li><code>TEXIFY</code></li>
</ul>
<p>大小写不论，默认是 <code>SIMPLE</code>，即只编译一遍。</p>
<h3 id=" 选择编译引擎 ">选择编译引擎</h3>
<blockquote>
<p>此功能继承自默认编译脚本，有增强。</p>
</blockquote>
<p>可以在主文档开头的注释中，使用下列语法改变编译引擎。</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">%!TEX program = PROGRAM</span>
</pre></td></tr></table></figure>



<p>其中 <code>PROGRAM</code> 的可选值有：</p>
<ul>
<li><code>pdflatex</code></li>
<li><code>xelatex</code></li>
<li><code>lualatex</code></li>
<li><code>platex-ng</code></li>
<li><code>pdftex</code></li>
<li><code>xetex</code></li>
<li><code>luatex</code></li>
<li><code>ptex-ng</code></li>
</ul>
<p>大小写敏感，默认值是 <code>pdflatex</code>。</p>
<h3 id=" 选择编译参数 ">选择编译参数</h3>
<p>可以在主文档开头的注释中，使用下列语法添加编译参数。</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">%!TEX option = OPTION</span>
</pre></td></tr></table></figure>



<p>其中 <code>OPTION</code> 的可选值为对 <code>PROGRAM</code> 合法的任意参数。大小写敏感，默认为空。</p>
<p>另外，强制启动 <code>-interaction=nonstopmode</code> 和 <code>-synctex=1</code> 两个参数，不允许更改。</p>
<h3 id=" 指定主文档 ">指定主文档</h3>
<blockquote>
<p>此功能完整继承自默认编译脚本。</p>
</blockquote>
<p>可以在子文档的开头注释中，使用下列语法指定主文档。</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">%!TEX root = ROOT</span>
</pre></td></tr></table></figure>



<p>其中 <code>ROOT</code> 为主文档相对当前子文档的路径。指定主文档之后，可以在子文档中直接使用快捷键编译主文档，而不用将 Sublime Text 标签页切换到主文档再进行编译。</p>
<h2 id=" 示例 ">示例</h2>
<figure class="highlight tex"><figcaption><span>foo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
Hello world!
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>对应的命令行为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>pdflatex <span class="attribute">-interaction</span><span class="subst">=</span>nonstopmode <span class="attribute">-synctex</span><span class="subst">=</span><span class="number">1</span>  foo<span class="built_in">.</span>tex
</pre></td></tr></table></figure>



<hr>
<figure class="highlight tex"><figcaption><span>foo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="comment">%!TEX builder = latexmk</span>
<span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
Hello world!
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>对应的命令行为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>latexmk <span class="attribute">-cd</span> <span class="attribute">-e</span> <span class="variable">$pdflatex</span> <span class="subst">=</span> <span class="string">'pdflatex -interaction=nonstopmode -synctex=1  %S %O'</span> <span class="attribute">-f</span> <span class="attribute">-pdf</span> foo<span class="built_in">.</span>tex
</pre></td></tr></table></figure>



<hr>
<figure class="highlight tex"><figcaption><span>foo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="comment">%!TEX builder = latexmk</span>
<span class="comment">%!TEX program = xelatex</span>
<span class="comment">%!TEX option = -shell-escape</span>
<span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
Hello world!
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>对应的命令行为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>latexmk <span class="attribute">-cd</span> <span class="attribute">-e</span> <span class="variable">$pdflatex</span> <span class="subst">=</span> <span class="string">'xelatex -interaction=nonstopmode -synctex=1 -shell-escape %S %O'</span> <span class="attribute">-f</span> <span class="attribute">-pdf</span>
</pre></td></tr></table></figure>



<hr>
<figure class="highlight tex"><figcaption><span>foo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="comment">%!TEX builder = latexmk</span>
<span class="comment">%!TEX program = xelatex</span>
<span class="comment">%!TEX option = -shell-escape</span>
<span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\input</span><span class="special">{</span>bar.tex<span class="special">}</span>
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>





<figure class="highlight tex"><figcaption><span>bar </span></figcaption><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="comment">%!TEX root = foo.tex</span>
Hello world!
</pre></td></tr></table></figure>



<p>在 <code>bar.tex</code> 的窗口编译，命令行为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>latexmk <span class="attribute">-cd</span> <span class="attribute">-e</span> <span class="variable">$pdflatex</span> <span class="subst">=</span> <span class="string">'xelatex -interaction=nonstopmode -synctex=1 -shell-escape %S %O'</span> <span class="attribute">-f</span> <span class="attribute">-pdf</span>
</pre></td></tr></table></figure>


]]></content>
    <summary type="html"><![CDATA[<p><a href="https://github.com/SublimeText/LaTeXTools" target="_blank">LaTeXTools</a> 是 <a href="http://www.sublimetext.com" target="_blank">Sublime Text</a> 上的一个插件，用以增强在 Sublime Text 上编辑和编译 LaTeX 文档的体验。但是其自带的编译脚本比较难用，缺点如下：</p>
<ul>
<li>调用 LaTeXmk 或者 TeXify，多次编译，速度缓慢，难以切换。</li>
<li>无法在编译时方便地添加命令行参数，导致依赖 <code>\write18</code> 命令的宏包（比如 <code>minted</code>）无法使用。</li>
</ul>
<p>为了解决这个问题，我自己写了一个编译脚本，命名为 <code>advancedBuilder.py</code>。</p>
]]></summary>
    
      <category term="LaTeXTools" scheme="http://liam0205.me/tags/LaTeXTools/"/>
    
      <category term="Python" scheme="http://liam0205.me/tags/Python/"/>
    
      <category term="Compile" scheme="http://liam0205.me/tags/Compile/"/>
    
      <category term="LaTeX" scheme="http://liam0205.me/categories/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[日文 LaTeX 系统介绍 - 最简示例]]></title>
    <link href="http://liam0205.me/2014/12/11/ptex-intro-and-tutorial-03/"/>
    <id>http://liam0205.me/2014/12/11/ptex-intro-and-tutorial-03/</id>
    <published>2014-12-11T04:13:13.000Z</published>
    <updated>2014-12-11T06:19:52.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>本文为译文，原文载于<a href="http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-3-simple-documents/" target="_blank">这里</a>。欢迎关注本系列的文章。</p>
</blockquote>
<p><a href="http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-2-characters-and-encodings/" target="_blank">上一篇文章</a>（<a href="http://liam0205.me/2014/12/08/ptex-intro-and-tutorial-02/">译文</a>）我们探讨了关于字符集和编码的一些细节，今次我们继续讨论如何在 LaTeX 中书写日文。今天的内容需要动手操作试试，要用不同的引擎和宏包写一些 Hello world 类型的文档。</p>
<p><img src="/images/pTeX-intro/nihongo-latex.jpg" alt=""></p>
<p>今天的内容同样会涉及到一些配置 TeX 环境的内容，会讲一讲如何在 <a href="http://tug.org/texlive/" target="_blank">TeX Live</a> 里配置书写日文的环境。</p>
<a id="more"></a>

<h2 id=" 配置日文 _TeX_ 环境 ">配置日文 TeX 环境</h2>
<p>我们假设，你已经在计算机上安装好了类似 TeX Live 2014 的 TeX 系统。你可以在下列 TeX 系统中选择其一安装。</p>
<ul>
<li>TeX Live 的原始版本 (Upstream TeX Live installation) - 完整的安装步骤，请参考 <a href="http://tug.org/texlive/doc/texlive-zh-cn/texlive-zh-cn.pdf" target="_blank">TeX Live 的文档（中文版）</a>的第三章。对于 <a href="http://tug.org/texlive/quickinstall.html" target="_blank">Linux</a> 和 <a href="http://tug.org/texlive/windows.html" target="_blank">Windows</a> 系统，也可以参照相应的快速安装教程。对于 Mac OS X 的用户，则建议安装基于 TeX Live 的 <a href="http://tug.org/mactex/" target="_blank">MacTeX</a>。</li>
<li>发行版里的 TeX Live (Distribution’s TeX Live) - 具体的安装取决于你使用的发行版。如果你用的是 Debian/jessie 或者 Debian/sid，那么你只需要运行 <code>apt-get install texlive-full</code> 即可。其他发行版 (Fedora, RedHat, SuSE) 的用户请注意检查发行版里当前的 TeX Live 版本。在老版本的环境下，后文中的例子可能无法得到预期的结果。</li>
<li>W32TeX - <a href="http://w32tex.org/index-zh.html" target="_blank">W32TeX</a> 是 Akira KAKUTO 针对 Windows 系统制作的 TeX 发行版，其中的宏包也专门为 Windows 系统筛选过。W32TeX 对日文的配置可能是最周全的，不过我没有亲身体验过。</li>
<li>其他 TeX 发行版 - <a href="http://miktex.org/" target="_blank">MiKTeX</a> 是另一个重要的 TeX 发行版。MiKTeX 是 Windows 平台上高度集成的优秀发行版。不过因为打包和依赖脚本的差异，特别是涉及到 <code>udpmap</code> 的部分与 TeX Live 完全不同，MiKTeX 在我手头的一些设备上并不能很好地运行。</li>
</ul>
<p>我的建议是，如果你的发行版足够新，那最好使用软件源里的 TeX Live；不然的话最好是使用 TUG 上的 TeX Live，包括 MacTeX。</p>
<h2 id=" 最简示例 ">最简示例</h2>
<p>言归正传。接下来我们来写几个「Hello world」文档。当然，「Hello world」这几个字母里并没有日文字，所以文章的正文部分看起来会是这个样子：</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\LaTeX</span> で日本語を書きましょう！
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>在进行下一步之前，有必要说一下关于编码的问题。请按以下规则，在保存文件的时候选择正确的编码：</p>
<ul>
<li>Unix-like 系统以及 Mac OS X 系统：总是保存为 UTF-8 编码</li>
<li>Windows 系统：在测试 pLaTeX 的时候使用 ShiftJIS 编码，其他时候使用 UTF-8 编码</li>
</ul>
<p>这样做的原因在于：在 Windows 系统上，pTeX 以 ShiftJIS 编码作为默认编码；在其他系统上以 UTF-8 编码作为默认编码。当然，你也可以在 Windows 上把 pLaTeX 的测试文档以 UTF-8 编码保存，但是在编译的时候你得加上 <code>-kanji utf8</code> 这样的参数。</p>
<h3 id="pLaTeX_ 以及 _upLaTeX">pLaTeX 以及 upLaTeX</h3>
<p>这是最简单的情况，我们只需要加上 <code>\documentclass</code> 就好了。</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\LaTeX</span> で日本語を書きましょう！
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>以正确的编码将其保存为 <code>hello-ptex.tex</code>，然后运行 <code>platex</code>，UTF-8 编码的控制台会有类似于如下的输出：</p>
<figure class="highlight text"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre>$ platex hello-ptex.tex
This <span class="keyword">is</span> e-pTeX, Version <span class="number">3.14159265</span>-p3<span class="number">.5</span>-<span class="number">130605</span>-<span class="number">2.6</span> (utf8.euc) (TeX Live <span class="number">2014</span>) (preloaded format=platex)
 restricted \write18 enabled.
entering extended mode
(./hello-ptex.tex
pLaTeX2e &lt;<span class="number">2006</span>/<span class="number">11</span>/<span class="number">10</span>&gt; (based <span class="function_start"><span class="keyword">on</span></span> LaTeX2e &lt;<span class="number">2014</span>/<span class="number">05</span>/<span class="number">01</span>&gt; patch level <span class="number">0</span>)
Babel &lt;<span class="number">3.9</span>k&gt; <span class="keyword">and</span> hyphenation patterns <span class="keyword">for</span> <span class="number">79</span> languages loaded.
(/home/norbert/tl/<span class="number">2014</span>/texmf-dist/tex/latex/base/article.cls
Document Class: article <span class="number">2007</span>/<span class="number">10</span>/<span class="number">19</span> v1<span class="number">.4</span>h Standard LaTeX document <span class="type">class</span>
(/home/norbert/tl/<span class="number">2014</span>/texmf-dist/tex/latex/base/size10.clo)) (./hello-ptex.aux
) [<span class="number">1</span>] (./hello-ptex.aux) )
Output written <span class="function_start"><span class="keyword">on</span></span> hello-ptex.dvi (<span class="number">1</span> page, <span class="number">384</span> bytes).
Transcript written <span class="function_start"><span class="keyword">on</span></span> hello-ptex.<span class="command">log</span>.
</pre></td></tr></table></figure>



<p>Windows 系统上的输出与此类似，只不过在版本号后面的不是 <code>utf8.euc</code> 而是 <code>sjis</code>。</p>
<p>如你所见，输出结果是一个 DVI 文件。注意，此处<strong>不要</strong>使用 <code>dvips</code> 将其转换为 PostScript 文件，<code>dvips</code> 也许能够工作，但是 PS 文件却无法正常显示；请总是使用 <code>dvipdfmx</code> 将 pTeX/upTeX 输出的 DVI 文件转换为 PDF 文件。</p>
<p>因此，我们输入命令</p>
<figure class="highlight text"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>$ dvipdfmx hello<span class="attribute">-ptex</span><span class="built_in">.</span>dvi
hello<span class="attribute">-ptex</span><span class="built_in">.</span>dvi <span class="subst">-&gt; </span>hello<span class="attribute">-ptex</span><span class="built_in">.</span>pdf
<span class="preprocessor">[</span><span class="number">1</span><span class="preprocessor">]</span><span class="markup">
7636 bytes written</span>
</pre></td></tr></table></figure>



<p>接下来，使用 PDF 阅读器打开得到的 PDF 文档，效果类似于下：</p>
<p><img src="/images/pTeX-intro/hello-ptex.jpg" alt=" 输出效果 "></p>
<p>如果觉得字体效果看起来稍有不同，也暂时不用担心，之后对此会有解释。但不论如何，你应该能看到日文字符，不然就说明有哪里错了。</p>
<p>类似的步骤在 upTeX 下同样奏效：</p>
<figure class="highlight text"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre>$ uplatex hello-ptex<span class="preprocessor">.tex</span>
This is e-upTeX, Version <span class="number">3.14159265</span>-p3<span class="number">.5</span>-u1<span class="number">.11</span>-<span class="number">130605</span>-<span class="number">2.6</span> (utf8<span class="preprocessor">.uptex</span>) (TeX Live <span class="number">2014</span>) (preloaded format=uplatex)
 restricted \write18 enabled.
entering extended mode
(./hello-ptex<span class="preprocessor">.tex</span>
pLaTeX2e &lt;<span class="number">2011</span>/<span class="number">05</span>/<span class="number">07</span>u00&gt;+<span class="number">0</span> (based on LaTeX2e &lt;<span class="number">2014</span>/<span class="number">05</span>/<span class="number">01</span>&gt; patch level <span class="number">0</span>)
Babel &lt;<span class="number">3.9</span>k&gt; <span class="keyword">and</span> hyphenation patterns for <span class="number">79</span> languages loaded.
(/home/norbert/tl/<span class="number">2014</span>/texmf-dist/tex/latex/base/article<span class="preprocessor">.cls</span>
Document Class: article <span class="number">2007</span>/<span class="number">10</span>/<span class="number">19</span> v1<span class="number">.4</span>h Standard LaTeX document class
(/home/norbert/tl/<span class="number">2014</span>/texmf-dist/tex/latex/base/size10<span class="preprocessor">.clo</span>)) (./hello-ptex<span class="preprocessor">.aux</span>
) [<span class="number">1</span>] (./hello-ptex<span class="preprocessor">.aux</span>) )
Output written on hello-ptex<span class="preprocessor">.dvi</span> (<span class="number">1</span> page, <span class="number">380</span> bytes).
Transcript written on hello-ptex<span class="preprocessor">.log</span>.
$ dvipdfmx hello-ptex<span class="preprocessor">.dvi</span>
hello-ptex<span class="preprocessor">.dvi</span> -&gt; hello-ptex<span class="preprocessor">.pdf</span>
[<span class="number">1</span>]
<span class="number">7638</span> bytes written
</pre></td></tr></table></figure>



<p>输出结果与之前应当完全相同。</p>
<p>多简单啊~</p>
<h3 id="XeLaTeX">XeLaTeX</h3>
<p>如果你用 XeLaTeX 编译同样的代码，输出结果里就不会有日文字符。这里我们要多写一点代码。这里我会展示使用 <a href="http://ctan.org/pkg/xecjk" target="_blank">xeCJK</a> 和 <a href="http://ctan.org/pkg/zxjatype" target="_blank">ZXjatype</a> 的最简示例。这两个宏包在 TeX Live 里都有，你可以选择其一。</p>
<p>不管你用哪个宏包，你都得选择一个日文字体，不然的话日文字符就不会输出。</p>
<h4 id="xeCJK">xeCJK</h4>
<p>对于 xeCJK 来说，你得这么写：</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>xeCJK<span class="special">}</span>
<span class="command">\setCJKmainfont</span><span class="special">{</span>ipaexm.ttf<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\LaTeX</span> で日本語を書きましょう！
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>将其以 UTF-8 编码保存为 <code>hello-xetex.tex</code>，之后运行 <code>xelatex</code>:</p>
<figure class="highlight text"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="variable">$ </span>xelatex hello-xetex.tex
<span class="constant">This</span> is <span class="constant">XeTeX</span>, <span class="constant">Version</span> <span class="number">3.14159265</span>-<span class="number">2.6</span>-<span class="number">0</span>.<span class="number">99991</span> (<span class="constant">TeX</span> <span class="constant">Live</span> <span class="number">2014</span>) (preloaded format=xelatex)
 restricted \write18 enabled.
entering extended mode
(./hello-xetex.tex
<span class="constant">LaTeX2e</span> &lt;<span class="number">2014</span>/<span class="number">05</span>/<span class="number">01</span>&gt;
<span class="constant">Babel</span> &lt;<span class="number">3.9</span>k&gt; <span class="keyword">and</span> hyphenation patterns <span class="keyword">for</span> <span class="number">79</span> languages loaded.
(<span class="regexp">/home/norbert</span><span class="regexp">/tl/</span><span class="number">2014</span>/texmf-dist/tex/latex/base/article.cls
<span class="constant">Document</span> <span class="constant">Class</span><span class="symbol">:</span> article <span class="number">2007</span>/<span class="number">10</span>/<span class="number">19</span> v1.<span class="number">4</span>h <span class="constant">Standard</span> <span class="constant">LaTeX</span> document <span class="class"><span class="keyword">class</span></span>
(<span class="regexp">/home/norbert</span><span class="regexp">/tl/</span><span class="number">2014</span>/texmf-dist/tex/latex/base/size1<span class="number">0</span>.clo))
(<span class="regexp">/home/norbert</span><span class="regexp">/tl/</span><span class="number">2014</span>/texmf-dist/tex/xelatex/xecjk/xeCJK.sty
(<span class="regexp">/home/norbert</span><span class="regexp">/tl/</span><span class="number">2014</span>/texmf-dist/tex/latex/l3kernel/expl3.sty
.....
(./hello-xetex.aux) (<span class="regexp">/home/norbert</span><span class="regexp">/tl/</span><span class="number">2014</span>/texmf-dist/tex/latex/tipa/t3cmr.fd)
[<span class="number">1</span>] (./hello-xetex.aux) )
<span class="constant">Output</span> written on hello-xetex.pdf (<span class="number">1</span> page).
<span class="constant">Transcript</span> written on hello-xetex.log.
</pre></td></tr></table></figure>



<p>直接就能得到 PDF 文档。</p>
<h4 id="ZXjatype">ZXjatype</h4>
<p>对于 ZXjatype 来说，你得这么写：</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>zxjatype<span class="special">}</span>
<span class="command">\setjamainfont</span><span class="special">{</span>ipaexm.ttf<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\LaTeX</span> で日本語を書きましょう！
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<h3 id="pdfLaTeX">pdfLaTeX</h3>
<p>接下来，我们看看在 pdfLaTeX 底下怎么使用。pdfTeX 引擎可能是全球范围内使用最广泛的引擎了。这里，我们也将讨论两个宏包的使用方法：Werner Lemberg 的 <a href="http://cjk.ffii.org/" target="_blank">CJK</a> 宏包和 Takayuki Yato 的 <a href="http://www.ctan.org/pkg/bxcjkjatype" target="_blank">BXcjkjatype</a>。</p>
<h4 id="CJK">CJK</h4>
<p>译注：这里作者用了一个很别扭的方式来构建文档，已改用通常习惯的方式。</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>CJKutf8<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>CJK*<span class="special">}</span><span class="special">{</span>UTF8<span class="special">}</span><span class="special">{</span>min<span class="special">}</span>
<span class="command">\LaTeX</span> で日本語を書きましょう！
<span class="command">\end</span><span class="special">{</span>CJK*<span class="special">}</span>
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>将其以 UTF-8 编码保存为 <code>hello-cjk.tex</code>，之后运行 <code>pdflatex</code>:</p>
<figure class="highlight text"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre>$ pdflatex hello<span class="attribute">-cjk</span><span class="built_in">.</span>tex
This is pdfTeX, Version <span class="number">3.14159265</span><span class="subst">-</span><span class="number">2.6</span><span class="subst">-</span><span class="number">1.40</span><span class="number">.15</span> (TeX Live <span class="number">2014</span>) (preloaded format<span class="subst">=</span>pdflatex)
 restricted <span class="subst">\</span>write18 enabled<span class="built_in">.</span>
entering extended mode
(<span class="built_in">.</span>/hello<span class="attribute">-cjk</span><span class="built_in">.</span>tex
LaTeX2e <span class="subst">&lt;</span><span class="number">2014</span>/<span class="number">05</span>/<span class="number">01</span><span class="subst">&gt;</span>
Babel <span class="subst">&lt;</span><span class="number">3.9</span>k<span class="subst">&gt;</span> <span class="literal">and</span> hyphenation patterns for <span class="number">79</span> languages loaded<span class="built_in">.</span>
(/home/norbert/tl/<span class="number">2014</span>/texmf<span class="attribute">-dist</span>/tex/latex/base/article<span class="built_in">.</span>cls
Document Class: article <span class="number">2007</span>/<span class="number">10</span>/<span class="number">19</span> v1<span class="number">.4</span>h Standard LaTeX document class
(/home/norbert/tl/<span class="number">2014</span>/texmf<span class="attribute">-dist</span>/tex/latex/base/size10<span class="built_in">.</span>clo))
(/home/norbert/tl/<span class="number">2014</span>/texmf<span class="attribute">-dist</span>/tex/latex/cjk/texinput/CJKutf8<span class="built_in">.</span>sty
<span class="attribute">...</span>
t/fonts/type1/wadalab/dmj/dmjkk<span class="built_in">.</span>pfb<span class="subst">&gt;&lt;</span>/home/norbert/tl/<span class="number">2014</span>/texmf<span class="attribute">-dist</span>/fonts/typ
e1/wadalab/dmj/dmjsy<span class="built_in">.</span>pfb<span class="subst">&gt;</span>
Output written <span class="keyword">on</span> hello<span class="attribute">-cjk</span><span class="built_in">.</span>pdf (<span class="number">1</span> page, <span class="number">29574</span> <span class="built_in">bytes</span>)<span class="built_in">.</span>
Transcript written <span class="keyword">on</span> hello<span class="attribute">-cjk</span><span class="built_in">.</span><span class="keyword">log</span><span class="built_in">.</span>
</pre></td></tr></table></figure>



<p>如果你仔细观察的话，你会发现：LaTeX 几个字母后的空距和之前的输出不大一样。尽管代码看起来有些麻烦，不过，如果你只是想在非日文的文档里嵌入一小段日文，这仍然是个不错的方案。</p>
<p>译者注：实际上，用下面的代码，也能得到正确的 CJK-western 空距。这应该是原作者不熟悉 CJK 导致的。</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>CJKutf8<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>CJKspace<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>CJK*<span class="special">}</span><span class="special">{</span>UTF8<span class="special">}</span><span class="special">{</span>min<span class="special">}</span>
<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span> で日本語を書きましょう！
<span class="command">\end</span><span class="special">{</span>CJK*<span class="special">}</span>
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<h4 id="BXcjkjatype">BXcjkjatype</h4>
<p>如果上面的代码看起来十分冗长，那么 BXcjkjatype 则提供了一种更简洁也更好的封装。这里只需要用下面简单的代码就能得到输出了：</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">[</span>whole<span class="special">]</span><span class="special">{</span>bxcjkjatype<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\LaTeX</span> で日本語を書きましょう！
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>输出结果和之前 CJK 方式的结果类似。不过，嵌入的字体和之前有所不同。BXcjkjatype 默认使用 IPAex 字体。使用此方式请注意：不要在文档中使用任何非 ASCII 字符。</p>
<h3 id="LuaLaTeX">LuaLaTeX</h3>
<p>LuaTeX 是一个嵌入了 Lua 解释器的新的 TeX 引擎，这使得我们可以使用 Lua 语言来控制和调整许多 TeX 内部的行为。尽管它还不能完全取代 pdfTeX，但是至少拿来输出文档还是可以的。一些日本 TeX 同好为其开发了 <a href="http://ctan.org/pkg/luatexja" target="_blank">LuaTeX-ja</a> 宏包，用以在 LuaTeX 里使用日文。最简示例是这样的：</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>luatexja<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\LaTeX</span> で日本語を書きましょう！
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>运行 <code>lualatex</code> 之后，你可能要等上不少时间。这是因为第一次运行 LuaLaTeX 的时候，系统需要刷新字体，耐心等待就好。最终在控制台终端上，你大概会得到下面的输出内容：</p>
<figure class="highlight text"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre>$ lualatex hello<span class="attribute">-luatexja</span><span class="built_in">.</span>tex
This is LuaTeX, Version beta<span class="subst">-</span><span class="number">0.79</span><span class="number">.1</span> (TeX Live <span class="number">2014</span>) (rev <span class="number">4971</span>)
 restricted <span class="subst">\</span>write18 enabled<span class="built_in">.</span>
(<span class="built_in">.</span>/hello<span class="attribute">-luatexja</span><span class="built_in">.</span>tex
LaTeX2e <span class="subst">&lt;</span><span class="number">2014</span>/<span class="number">05</span>/<span class="number">01</span><span class="subst">&gt;</span>
Babel <span class="subst">&lt;</span><span class="number">3.9</span>k<span class="subst">&gt;</span> <span class="literal">and</span> hyphenation patterns for <span class="number">79</span> languages loaded<span class="built_in">.</span>
(/home/norbert/tl/<span class="number">2014</span>/texmf<span class="attribute">-dist</span>/tex/latex/base/article<span class="built_in">.</span>cls
Document Class: article <span class="number">2007</span>/<span class="number">10</span>/<span class="number">19</span> v1<span class="number">.4</span>h Standard LaTeX document class
(/home/norbert/tl/<span class="number">2014</span>/texmf<span class="attribute">-dist</span>/tex/latex/base/size10<span class="built_in">.</span>clo))
(/home/norbert/tl/<span class="number">2014</span>/texmf<span class="attribute">-dist</span>/tex/luatex/luatexja/luatexja<span class="built_in">.</span>sty
<span class="attribute">...</span>
 <span class="number">1923</span> words of node memory still <span class="keyword">in</span> use:
   <span class="number">6</span> hlist, <span class="number">1</span> vlist, <span class="number">3</span> rule, <span class="number">3</span> glue, <span class="number">10</span> kern, <span class="number">1</span> glyph, <span class="number">241</span> attribute, <span class="number">299</span> glue_s
pec, <span class="number">16</span> attribute_list, <span class="number">1</span> write nodes
   avail lists: <span class="number">1</span>:<span class="number">1</span>,<span class="number">2</span>:<span class="number">888</span>,<span class="number">3</span>:<span class="number">5</span>,<span class="number">4</span>:<span class="number">40</span>,<span class="number">5</span>:<span class="number">4</span>,<span class="number">6</span>:<span class="number">25</span>,<span class="number">7</span>:<span class="number">3</span>,<span class="number">9</span>:<span class="number">12</span>
<span class="subst">&lt;&lt;</span>/home/norbert/tl/<span class="number">2014</span>/texmf<span class="attribute">-dist</span>/fonts/type1/<span class="keyword">public</span>/amsfonts/cm/cmr10<span class="built_in">.</span>pfb<span class="subst">&gt;&lt;&lt;</span>/h
ome/norbert/tl/<span class="number">2014</span>/texmf<span class="attribute">-dist</span>/fonts/type1/<span class="keyword">public</span>/amsfonts/cm/cmr7<span class="built_in">.</span>pfb<span class="subst">&gt;</span>
Output written <span class="keyword">on</span> hello<span class="attribute">-luatexja</span><span class="built_in">.</span>pdf (<span class="number">1</span> page, <span class="number">17058</span> <span class="built_in">bytes</span>)<span class="built_in">.</span>
Transcript written <span class="keyword">on</span> hello<span class="attribute">-luatexja</span><span class="built_in">.</span><span class="keyword">log</span><span class="built_in">.</span>
</pre></td></tr></table></figure>



<p>输出结果同样取决于你系统里的默认字体，但和之前的截图应该差不多。</p>
<h2 id=" 总结 ">总结</h2>
<p>文章介绍了在不同 TeX 引擎和宏包下的最简日文示例。如果你能够运行这些示例，那么更复杂的文档你也应该能够运行，你的 TeX 系统完全可以进行日文排版。</p>
<p>不过，仍然还有不少问题需要讨论。比如：字体选择，插图，多语种混排以及非 ASCII 字符的使用。这些我们之后再讨论。</p>
<h2 id=" 译者续 ">译者续</h2>
<p>在 pdfLaTeX 编译的情况下，还有一种排版 CJK 文字的方法。可以使用刘海洋前辈的 <a href="http://www.ctan.org/tex-archive/language/chinese/zhmcjk" target="_blank">zhmCJK</a> 宏包。这个宏包因为一些原因暂时没有收录到 TeX Live 中，不过，这系列文章的作者正好是 TeX Live 的开发者之一，我最近正在和他沟通这件事情。</p>
<p>zhmCJK 宏包提供了类似于 xeCJK 宏包的接口，相应的功能也完全类似。因此可以看做是不能使用 XeLaTeX 而必须使用 pdfLaTeX 的情况下的一个替代。对应于文章中 xeCJK 的例子，最简示例是：</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>zhmCJK<span class="special">}</span>
<span class="command">\setCJKmainfont</span><span class="special">{</span>ipaexm.ttf<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span> で日本語を書きましょう！
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>LaTeX 新手可以将宏包内的文件解压，释放到和你的 <code>.tex</code> 文件同目录下；有经验的 LaTeX 使用者，可以按照宏包文档，将宏包文件放在 TEXMF 中的合适位置，然后刷新 TeX 系统。</p>
<p>另外，正如刘海洋前辈和李清前辈（他们是当前 xeCJK 宏包的维护者）<a href="http://www.zhihu.com/question/26705259" target="_blank">所言</a>，xeCJK 虽然取名如此，但实际上只是对中文的支持比较完善。因此用 xeCJK 来排版日文在细节上还是会有一些问题的，特别是对日文排版规则的处理。此外，原作者提到的 ZXjatype 宏包，实际上是在 xeCJK 基础上再开发的结果。由于 xeCJK 的局限，ZXjatype 也不可避免地会有一些问题。</p>
]]></content>
    <summary type="html"><![CDATA[<blockquote>
<p>本文为译文，原文载于<a href="http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-3-simple-documents/" target="_blank">这里</a>。欢迎关注本系列的文章。</p>
</blockquote>
<p><a href="http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-2-characters-and-encodings/" target="_blank">上一篇文章</a>（<a href="http://liam0205.me/2014/12/08/ptex-intro-and-tutorial-02/">译文</a>）我们探讨了关于字符集和编码的一些细节，今次我们继续讨论如何在 LaTeX 中书写日文。今天的内容需要动手操作试试，要用不同的引擎和宏包写一些 Hello world 类型的文档。</p>
<p><img src="/images/pTeX-intro/nihongo-latex.jpg" alt=""></p>
<p>今天的内容同样会涉及到一些配置 TeX 环境的内容，会讲一讲如何在 <a href="http://tug.org/texlive/" target="_blank">TeX Live</a> 里配置书写日文的环境。</p>
]]></summary>
    
      <category term="pTeX" scheme="http://liam0205.me/tags/pTeX/"/>
    
      <category term="Japanese" scheme="http://liam0205.me/tags/Japanese/"/>
    
      <category term="Demo" scheme="http://liam0205.me/tags/Demo/"/>
    
      <category term="LaTeX" scheme="http://liam0205.me/categories/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[日文 LaTeX 系统介绍 - 字符与编码]]></title>
    <link href="http://liam0205.me/2014/12/08/ptex-intro-and-tutorial-02/"/>
    <id>http://liam0205.me/2014/12/08/ptex-intro-and-tutorial-02/</id>
    <published>2014-12-08T07:36:29.000Z</published>
    <updated>2014-12-09T03:29:41.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>本文为译文，原文载于<a href="http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-2-characters-and-encodings/" target="_blank">这里</a>。欢迎关注本系列的文章。</p>
</blockquote>
<p><a href="http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-1-introduction/" target="_blank">上一篇文章</a>（<a href="http://liam0205.me/2014/12/07/ptex-intro-and-tutorial-01/">译文</a>）简单介绍了在 LaTeX 中排版日文的一些情况，今次我们会探讨一些关于字符和编码的技术细节。</p>
<p><img src="/images/pTeX-intro/nihongo-latex.jpg" alt=""></p>
<a id="more"></a>

<p>这篇文章我们将讨论字符集和编码。在书写欧洲文字的时候，人们就已经需要用到非 ASCII 字符了；诸如日文这样的有成千上万个表义字符的书写系统，其字符数量更是远超 ASCII 所能涵盖的数量。同时我们也会琢磨一下为什么在日文文档里的转义字符为什么不是反斜线（\），而是日本货币标志（￥）。</p>
<p>首先，我并不精于此道。因此，文中讲解的内容十分简单，并且不可避免地会有谬误。如有发现请指出。</p>
<h2 id=" 字符集和编码 ">字符集和编码</h2>
<p>对于 ASCII 来说，这事儿很简单。比如，在计算机中表示「A」这个字母，我们只需要用 65 这个十进制数来表示即可。并且，65 对应的二进制数，也正是字母「A」在计算机中的样子。因此，对于 ASCII 来说，它既是字符集又是编码。</p>
<p>对于非 ASCII 字符来说，这事儿就变得复杂起来了。</p>
<p>对于欧洲的字符来说可能还好。比如常用的 Latin1 字符集中，字符「Ö」的码位是 214。由于一个字节可以表示 256 个不同的值，所以勉强能装下整个 Latin1 字符集。</p>
<p>但是对于成千上万的日文汉字 (Kanji) 来说，这就不行了。首先需要有一个统一的方式将字形 (glyph) 编号，每个字形对应一个 ID (数字)。然后再寻找一个合适的方式去编码这些字形。</p>
<h3 id=" 字符集标准 ">字符集标准</h3>
<ul>
<li><strong>JIS</strong> - 实践中有一些日本工业标准 (<a href="http://en.wikipedia.org/wiki/Japanese_Industrial_Standard" target="_blank">Japanese Industrial Standards</a>)。比如，JIS X 0201 在 ASCII 字符集的基础上，增加了 64 个半宽 (half-width) 的片假名；又比如，<a href="http://en.wikipedia.org/wiki/JIS_X_0208" target="_blank">JIS X 0208</a> 是最常见的汉字字符集，它包含 6879 个字符，其中有 6355 个汉字，另有 524 个其他类型的字符。</li>
<li><strong>UCS</strong> - 通用字符集 (<a href="http://zh.wikipedia.org/wiki/ 通用字符集 " target="_blank">Universal Character Set</a>) 中包含了近十万个抽象字符，它试图将有史以来所有的字符都包含进来。涉及到日语的部分有一些特殊，对应的标准是统一汉码 (<a href="http://en.wikipedia.org/wiki/Han_unification" target="_blank">Han Unification</a>)，这个字符集将中日韩表意相同的形近字统一映射到一个码位上。</li>
</ul>
<h3 id=" 编码 ">编码</h3>
<p>有了字符集标准，接下来需要考虑如何在计算机中用二进制和字节表示这些字符。编码和字符集是两个不同的概念，但因为总是一起提及，所以经常有人混淆。</p>
<p>对于现代计算机和 TeX 来说，有以下一些常见的编码。其中前三个编码了 JIS 字符集；最后一个编码了 Unicode 字符集。</p>
<ul>
<li>SJIS (<a href="http://zh.wikipedia.org/wiki/Shift_JIS" target="_blank">Shift JIS</a>) - SJIS 编码了 JIS X 0201 和 JIS X 0208 两个字符集。它很好地兼容了 ASCII 和 JIS X 0201，这使得它在老的计算机上工作正常；但是它也有一些奇怪的性质，并因此在一些通用解析器上工作不正常。</li>
<li>JIS X 0202 - 通称 JIS 的编码标准，它编码了 JIS X 0208。这个编码在诸如电子邮件的 7-bit 信道上的传输性能良好；老的 Emacs 也将其当做内部编码。</li>
<li>EUC(-JP) Extanded Unix Code - 实际上是符合 ISO 2022 标准的字符集的编码族。这种编码在日本的 Unix-affine 计算机上流行多年。</li>
<li><a href="http://en.wikipedia.org/wiki/UTF-8" target="_blank">UTF-8</a> - 编码了 UCS 字符集，是 <a href="http://en.wikipedia.org/wiki/Unicode" target="_blank">Unicode 标准</a>的一部分，先行与几乎所有现代计算机操作系统上。</li>
</ul>
<p>最后我们来看一个例子。</p>
<pre><code><span class="keyword">Language</span>
Ä á
日本語
ひらがな
</code></pre><p>注意观察他们在不同编码规则情况下对应的十六进制数据。</p>
<p><strong>UTF-8</strong></p>
<p>第一行的「Language」在 UTF-8 编码中对应的十六进制与 ASCII 完全相同，用一个字节表示一个字符；第二行的注音字母则用两个字节来编码，其中 0x20 是单字节的空格；第三行的日文汉字和第四行的平假名都用三个字符来编码。</p>
<pre><code>4c 61 6e 67 75 61 67 65
c3 84 20 c3 a1
e6 97 a5 e6 9c ac e8 aa 9e
e3 81 b2 e3 82 89 e3 81 8c e3 81 aa
</code></pre><p><strong>SJIS</strong></p>
<p>SJIS 编码就有点意思了。首先，第一行保持相同，与 ASCII 兼容。第二行的「Ä」并不在字符集当中，于是 SJIS 把它当做是「”A」，编码成「0x22 0x41」；另一方面，「á」在字符集当中，SJIS 用三个字节将它编码成「0x81 0x4c 0x61」。注意第一行的编码，「0x4c」是字母「L」，「0x61」是字母「a」。它们连在一起与「á」的第二和第三个字节完全相同。这样「La」的编码就出现了歧义，一些解析器就无法正常工作了。</p>
<p>接下来的日文汉字和平假名分别用两个字节来编码。</p>
<pre><code>4c 61 6e 67 75 61 67 65
22 41 20 81 4c 61
93 fa 96 7b 8c ea
82 d0 82 e7 82 aa 82 c8
</code></pre><p><strong>ISO2022-JP</strong></p>
<p>同样由于「Ä」不在字符集当中，ISO2022-JP 把它当做是「”A」来进行编码；但「á」却花了 9 个字节来编码。同时汉字和平假名的编码方式也是不固定的。</p>
<pre><code><span class="number">4</span>c <span class="number">61</span> <span class="number">6</span>e <span class="number">67</span> <span class="number">75</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span>
<span class="number">22</span> <span class="number">41</span> <span class="number">20</span> <span class="number">1</span>b <span class="number">24</span> <span class="number">42</span> <span class="number">21</span> <span class="number">2</span>d <span class="number">1</span>b <span class="number">28</span> <span class="number">42</span> <span class="number">61</span>
<span class="number">1</span>b <span class="number">24</span> <span class="number">42</span> <span class="number">46</span> <span class="number">7</span>c <span class="number">4</span>b <span class="number">5</span>c <span class="number">38</span> <span class="number">6</span>c <span class="number">1</span>b <span class="number">28</span> <span class="number">42</span>
<span class="number">1</span>b <span class="number">24</span> <span class="number">42</span> <span class="number">24</span> <span class="number">52</span> <span class="number">24</span> <span class="number">69</span> <span class="number">24</span> <span class="number">2</span>c <span class="number">24</span> <span class="number">4</span><span class="operator">a</span> <span class="number">1</span>b <span class="number">28</span> <span class="number">42</span>
</code></pre><p><strong>EUC-JP</strong></p>
<p>EUC-JP 编码对应的字符集是 JIS X 0212，比之前的 JIS X 0201 和 JIS X 0208 大得多。这次「Ä」能够正确编码了。两个变音的拉丁字符被分别编码成三个字节；汉字和假名则是两个字节。</p>
<pre><code><span class="number">4</span>c <span class="number">61</span> <span class="number">6</span>e <span class="number">67</span> <span class="number">75</span> <span class="number">61</span> <span class="number">67</span> <span class="number">65</span>
<span class="number">8f</span> aa a3 <span class="number">20</span> <span class="number">8f</span> ab a1
c6 fc cb dc b8 ec
a4 d2 a4 e9 a4 ac a4 ca
</code></pre><p>从这里可以看到，UTF-8 编码汉字和假名需要用到三个字节。因此用 UTF-8 编码来处理文档，得到的文件体积要大上不少。同时，旧有的编码沿用多年，惯性很大。因此 UTF-8 编码在日本用了很多年才得以推广。</p>
<h2 id=" 我的计算机在用什么编码？">我的计算机在用什么编码？</h2>
<p>这取决于你的计算机操作系统。</p>
<ul>
<li>Linux: 大多数情况下，Linux 系统使用 UTF-8 编码。在终端里执行 <code>locale</code> 命令，输出结果中的 <code>LC_CTYPE</code> 字段里可以看到系统语言和使用编码的信息。比如，<code>en_US.utf8</code>。</li>
<li>Mac: 在 OS X 之前，Mac 使用的是苹果公司修改的 SJIS 版本，其名为 MacJapanese。从 OS X 开始，Mac 使用的是 UTF-8。</li>
<li>Windows: 老版本使用 M$ 家修改的 SJIS 版本，其名为 CP932 （代码页 932，简体中文系统则是 CP936)。不过，新版本的 Windows 也有可能使用 UTF-8。</li>
<li>BSD: 据我所知，用的是 UTF-8。</li>
</ul>
<h2 id=" 小结 ">小结</h2>
<p>在 LaTeX 里些日文文档之前，你先要确定你使用的是什么编码。不同的 TeX 引擎对编码支持的情况不同，你应该根据需要选择合适的编码和 TeX 引擎。目前被 TeX 引擎支持最好的编码（译注：原文是字符集）是 UTF-8。新版本的 pTeX 接受 UTF-8 编码；upTeX, XeTeX, LuaTeX 原生支持 UTF-8 编码；使用 BXcjkjatype 时，也应当使用 UTF-8 编码。</p>
<p>不过，不少老版本的文档使用 SJIS 编码。此时你应该使用 pTeX，用 pLaTeX 来编译；或者将他们转换为 UTF-8 编码后使用。</p>
<h2 id=" 关于 _\_ 和 _￥">关于 \ 和 ￥</h2>
<p>以下内容来自维基百科 <a href="http://en.wikipedia.org/wiki/Shift_JIS" target="_blank">ShiftJIS</a> 词条：</p>
<blockquote>
<p>The single-byte characters 0x00 to 0x7F match the ASCII encoding, except for a yen sign (U+00A5) at 0x5C and an overline (U+203E) at 0x7E in place of the ASCII character set’s backslash and tilde respectively.</p>
</blockquote>
<p>也就是说，在 SJIS 中，符号「¥」的编码与 ASCII 里的反斜线「\」的编码相同，都是 0x5C；与此同时，TeX 将 0x5C 当做是转义符。于是，在使用 SJIS 编码的计算机里，TeX 控制序列就都变成了类似 <code>¥hfill</code> 的样子。</p>
<p>下一篇文章，我们将正式开始编写 LaTeX 代码！</p>
<h2 id=" 译者续 ">译者续</h2>
<p>SJIS 在日本的地位和 GBK 在中国的地位差不多。在早期的 Windows 系统里，使用的 CP936 与 GBK 几乎相同。同时，中文 LaTeX 早期的支持方式也都是基于 GBK 编码的。</p>
<p>为了避免不必要的麻烦，我们的口号是：「<strong>珍爱生命，远离 GBK</strong>」。</p>
]]></content>
    <summary type="html"><![CDATA[<blockquote>
<p>本文为译文，原文载于<a href="http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-2-characters-and-encodings/" target="_blank">这里</a>。欢迎关注本系列的文章。</p>
</blockquote>
<p><a href="http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-1-introduction/" target="_blank">上一篇文章</a>（<a href="http://liam0205.me/2014/12/07/ptex-intro-and-tutorial-01/">译文</a>）简单介绍了在 LaTeX 中排版日文的一些情况，今次我们会探讨一些关于字符和编码的技术细节。</p>
<p><img src="/images/pTeX-intro/nihongo-latex.jpg" alt=""></p>
]]></summary>
    
      <category term="pTeX" scheme="http://liam0205.me/tags/pTeX/"/>
    
      <category term="Encoding" scheme="http://liam0205.me/tags/Encoding/"/>
    
      <category term="LaTeX" scheme="http://liam0205.me/categories/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[日文 LaTeX 系统介绍 - 简介]]></title>
    <link href="http://liam0205.me/2014/12/07/ptex-intro-and-tutorial-01/"/>
    <id>http://liam0205.me/2014/12/07/ptex-intro-and-tutorial-01/</id>
    <published>2014-12-07T12:29:35.000Z</published>
    <updated>2014-12-07T14:29:59.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>本文为译文，原文载于<a href="http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-1-introduction/" target="_blank">这里</a>。尽请关注本系列的文章。</p>
</blockquote>
<p>对于日本人来说，在 LaTeX 里面写日文很简单。但是由于文档的缺乏，外国人（相对日本）想要这样做就不容易了。更何况日语里面会混合罗马字母、假名、汉字。</p>
<p>这里我想总结一下我自己写日文 LaTeX 文档的经验。这些经验一方面来自我自己的实践，另一方面来自我的日本朋友的各种帮助。系列文章的第一部分简介了日文排版的一些情况，特别是关于 TeX 的介绍。在这里，我会对用于排版日文的 TeX 引擎和宏包做一个简单的比较。</p>
<a id="more"></a>

<h2 id=" 日文书写系统 ">日文书写系统</h2>
<p>日文中至少有四种书写系统：</p>
<ul>
<li>罗马字母</li>
<li>平假名：平假名共有 45 个，一般来说用于连接汉字。</li>
<li>片假名：片假名和平假名一一对应，一般用来音译外文。</li>
<li>日文汉字：来自中文的表意文字，书面语里有很多汉字。</li>
</ul>
<p>通常来说，日文文章里这四种书写系统会混杂在一起。下面的截图来自日文<a href="http://ja.wikipedia.org/wiki/ メインページ " target="_blank">维基百科</a>的「<a href="http://ja.wikipedia.org/wiki/ 日本 " target="_blank">日本</a>」词条。</p>
<p><img src="/images/pTeX-intro/Japanese-Text-Example.png" alt=" 截图：日文维基百科的「日本」词条 "></p>
<p>日文书写系统的的规则繁复。Haruhiko Okumura (奥村 晴彦) 先生对此有过一个不错的<a href="http://ajt.ktug.org/2008/0201okumura.pdf" target="_blank">介绍</a>；如果你想了解详细的规则，可以看<a href="http://www.w3.org/TR/jlreq/" target="_blank">这里</a>。TeX 本身并没有支持这些规则，于是 1987 年 NTT 的 Yasuki Saito (斉藤 康己) 先生编写了 NTT jTeX 这个引擎；1990 年，<a href="http://asciimw.jp/" target="_blank">ASCII 公司</a> 的 Shunji Ohno (大野 俊治) 先生和 Ryoichi Kurasawa (倉沢 良一) 先生修改了 NTT jTeX，增加了出版业所必须的竖排功能，命名为 pTeX (publishing TeX)。对此，Okumura 先生的文章里有详细的叙述。</p>
<h2 id=" 日文排版 ">日文排版</h2>
<p>日本自己开发了 pTeX，但这些年也有其他的一些 TeX 引擎可以用来排版日文。据我所知，有以下一些。</p>
<ul>
<li>e(p)(la)tex: 从原始的 pTeX 而来，增加了 e-TeX 的补丁以适应现代 LaTeX 的需要</li>
<li>up(la)tex: 同样从原始的 pTeX 发展而来，增加了 e-TeX 的补丁并增加了 UTF-8 编码支持</li>
<li>xe(la)tex: 另一个系统，同样支持 UTF-8 编码以及其他一些先进的技术</li>
<li>pdf(la)tex with CJK package: 支持中日韩文字，但已过时</li>
<li>pdf(la)tex with bxcjkjatype package: 一个易用的新宏包，有一些功能上的限制</li>
<li>lua(la)tex with luatex-ja package: 最新的日文支持方式，提供了不少优秀的特性</li>
</ul>
<h2 id=" 需求 ">需求</h2>
<p>在 LaTeX 里书写日文有以下需求。</p>
<ul>
<li>e-TeX 原语：e-TeX 是原始 TeX 的扩展，后逐渐成为主流，现在它的原语成为 LaTeX 强制要求的一部分</li>
<li>日文排版禁则：如前所述</li>
<li>竖排：许多非技术文本都会用到竖排</li>
<li>UTF-8 支持：pTeX 使用的编码不大好，有不少问题，现代计算机大都使用 UTF-8 编码</li>
<li>能够使用商业字体：在文章里能够自由切换字体</li>
<li>插图支持</li>
</ul>
<p>在这里，pTeX 不支持 e-TeX、UTF-8 编码，插图功能孱弱；e-pTeX 完善了 e-TeX 支持，但仍不支持 UTF-8 编码且插图功能依旧孱弱；upTeX 又克服了 UTF-8 编码支持的问题；XeTeX 对竖排的支持能力有限；pdfTeX + CJK 对日文禁则处理不好，也不支持竖排；pdfTeX + bxcjkjatype 对日文禁则处理不好，不支持竖排，也无法比较好地处理商业字体；LuaTeX + LuaTeX-ja 对竖排的支持不甚良好。</p>
<h2 id="（至今为止的）结论 ">（至今为止的）结论</h2>
<p>最近我都在使用 LuaTeX-ja，以下是<strong>我</strong>对此的一些总结。</p>
<ul>
<li>(u)ptex: 如果你想要竖排功能，这是唯一的选择；此外，由于 pTeX 系源自日本，它对日文排版禁则的支持最好</li>
<li>xe(la)tex: 目前功能相对完善的宏包是 <code>xeCJK</code>，但其实只是对中文支持良好；日本有同好对此做了扩展，效果一般</li>
<li>pdf(la)tex + CJK: 过时了，不推荐</li>
<li>pdf(la)tex + bxcjkjatype: 很好用，但是有一个很重要缺点：所有非 ASCII 字符都被当做汉字对待</li>
<li>luatexja: 最打动我的宏包，强烈推荐。</li>
</ul>
<p>下一篇文章里我会介绍一下各种方式底下的最简日文示例。</p>
<p>谢谢！</p>
<h2 id=" 译者续 ">译者续</h2>
<p>马起园 (Clerk Ma) 的 pTeX-ng 是下一代的 pTeX。pTeX-ng 从 Y&amp;Y TeX 发展而来，是纯 C 编写的 TeX 引擎。它带有 e-TeX, pTeX 的补丁，并原生支持 Unicode 编码，对字体支持良好，并且能够直接输出 PDF 文档。pTeX-ng 的前景十分喜人。</p>
]]></content>
    <summary type="html"><![CDATA[<blockquote>
<p>本文为译文，原文载于<a href="http://www.preining.info/blog/2014/12/writing-japanese-in-latex-part-1-introduction/" target="_blank">这里</a>。尽请关注本系列的文章。</p>
</blockquote>
<p>对于日本人来说，在 LaTeX 里面写日文很简单。但是由于文档的缺乏，外国人（相对日本）想要这样做就不容易了。更何况日语里面会混合罗马字母、假名、汉字。</p>
<p>这里我想总结一下我自己写日文 LaTeX 文档的经验。这些经验一方面来自我自己的实践，另一方面来自我的日本朋友的各种帮助。系列文章的第一部分简介了日文排版的一些情况，特别是关于 TeX 的介绍。在这里，我会对用于排版日文的 TeX 引擎和宏包做一个简单的比较。</p>
]]></summary>
    
      <category term="pTeX" scheme="http://liam0205.me/tags/pTeX/"/>
    
      <category term="LaTeX" scheme="http://liam0205.me/categories/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[在 LaTeX 里定义一个类似 proof 的环境]]></title>
    <link href="http://liam0205.me/2014/12/03/how-to-define-a-proof-like-environment/"/>
    <id>http://liam0205.me/2014/12/03/how-to-define-a-proof-like-environment/</id>
    <published>2014-12-03T06:12:57.000Z</published>
    <updated>2014-12-03T06:44:12.000Z</updated>
    <content type="html"><![CDATA[<p>美国数学协会（AMS）是 TeX 发展中的一支重要的力量。AMS 定义的 <code>proof</code> 环境非常好用，能在证明结束的末尾，自动添加一个「证毕」的符号。</p>
<p>有时我们需要类似的环境，比如<a href="http://bbs.ctex.org/forum.php?mod=viewthread&amp;tid=79516" target="_blank">这里</a>的题主希望用两个环境区分「证明」和「解答」，并且都需要自动添加结束符号。这时我们可以仿照 <code>amsthm</code> 宏包的做法，自己定义一套环境。</p>
<a id="more"></a>

<p><code>proof</code> 环境的原始定义是这样的：</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="command">\newenvironment</span><span class="special">{</span>proof<span class="special">}</span><span class="special">[</span>1<span class="special">]</span><span class="special">[</span><span class="command">\proofname</span><span class="special">]</span><span class="special">{</span><span class="command">\par</span>
  <span class="command">\pushQED</span><span class="special">{</span><span class="command">\qed</span><span class="special">}</span><span class="comment">%</span>
  <span class="command">\normalfont</span> <span class="command">\topsep</span>6<span class="command">\p</span>@<span class="command">\@</span>plus6<span class="command">\p</span>@<span class="command">\relax</span>
  <span class="command">\trivlist</span>
  <span class="command">\item</span><span class="special">[</span><span class="command">\hskip</span><span class="command">\labelsep</span>
        <span class="command">\itshape</span>
    <span class="special">#</span>1<span class="command">\@</span>addpunct<span class="special">{</span>.<span class="special">}</span><span class="special">]</span><span class="command">\ignorespaces</span>
<span class="special">}</span><span class="special">{</span><span class="command">\popQED</span><span class="command">\endtrivlist</span><span class="command">\@</span>endpefalse<span class="special">}</span>
</pre></td></tr></table></figure>



<p>这里 <code>\pushQED{\qed}</code> 把 <code>\qed</code> 压入了 QED 这个堆栈，然后在环境结束的地方，通过 <code>\popQED</code> 把压入堆栈的最后一个元素弹出来。这样的设计是非常合理的。比如，如果在证明的过程中，需要分别证明两个小的情形，这样就能按照次序依次给出证明的结束符号。此外，证明开始的标题通过 <code>\proofname</code> 来控制。</p>
<p>通过这些分析，我们知道定义一个新的环境，我们需要从两个方面入手。其一是 <code>\proofname</code> 的位置需要改变，其二是压入堆栈的内容需要更改。</p>
<p>下面的代码我们定义了一个名为 <code>\fooname</code> 的宏，来替代 <code>\proofname</code>。</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="command">\providecommand</span><span class="special">{</span><span class="command">\fooname</span><span class="special">}</span><span class="special">{</span>Foo<span class="special">}</span>
</pre></td></tr></table></figure>



<p>下面的代码我们定义了名为 <code>\bxz</code> 的宏，来替换原本压入堆栈的 <code>\qed</code>。其中 <code>\bxz</code> 具体的符号内容用 <code>\bxzsymbol</code> 这个宏来控制。</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="command">\DeclareRobustCommand</span><span class="special">{</span><span class="command">\bxz</span><span class="special">}</span><span class="special">{</span><span class="command">\ifmmode</span> <span class="command">\mathbxz</span>
  <span class="command">\else</span>
    <span class="command">\leavevmode</span><span class="command">\unskip</span><span class="command">\penalty</span>9999 <span class="command">\hbox</span><span class="special">{</span><span class="special">}</span><span class="command">\nobreak</span><span class="command">\hfill</span>
    <span class="command">\quad</span><span class="command">\hbox</span><span class="special">{</span><span class="command">\bxzsymbol</span><span class="special">}</span><span class="comment">%</span>
  <span class="command">\fi</span>
<span class="special">}</span>
<span class="command">\newcommand</span><span class="special">{</span><span class="command">\mathbxz</span><span class="special">}</span><span class="special">{</span><span class="command">\quad</span><span class="command">\hbox</span><span class="special">{</span><span class="command">\bxzsymbol</span><span class="special">}</span><span class="special">}</span>
<span class="command">\providecommand</span><span class="special">{</span><span class="command">\bxzsymbol</span><span class="special">}</span><span class="special">{</span><span class="command">\fbox</span><span class="special">{</span><span class="command">\footnotesize</span> B.X.Z<span class="special">}</span><span class="special">}</span>
</pre></td></tr></table></figure>



<p>最后，重新定义一个名为 <code>foo</code> 的环境。</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="command">\newenvironment</span><span class="special">{</span>foo<span class="special">}</span><span class="special">[</span>1<span class="special">]</span><span class="special">[</span><span class="command">\fooname</span><span class="special">]</span><span class="special">{</span><span class="command">\par</span>
  <span class="command">\pushQED</span><span class="special">{</span><span class="command">\bxz</span><span class="special">}</span><span class="comment">%</span>
  <span class="command">\normalfont</span> <span class="command">\topsep</span>6<span class="command">\p</span>@<span class="command">\@</span>plus6<span class="command">\p</span>@<span class="command">\relax</span>
  <span class="command">\trivlist</span>
  <span class="command">\item</span><span class="special">[</span><span class="command">\hskip</span><span class="command">\labelsep</span>
        <span class="command">\itshape</span>
    <span class="special">#</span>1<span class="command">\@</span>addpunct<span class="special">{</span>.<span class="special">}</span><span class="special">]</span><span class="command">\ignorespaces</span>
<span class="special">}</span><span class="special">{</span><span class="command">\popQED</span><span class="command">\endtrivlist</span><span class="command">\@</span>endpefalse<span class="special">}</span>
</pre></td></tr></table></figure>



<p>完整的测试代码如下：</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>amsthm<span class="special">}</span>
<span class="command">\makeatletter</span>
<span class="command">\DeclareRobustCommand</span><span class="special">{</span><span class="command">\bxz</span><span class="special">}</span><span class="special">{</span><span class="command">\ifmmode</span> <span class="command">\mathbxz</span>
  <span class="command">\else</span>
    <span class="command">\leavevmode</span><span class="command">\unskip</span><span class="command">\penalty</span>9999 <span class="command">\hbox</span><span class="special">{</span><span class="special">}</span><span class="command">\nobreak</span><span class="command">\hfill</span>
    <span class="command">\quad</span><span class="command">\hbox</span><span class="special">{</span><span class="command">\bxzsymbol</span><span class="special">}</span><span class="comment">%</span>
  <span class="command">\fi</span>
<span class="special">}</span>
<span class="command">\newcommand</span><span class="special">{</span><span class="command">\mathbxz</span><span class="special">}</span><span class="special">{</span><span class="command">\quad</span><span class="command">\hbox</span><span class="special">{</span><span class="command">\bxzsymbol</span><span class="special">}</span><span class="special">}</span>
<span class="command">\newenvironment</span><span class="special">{</span>foo<span class="special">}</span><span class="special">[</span>1<span class="special">]</span><span class="special">[</span><span class="command">\fooname</span><span class="special">]</span><span class="special">{</span><span class="command">\par</span>
  <span class="command">\pushQED</span><span class="special">{</span><span class="command">\bxz</span><span class="special">}</span><span class="comment">%</span>
  <span class="command">\normalfont</span> <span class="command">\topsep</span>6<span class="command">\p</span>@<span class="command">\@</span>plus6<span class="command">\p</span>@<span class="command">\relax</span>
  <span class="command">\trivlist</span>
  <span class="command">\item</span><span class="special">[</span><span class="command">\hskip</span><span class="command">\labelsep</span>
        <span class="command">\itshape</span>
    <span class="special">#</span>1<span class="command">\@</span>addpunct<span class="special">{</span>.<span class="special">}</span><span class="special">]</span><span class="command">\ignorespaces</span>
<span class="special">}</span><span class="special">{</span><span class="command">\popQED</span><span class="command">\endtrivlist</span><span class="command">\@</span>endpefalse<span class="special">}</span>
<span class="command">\providecommand</span><span class="special">{</span><span class="command">\bxzsymbol</span><span class="special">}</span><span class="special">{</span><span class="command">\fbox</span><span class="special">{</span><span class="command">\footnotesize</span> B.X.Z<span class="special">}</span><span class="special">}</span>
<span class="command">\providecommand</span><span class="special">{</span><span class="command">\fooname</span><span class="special">}</span><span class="special">{</span>Foo<span class="special">}</span>
<span class="command">\makeatother</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>proof<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>foo<span class="special">}</span>
  The foo goes here.
<span class="command">\end</span><span class="special">{</span>foo<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>foo<span class="special">}</span>
  <span class="command">\[</span>
    E = mc^<span class="special">{</span>2<span class="special">}</span>.<span class="command">\qedhere</span>
  <span class="command">\]</span>
<span class="command">\end</span><span class="special">{</span>foo<span class="special">}</span>
This is the conclusion that we need.
<span class="command">\end</span><span class="special">{</span>proof<span class="special">}</span>
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p><img src="/images/LaTeX/redefine-proof.png" alt=" 测试代码截图 "></p>
]]></content>
    <summary type="html"><![CDATA[<p>美国数学协会（AMS）是 TeX 发展中的一支重要的力量。AMS 定义的 <code>proof</code> 环境非常好用，能在证明结束的末尾，自动添加一个「证毕」的符号。</p>
<p>有时我们需要类似的环境，比如<a href="http://bbs.ctex.org/forum.php?mod=viewthread&amp;tid=79516" target="_blank">这里</a>的题主希望用两个环境区分「证明」和「解答」，并且都需要自动添加结束符号。这时我们可以仿照 <code>amsthm</code> 宏包的做法，自己定义一套环境。</p>
]]></summary>
    
      <category term="Proof" scheme="http://liam0205.me/tags/Proof/"/>
    
      <category term="Environment" scheme="http://liam0205.me/tags/Environment/"/>
    
      <category term="Macros" scheme="http://liam0205.me/tags/Macros/"/>
    
      <category term="AMS" scheme="http://liam0205.me/tags/AMS/"/>
    
      <category term="LaTeX" scheme="http://liam0205.me/categories/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[在 LaTeX 中使用含有中文的 PDF 书签避免乱码的正确姿势]]></title>
    <link href="http://liam0205.me/2014/11/22/latex-pdf-cjk-bookmarks/"/>
    <id>http://liam0205.me/2014/11/22/latex-pdf-cjk-bookmarks/</id>
    <published>2014-11-22T08:57:54.000Z</published>
    <updated>2014-12-03T15:33:41.000Z</updated>
    <content type="html"><![CDATA[<p>LaTeX 的 <code>hyperref</code> 宏包能够在 PDF 文件里生成 PDF 书签，然而「书签乱码」是困扰很多 LaTeX 使用者的麻烦问题。</p>
<p>早年李树钧和张林波老师共同开发了名为 <a href="http://www.hooklee.com/tex/gbk2uni.zip" target="_blank">gbk2uni</a> 的小工具，用以将 <code>filename.out</code> 中的 GBK 编码的字符转换成八进制数据；刘海洋和李清在 <a href="https://code.google.com/p/ctex-kit/" target="_blank"><code>ctex</code></a> 宏包 / 文档类对此做了处理，使得 <code>ctex</code> 宏包 / 文档类能够正确处理大部分的情况；后来李清编写了 <a href="http://www.ctan.org/pkg/xcjk2uni" target="_blank"><code>xCJK2uni</code></a> 宏包，使得在 pdfLaTeX 编译方式下用 <code>CJK</code> 的 GBK 编码模式也能正确输出 PDF 书签，而不必借用额外的工具。</p>
<p>这里对全部正确的方式做一个总结。</p>
<a id="more"></a>

<h2 id=" 推荐的方式 ">推荐的方式</h2>
<p>最好的办法是将中文支持和版式处理都交给 <code>ctex</code> 宏包 / 文档类，只需要开启 <code>hyperref</code> 选项即可。</p>
<p>适用情况</p>
<ul>
<li>UTF-8 + XeLaTeX（目前<strong>最最最最最最最最</strong>推荐的方式，看到它请星星眼）</li>
<li>UTF-8 + pdfLaTeX</li>
<li>UTF-8 + LaTeX - DVIPDFMx</li>
</ul>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">[</span>hyperref, UTF8<span class="special">]</span><span class="special">{</span>ctexart<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\section</span><span class="special">{</span>中文书签不会乱码<span class="special">}</span>
UTF-8 编码，Xe<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span>/pdf<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span>/<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span> - DVIPDFMx 编译。
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>





<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">[</span>hyperref, UTF8<span class="special">]</span><span class="special">{</span>ctex<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\section</span><span class="special">{</span>中文书签不会乱码<span class="special">}</span>
UTF-8 编码，Xe<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span>/pdf<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span>/<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span> - DVIPDFMx 编译。
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>适用情况（除非必要，不要使用 GBK 编码）</p>
<ul>
<li>GBK + LaTeX - DVIPDFMx</li>
<li>GBK + pdfLaTeX （ctex 宏包 2.x 版本支持，当前的 1.x 版本暂不支持）</li>
</ul>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">[</span>hyperref, GBK<span class="special">]</span><span class="special">{</span>ctexart<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\section</span><span class="special">{</span>中文书签不会乱码<span class="special">}</span>
GBK 编码，pdf<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span>/<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span> - DVIPDFMx 编译。
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>





<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">[</span>hyperref, GBK<span class="special">]</span><span class="special">{</span>ctex<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\section</span><span class="special">{</span>中文书签不会乱码<span class="special">}</span>
GBK 编码，pdf<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span>/<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span> - DVIPDFMx 编译。
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<h2 id=" 折腾星人的方式 ">折腾星人的方式</h2>
<p>如果不想使用 <code>ctex</code> 宏包 / 文档类，也可以选择自己写代码进行中文支持。这时候需要做额外的代码配置，保证 PDF 书签不会乱码。</p>
<p>适用情况</p>
<ul>
<li>UTF-8 + XeLaTeX</li>
</ul>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>xeCJK<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>hyperref<span class="special">}</span>
<span class="command">\setCJKmainfont</span><span class="special">{</span>SimSun<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\section</span><span class="special">{</span>中文书签不会乱码<span class="special">}</span>
UTF-8 编码，Xe<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span> 编译。
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>适用情况</p>
<ul>
<li>UTF-8 + pdfLaTeX</li>
</ul>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>CJKutf8<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>hyperref<span class="special">}</span>
<span class="command">\hypersetup</span><span class="special">{</span>unicode<span class="special">}</span>
<span class="command">\AtBeginShipoutFirst</span><span class="special">{</span><span class="command">\input</span><span class="special">{</span>zhwinfonts.tex<span class="special">}</span><span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>CJK*<span class="special">}</span><span class="special">{</span>UTF8<span class="special">}</span><span class="special">{</span>song<span class="special">}</span>
<span class="command">\section</span><span class="special">{</span>中文书签不会乱码<span class="special">}</span>
UTF-8<span class="special">~</span>编码，pdf<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span><span class="special">~</span>编译。
<span class="command">\clearpage</span>
<span class="command">\end</span><span class="special">{</span>CJK*<span class="special">}</span>
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>适用情况</p>
<ul>
<li>UTF-8 + LaTeX - DVIPDFMx</li>
</ul>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>CJKutf8<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">[</span>dvipdfmx<span class="special">]</span><span class="special">{</span>hyperref<span class="special">}</span>
<span class="command">\hypersetup</span><span class="special">{</span>unicode<span class="special">}</span>
<span class="command">\AtBeginShipoutFirst</span><span class="special">{</span><span class="command">\input</span><span class="special">{</span>zhwinfonts.tex<span class="special">}</span><span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>CJK*<span class="special">}</span><span class="special">{</span>UTF8<span class="special">}</span><span class="special">{</span>song<span class="special">}</span>
<span class="command">\section</span><span class="special">{</span>中文书签不会乱码<span class="special">}</span>
UTF-8<span class="special">~</span>编码，<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span> - DVIPDFMx<span class="special">~</span>编译。
<span class="command">\clearpage</span>
<span class="command">\end</span><span class="special">{</span>CJK*<span class="special">}</span>
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>适用情况</p>
<ul>
<li>GBK + pdfLaTeX （谁特么还在用 GBK 啊！摔！）</li>
</ul>
<p>请大家将感谢信发送至 <a href="http://www.zhihu.com/people/qinglee" target="_blank">李清</a> 的邮箱~</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>CJK<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>xCJK2uni<span class="special">}</span> <span class="comment">% 请大家将感谢信发送至 李清 的邮箱~ : )</span>
<span class="command">\usepackage</span><span class="special">{</span>hyperref<span class="special">}</span>
<span class="command">\AtBeginShipoutFirst</span><span class="special">{</span><span class="command">\input</span><span class="special">{</span>zhwinfonts.tex<span class="special">}</span><span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>CJK*<span class="special">}</span><span class="special">{</span>GBK<span class="special">}</span><span class="special">{</span>song<span class="special">}</span>
<span class="command">\section</span><span class="special">{</span>中文书签不会乱码<span class="special">}</span>
GBK<span class="special">~</span>编码，pdf<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span><span class="special">~</span>编译。
<span class="command">\clearpage</span>
<span class="command">\end</span><span class="special">{</span>CJK*<span class="special">}</span>
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>



<p>适用情况</p>
<ul>
<li>GBK + LaTeX - DVIPDFMx（谁特么还在用 GBK 啊！摔！）</li>
</ul>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="command">\documentclass</span><span class="special">{</span>article<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">{</span>CJK<span class="special">}</span>
<span class="command">\usepackage</span><span class="special">[</span>dvipdfmx<span class="special">]</span><span class="special">{</span>hyperref<span class="special">}</span>
<span class="command">\hypersetup</span><span class="special">{</span>CJKbookmarks<span class="special">}</span>
<span class="command">\AtBeginShipoutFirst</span><span class="special">{</span><span class="command">\input</span><span class="special">{</span>zhwinfonts.tex<span class="special">}</span><span class="special">}</span>
<span class="command">\AtBeginShipoutFirst</span><span class="special">{</span><span class="command">\special</span><span class="special">{</span>pdf:tounicode GBK-EUC-UCS2<span class="special">}</span><span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>CJK*<span class="special">}</span><span class="special">{</span>GBK<span class="special">}</span><span class="special">{</span>song<span class="special">}</span>
<span class="command">\section</span><span class="special">{</span>中文书签不会乱码<span class="special">}</span>
GBK<span class="special">~</span>编码，<span class="command">\LaTeX</span><span class="special">{</span><span class="special">}</span> - DVIPDFMx<span class="special">~</span>编译。
<span class="command">\clearpage</span>
<span class="command">\end</span><span class="special">{</span>CJK*<span class="special">}</span>
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</pre></td></tr></table></figure>






]]></content>
    <summary type="html"><![CDATA[<p>LaTeX 的 <code>hyperref</code> 宏包能够在 PDF 文件里生成 PDF 书签，然而「书签乱码」是困扰很多 LaTeX 使用者的麻烦问题。</p>
<p>早年李树钧和张林波老师共同开发了名为 <a href="http://www.hooklee.com/tex/gbk2uni.zip" target="_blank">gbk2uni</a> 的小工具，用以将 <code>filename.out</code> 中的 GBK 编码的字符转换成八进制数据；刘海洋和李清在 <a href="https://code.google.com/p/ctex-kit/" target="_blank"><code>ctex</code></a> 宏包 / 文档类对此做了处理，使得 <code>ctex</code> 宏包 / 文档类能够正确处理大部分的情况；后来李清编写了 <a href="http://www.ctan.org/pkg/xcjk2uni" target="_blank"><code>xCJK2uni</code></a> 宏包，使得在 pdfLaTeX 编译方式下用 <code>CJK</code> 的 GBK 编码模式也能正确输出 PDF 书签，而不必借用额外的工具。</p>
<p>这里对全部正确的方式做一个总结。</p>
]]></summary>
    
      <category term="PDF" scheme="http://liam0205.me/tags/PDF/"/>
    
      <category term="Bookmarks" scheme="http://liam0205.me/tags/Bookmarks/"/>
    
      <category term="CJK" scheme="http://liam0205.me/tags/CJK/"/>
    
      <category term="Error Codes" scheme="http://liam0205.me/tags/Error%20Codes/"/>
    
      <category term="LaTeX" scheme="http://liam0205.me/categories/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[为 MacTeX 配置中文支持]]></title>
    <link href="http://liam0205.me/2014/11/02/latex-mactex-chinese-support/"/>
    <id>http://liam0205.me/2014/11/02/latex-mactex-chinese-support/</id>
    <published>2014-11-02T10:07:28.000Z</published>
    <updated>2015-01-26T07:41:12.000Z</updated>
    <content type="html"><![CDATA[<p>最近有人问到如何在 MacTeX 里配置中文支持，这里一并回答。</p>
<p>目前来说，结合 <code>xeCJK</code> 宏包使用 XeLaTeX 编译，应该是最方便的方式了。</p>
<p>XeLaTeX 要求 <code>.tex</code> 文档保存为 UTF-8 编码。所以要做的事情只有两件：</p>
<ul>
<li>配置一个 UTF-8 的编辑环境；</li>
<li>用 <code>xeCJK</code> 的语法选择合适的字体。</li>
</ul>
<a id="more"></a>

<h2 id=" 配置 _UTF-8_ 的编辑环境 ">配置 UTF-8 的编辑环境</h2>
<p>MacTeX 自带了名为 TeXshop 的编辑器，这里以它为例配置 UTF-8 的编辑环境。其他编辑器也有类似配置。</p>
<p>打开 TeXshop，按下 <code>cmd + ,</code> 打开偏好设置。在「源代码」标签下找到编码设置，调整为 UTF-8。然后单击「好」保存即可。</p>
<p><img src="/attachment/images/MacTeX_xeCJK/01.png" alt=" 调整 TeXshop 的编码 "></p>
<h2 id=" 查找字体信息 ">查找字体信息</h2>
<p>XeTeX 在 Mac OS X 下的行为和 Windows/Linux 下不大一样。Mac 底下，XeTeX 并不使用 <code>fontconfig</code> 库来搜索字体，所以我们没法在终端里通过 <code>fc-list</code> 命令来查看可用的字体列表。不过 Mac 里提供了名为「字体册」的程序，来列出系统中所有可用的字体信息。</p>
<p>其实这样的设计挺讨厌的，TeX Live 自带了许多开源字体，因此没有办法很好地使用。必须用字体名而不是字族名来调用这些字体，实在是不太方便。当然，如果有需要，我们可以把 TeX 里自带的这些开源字体用硬链接的方式，添加到 Mac 的字体目录下。</p>
<p>打开字体册程序，找到需要的字体信息：</p>
<p><img src="/attachment/images/MacTeX_xeCJK/02.png" alt=" 在字体册中查找字体信息 "></p>
<p>这里的 PostScript 名称就是我们需要的信息，我们记下华文宋体的名字：「STSong」。你还可以按需找到其他字体的名字，比如华文中宋、华文楷体、华文黑体等字体的名字。</p>
<h2 id=" 用 _xeCJK_ 的语法配置字体 ">用 xeCJK 的语法配置字体</h2>
<p>使用下列代码，配置中文字体。</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="command">\usepackage</span><span class="special">{</span>xeCJK<span class="special">}</span>
<span class="command">\setCJKmainfont</span><span class="special">[</span>BoldFont=STZhongsong, ItalicFont=STKaiti<span class="special">]</span><span class="special">{</span>STSong<span class="special">}</span>
<span class="command">\setCJKsansfont</span><span class="special">[</span>BoldFont=STHeiti<span class="special">]</span><span class="special">{</span>STXihei<span class="special">}</span>
<span class="command">\setCJKmonofont</span><span class="special">{</span>STFangsong<span class="special">}</span>
</pre></td></tr></table></figure>



<p>这里，</p>
<ul>
<li>文档中文主字体是华文宋体，对应的 bfseries 字体是华文中宋，对应的 itshape 字体是华文楷体；</li>
<li>文档的「无衬线」中文字体是华文新黑，对应的 bfseries 是华文黑体；</li>
<li>文档的「等宽」中文字体是华文仿宋。</li>
</ul>
<p>完整代码的编译效果截图如下：</p>
<p><img src="/attachment/images/MacTeX_xeCJK/03.png" alt=" 编译效果 "></p>
<h2 id=" 额外的工作 ">额外的工作</h2>
<p>尽管这一节的操作有些复杂，而且对于中文支持来说是可选的，但是依旧推荐按步骤操作。</p>
<p><code>xeCJK</code> 之解决了中文支持问题，以及一些关于标点的处理，并没有提供和中文版式相关的解决方案。<code>ctex</code> 宏包和文档类封装了 xeCJK，同时提供了中文版式的相关支持。不过 <code>ctex</code> 的默认配置是为 Windows 平台配置的，Mac 用户需要对默认配置做一些修改。具体如下。</p>
<p>打开终端，键入命令：</p>
<figure class="highlight shell"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="built_in">cd</span> /usr/local/texlive/texmf-local/tex/latex/
<span class="built_in">sudo</span> mkdir ./ctex/
<span class="built_in">sudo</span> mkdir ./ctex/cfg/
<span class="built_in">cd</span> ./ctex/cfg/
<span class="built_in">sudo</span> vim ctexopts.cfg
</pre></td></tr></table></figure>



<p>复制以下内容：</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="command">\ExecuteOptions</span><span class="special">{</span>UTF8<span class="special">}</span>
<span class="command">\ExecuteOptions</span><span class="special">{</span>nofonts<span class="special">}</span>

<span class="command">\endinput</span>
</pre></td></tr></table></figure>



<p>切换回到终端窗口，按 <code>i</code> 进入编辑模式，按 <code>cmd + v</code> 粘贴，按 <code>esc</code> 退出编辑模式，输入 <code>:x</code> 保存退出（半角冒号紧接着 x）。<br>在终端窗口继续操作，键入命令：</p>
<figure class="highlight shell"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="built_in">sudo</span> vim ctex.cfg
</pre></td></tr></table></figure>



<p>复制以下内容：</p>
<figure class="highlight tex"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="command">\RequirePackage</span><span class="special">{</span>ifxetex<span class="special">}</span>
<span class="command">\ifxetex</span>
  <span class="command">\setCJKmainfont</span><span class="special">[</span>BoldFont=STZhongsong, ItalicFont=STKaiti<span class="special">]</span><span class="special">{</span>STSong<span class="special">}</span>
  <span class="command">\setCJKsansfont</span><span class="special">[</span>BoldFont=STHeiti<span class="special">]</span><span class="special">{</span>STXihei<span class="special">}</span>
  <span class="command">\setCJKmonofont</span><span class="special">{</span>STFangsong<span class="special">}</span>

  <span class="command">\newCJKfontfamily</span><span class="special">[</span>stsong<span class="special">]</span><span class="command">\songti</span><span class="special">[</span>BoldFont=STZhongsong, ItalicFont=STKaiti<span class="special">]</span><span class="special">{</span>STSong<span class="special">}</span>
  <span class="command">\newCJKfontfamily</span><span class="special">[</span>sthei<span class="special">]</span><span class="command">\heiti</span><span class="special">[</span>BoldFont=STHeiti<span class="special">]</span><span class="special">{</span>STXihei<span class="special">}</span>
  <span class="command">\newCJKfontfamily</span><span class="special">[</span>stkai<span class="special">]</span><span class="command">\kaishu</span><span class="special">{</span>STKaiti<span class="special">}</span>
  <span class="command">\newCJKfontfamily</span><span class="special">[</span>stfang<span class="special">]</span><span class="command">\fangsong</span><span class="special">{</span>STFangsong<span class="special">}</span>
  <span class="command">\newCJKfontfamily</span><span class="special">[</span>stli<span class="special">]</span><span class="command">\lishu</span><span class="special">{</span>STLiti<span class="special">}</span>
<span class="command">\fi</span>
<span class="command">\endinput</span>
</pre></td></tr></table></figure>



<p>切换回到终端窗口，按 <code>i</code> 进入编辑模式，按 <code>cmd + v</code> 粘贴，按 <code>esc</code> 退出编辑模式，输入 <code>:x</code> 保存退出（半角冒号紧接着 x）。<br>在终端窗口继续操作，键入命令：</p>
<figure class="highlight shell"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="built_in">sudo</span> texhash
</pre></td></tr></table></figure>



<p>这里，</p>
<ul>
<li><code>ctexopts.cfg</code> 会在 <code>ctex</code> 宏包 / 文档类的选项定义之后被载入，我们启用了 <code>nofonts</code> 和 <code>UTF8</code> 这两个选项；</li>
<li><code>ctex.cfg</code> 则会在 <code>ctex</code> 宏包 / 文档类的结尾被载入，我们配置了字体；</li>
<li><code>texhash</code> 会刷新 TeX 的文件名数据库。</li>
</ul>
<p>至此，<code>ctex</code> 宏包 / 文档类在 Mac 里就可以正常工作了。测试截图如下：</p>
<p><img src="/attachment/images/MacTeX_xeCJK/04.png" alt=" 编译效果 "></p>
]]></content>
    <summary type="html"><![CDATA[<p>最近有人问到如何在 MacTeX 里配置中文支持，这里一并回答。</p>
<p>目前来说，结合 <code>xeCJK</code> 宏包使用 XeLaTeX 编译，应该是最方便的方式了。</p>
<p>XeLaTeX 要求 <code>.tex</code> 文档保存为 UTF-8 编码。所以要做的事情只有两件：</p>
<ul>
<li>配置一个 UTF-8 的编辑环境；</li>
<li>用 <code>xeCJK</code> 的语法选择合适的字体。</li>
</ul>
]]></summary>
    
      <category term="CJK" scheme="http://liam0205.me/tags/CJK/"/>
    
      <category term="MacTeX" scheme="http://liam0205.me/tags/MacTeX/"/>
    
      <category term="OS X" scheme="http://liam0205.me/tags/OS%20X/"/>
    
      <category term="LaTeX" scheme="http://liam0205.me/categories/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[后会无期于后会有期的平凡之路]]></title>
    <link href="http://liam0205.me/2014/09/28/review-of-the-continent/"/>
    <id>http://liam0205.me/2014/09/28/review-of-the-continent/</id>
    <published>2014-09-28T14:04:12.000Z</published>
    <updated>2014-09-28T14:21:50.000Z</updated>
    <content type="html"><![CDATA[<p>我始终是认为，真正体会到的美好，不是一瞬间的事情，而是伴随美好到底的经历。于是我是很不喜欢「后会无期」这个词的，这种只能将美好放在记忆中的状态让我很不舒服。因为我总觉得记忆这种东西是带着一点悲凉和悲哀的色彩的。不论多么美好和美丽的事物，保存在记忆中都会随着时间慢慢被抹去。</p>
<p>我是第一次接触这种类型的电影，接触韩寒的作品是第二次（第一次是中学时代看过他写的《长安乱》）。记得和《长安乱》同时期还有一部很火热的小说，是郭敬明的《幻城》。两部小说我都是从同学处借来阅读的，先是看了《幻城》，然后才是《长安乱》。我很少看小说，当时感觉幻城这种类型的小说还蛮有意思的，但是直觉还是更喜欢长安乱。虽然我一直觉得没看懂长安乱写得是什么，而且到现在其实已经忘记了其中的内容。</p>
<a id="more"></a>

<p>和《长安乱》一样，后会无期这部电影也是有些「表意不明」的作品。于是每个人看到的东西都不一样吧。我曾经痴迷于另一部表意不明的作品，庵野秀明先生的 EVA。EVA 这部作品其实给人一种神神秘秘的感觉，从作品的设定到表达的世界观，都蛮奇怪的。有两年我十分痴迷，为此去学习了日语，去翻阅日文资料。然后在国内第一次完整整理了它的设定和世界观的文档，也写了很多自己的感想。不过后来再看这些文字，觉得有些矫情。于是慢慢也就不再写了，转而躲在屏幕背后，看这一批一批的人如何去体会 EVA。慢慢就会发现，其实所有人都在作品中寻找自己的身影，寻找适合自己的那个影子覆盖之处的光亮（希望）。</p>
<p>归因于最近的经历，我大概是以一种比较「麻木」的状态去看这电影的。当然这种麻木不是「不仁」，而是一种「嗯，这样也挺好的」这种接受一切的态度。这可能正好切合了韩寒想要表达的情感也未可知。</p>
<p>对这部电影，我自己的感受，其实就是那句西班牙语「Que Sera Sera」，也觉得这就是韩寒自己想传达出的意思。这句西语，应该是「Whatever will be」的意思。看起来有点消极，但是其实取决于个人选择的行为方式。电影中意外出现的那只小狗代表着电影世界里的真善美。这种「意外」代表着「无处不在」的可能性，正如世界的美好一样。电影的最后小狗「无意识」地选择了江河，反过来映衬了江河的选择：用自己的方式相信这个世界，相信这个世界的真善美。我觉得这就是所谓「平凡之路」，这不是读万卷书或者行万里路之后「悟」出来的路，而是内心向善，简单而平凡坚信的一条路。</p>
<p>简单地相信一些美好的东西，坚定地走着自己平凡的路。对比马浩汉希望振兴家乡旅游业的强烈愿望不同，这种平凡而坚定的信念，反而带给了江河一个不错的结局。而在这「出乎预料」的结局里，江河表现得还是一如既往地平凡：「导游」在宣传江河的作品的时候，画面中的江河不正是在平静地走着他的平凡之路吗……</p>
<p>这种接受世界、感受世界、行走在这个世界的行为方式，就是韩寒想传达的行为方式：不甘于平庸，回归于平凡，不脱离现实而又不服于现实。</p>
]]></content>
    <summary type="html"><![CDATA[<p>我始终是认为，真正体会到的美好，不是一瞬间的事情，而是伴随美好到底的经历。于是我是很不喜欢「后会无期」这个词的，这种只能将美好放在记忆中的状态让我很不舒服。因为我总觉得记忆这种东西是带着一点悲凉和悲哀的色彩的。不论多么美好和美丽的事物，保存在记忆中都会随着时间慢慢被抹去。</p>
<p>我是第一次接触这种类型的电影，接触韩寒的作品是第二次（第一次是中学时代看过他写的《长安乱》）。记得和《长安乱》同时期还有一部很火热的小说，是郭敬明的《幻城》。两部小说我都是从同学处借来阅读的，先是看了《幻城》，然后才是《长安乱》。我很少看小说，当时感觉幻城这种类型的小说还蛮有意思的，但是直觉还是更喜欢长安乱。虽然我一直觉得没看懂长安乱写得是什么，而且到现在其实已经忘记了其中的内容。</p>
]]></summary>
    
      <category term="Movie" scheme="http://liam0205.me/tags/Movie/"/>
    
      <category term="Han Han" scheme="http://liam0205.me/tags/Han%20Han/"/>
    
      <category term="The Continent" scheme="http://liam0205.me/tags/The%20Continent/"/>
    
      <category term="Literature and Social Sciences" scheme="http://liam0205.me/categories/Literature%20and%20Social%20Sciences/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Matplotlib 教程]]></title>
    <link href="http://liam0205.me/2014/09/11/matplotlib-tutorial-zh-cn/"/>
    <id>http://liam0205.me/2014/09/11/matplotlib-tutorial-zh-cn/</id>
    <published>2014-09-11T13:51:15.000Z</published>
    <updated>2014-09-11T14:29:52.000Z</updated>
    <content type="html"><![CDATA[<h2 id="Matplotlib_ 教程 ">Matplotlib 教程</h2>
<blockquote>
<p>本文为译文，原文<a href="http://www.loria.fr/~rougier/teaching/matplotlib/" target="_blank">载于此</a>，译文<a href="http://liam0205.me/2014/09/11/matplotlib-tutorial-zh-cn/">原载于此</a>。本文欢迎转载，但请保留本段文字，尊重作者和译者的权益。谢谢。<code>: )</code></p>
</blockquote>
<h3 id=" 介绍 ">介绍</h3>
<p>Matplotlib 可能是 Python 2D- 绘图领域使用最广泛的套件。它能让使用者很轻松地将数据图形化，并且提供多样化的输出格式。这里将会探索 matplotlib 的常见用法。</p>
<a id="more"></a>

<h4 id="IPython_ 以及 _pylab_ 模式 ">IPython 以及 pylab 模式</h4>
<p><a href="http://ipython.org/" target="_blank">IPython</a> 是 Python 的一个增强版本。它在下列方面有所增强：命名输入输出、使用系统命令（shell commands）、排错（debug）能力。我们在命令行终端给 IPython 加上参数 <code>-pylab</code> （0.12 以后的版本是 <code>--pylab</code>）之后，就可以像 Matlab 或者 Mathematica 那样以交互的方式绘图。</p>
<h4 id="pylab">pylab</h4>
<p>pylab 是 matplotlib 面向对象绘图库的一个接口。它的语法和 Matlab 十分相近。也就是说，它主要的绘图命令和 Matlab 对应的命令有相似的参数。</p>
<h3 id=" 初级绘制 ">初级绘制</h3>
<p>这一节中，我们将从简到繁：先尝试用默认配置在同一张图上绘制正弦和余弦函数图像，然后逐步美化它。</p>
<p>第一步，是取得正弦函数和预先函数的值：</p>
<pre><code><span class="built_in">from</span> pylab import *

X = np.linspace(-np.<span class="constant">pi</span>, np.<span class="constant">pi</span>, <span class="number">256</span>,endpoint=True)
C,S = np.<span class="built_in">cos</span>(X), np.<span class="built_in">sin</span>(X)
</code></pre><p><code>X</code> 是一个 <code>numpy</code> 数组，包含了从 $-\pi$ 到 $+\pi$ 等间隔的 256 个值。<code>C</code> 和 <code>S</code> 则分别是这 256 个值对应的余弦和正弦函数值组成的 <code>numpy</code> 数组。</p>
<p>你可以在 IPython 的交互模式下测试代码，也可以下载代码（下载链接就是这些示例图），然后执行：</p>
<pre><code><span class="variable">$ </span>python exercise_1.py
</code></pre><h4 id=" 使用默认配置 ">使用默认配置</h4>
<p>Matplotlib 的默认配置都允许用户自定义。你可以调整大多数的默认配置：图片大小和分辨率（dpi）、线宽、颜色、风格、坐标轴、坐标轴以及网格的属性、文字与字体属性等。不过，matplotlib 的默认配置在大多数情况下已经做得足够好，你可能只在很少的情况下才会想更改这些默认配置。</p>
<pre><code><span class="built_in">from</span> pylab import *

X = np.linspace(-np.<span class="constant">pi</span>, np.<span class="constant">pi</span>, <span class="number">256</span>,endpoint=True)
C,S = np.<span class="built_in">cos</span>(X), np.<span class="built_in">sin</span>(X)

plot(X,C)
plot(X,S)

show()
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_1.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_1.png" alt=""></a></p>
<h4 id=" 默认配置的具体内容 ">默认配置的具体内容</h4>
<p>下面的代码中，我们展现了 matplotlib 的默认配置并辅以注释说明，这部分配置包含了有关绘图样式的所有配置。代码中的配置与默认配置完全相同，你可以在交互模式中修改其中的值来观察效果。</p>
<pre><code><span class="preprocessor"># 导入 matplotlib 的所有内容（nympy 可以用 np 这个名字来使用）</span>
from pylab import *

<span class="preprocessor"># 创建一个 8 * 6 点（point）的图，并设置分辨率为 80</span>
figure(figsize=(<span class="number">8</span>,<span class="number">6</span>), dpi=<span class="number">80</span>)

<span class="preprocessor"># 创建一个新的 1 * 1 的子图，接下来的图样绘制在其中的第 1 块（也是唯一的一块）</span>
subplot(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)

X = np.linspace(-np.pi, np.pi, <span class="number">256</span>,endpoint=True)
C,S = np.cos(X), np.sin(X)

<span class="preprocessor"># 绘制余弦曲线，使用蓝色的、连续的、宽度为 1 （像素）的线条</span>
plot(X, C, color=<span class="string">"blue"</span>, linewidth=<span class="number">1.0</span>, linestyle=<span class="string">"-"</span>)

<span class="preprocessor"># 绘制正弦曲线，使用绿色的、连续的、宽度为 1 （像素）的线条</span>
plot(X, S, color=<span class="string">"green"</span>, linewidth=<span class="number">1.0</span>, linestyle=<span class="string">"-"</span>)

<span class="preprocessor"># 设置横轴的上下限</span>
xlim(-<span class="number">4.0</span>,<span class="number">4.0</span>)

<span class="preprocessor"># 设置横轴记号</span>
xticks(np.linspace(-<span class="number">4</span>,<span class="number">4</span>,<span class="number">9</span>,endpoint=True))

<span class="preprocessor"># 设置纵轴的上下限</span>
ylim(-<span class="number">1.0</span>,<span class="number">1.0</span>)

<span class="preprocessor"># 设置纵轴记号</span>
yticks(np.linspace(-<span class="number">1</span>,<span class="number">1</span>,<span class="number">5</span>,endpoint=True))

<span class="preprocessor"># 以分辨率 72 来保存图片</span>
<span class="preprocessor"># savefig("exercice_2.png",dpi=72)</span>

<span class="preprocessor"># 在屏幕上显示</span>
show()
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_2.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_2.png" alt=""></a></p>
<h4 id=" 改变线条的颜色和粗细 ">改变线条的颜色和粗细</h4>
<p>首先，我们以蓝色和红色分别表示余弦和正弦函数，而后将线条变粗一点。接下来，我们在水平方向拉伸一下整个图。</p>
<pre><code><span class="keyword">...</span>
figure(figsize=(<span class="number">10</span>,<span class="number">6</span>), dpi=<span class="number">80</span>)
plot(X, C, color=<span class="string">"blue"</span>, linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"-"</span>)
plot(X, S, color=<span class="string">"red"</span>,  linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"-"</span>)
<span class="keyword">...</span>
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_3.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_3.png" alt=""></a></p>
<h4 id=" 设置图片边界 ">设置图片边界</h4>
<p>当前的图片边界设置得不好，所以有些地方看得不是很清楚。</p>
<pre><code><span class="keyword">...</span>
xlim(X.min()*<span class="number">1.1</span>, X.max()*<span class="number">1.1</span>)
ylim(C.min()*<span class="number">1.1</span>, C.max()*<span class="number">1.1</span>)
<span class="keyword">...</span>
</code></pre><p>更好的方式是这样：</p>
<pre><code>xmin ,xmax = X.<span class="built_in">min</span>(), X.<span class="built_in">max</span>()
ymin, ymax = Y.<span class="built_in">min</span>(), Y.<span class="built_in">max</span>()

dx = (xmax - xmin) * <span class="number">0.2</span>
dy = (ymax - ymin) * <span class="number">0.2</span>

xlim(xmin - dx, xmax + dx)
ylim(ymin - dy, ymax + dy)
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_4.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_4.png" alt=""></a></p>
<h4 id=" 设置记号 ">设置记号</h4>
<p>我们讨论正弦和余弦函数的时候，通常希望知道函数在 $\pm\pi$ 和 $\pm\frac{\pi}{2}$ 的值。这样看来，当前的设置就不那么理想了。</p>
<pre><code><span class="keyword">...</span>
xticks( [-np.pi, -np.pi/<span class="number">2</span>, <span class="number">0</span>, np.pi/<span class="number">2</span>, np.pi])
yticks([-<span class="number">1</span>, <span class="number">0</span>, +<span class="number">1</span>])
<span class="keyword">...</span>
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_5.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_5.png" alt=""></a></p>
<h4 id=" 设置记号的标签 ">设置记号的标签</h4>
<p>记号现在没问题了，不过标签却不大符合期望。我们可以把 $3.142$ 当做是 $\pi$，但毕竟不够精确。当我们设置记号的时候，我们可以同时设置记号的标签。注意这里使用了 LaTeX。</p>
<pre><code>...
xticks([-np.pi, -np.pi/<span class="number">2</span>, <span class="number">0</span>, np.pi/<span class="number">2</span>, np.pi],
       [<span class="string">r'$-\pi$'</span>, <span class="string">r'$-\pi/2$'</span>, <span class="string">r'$0$'</span>, <span class="string">r'$+\pi/2$'</span>, <span class="string">r'$+\pi$'</span>])

yticks([-<span class="number">1</span>, <span class="number">0</span>, +<span class="number">1</span>],
       [<span class="string">r'$-1$'</span>, <span class="string">r'$0$'</span>, <span class="string">r'$+1$'</span>])
...
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_6.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_6.png" alt=""></a></p>
<h4 id=" 移动脊柱 ">移动脊柱</h4>
<p>坐标轴线和上面的记号连在一起就形成了脊柱（Spines，一条线段上有一系列的凸起，是不是很像脊柱骨啊~），它记录了数据区域的范围。它们可以放在任意位置，不过至今为止，我们都把它放在图的四边。</p>
<p>实际上每幅图有四条脊柱（上下左右），为了将脊柱放在图的中间，我们必须将其中的两条（上和右）设置为无色，然后调整剩下的两条到合适的位置——数据空间的 0 点。</p>
<pre><code><span class="keyword">...</span>
ax = gca()
ax.spines[<span class="string">'right'</span>].set_color(<span class="string">'none'</span>)
ax.spines[<span class="string">'top'</span>].set_color(<span class="string">'none'</span>)
ax.xaxis.set_ticks_position(<span class="string">'bottom'</span>)
ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'data'</span>,<span class="number">0</span>))
ax.yaxis.set_ticks_position(<span class="string">'left'</span>)
ax.spines[<span class="string">'left'</span>].set_position((<span class="string">'data'</span>,<span class="number">0</span>))
<span class="keyword">...</span>
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_7.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_7.png" alt=""></a></p>
<h4 id=" 添加图例 ">添加图例</h4>
<p>我们在图的左上角添加一个图例。为此，我们只需要在 <code>plot</code> 函数里以「键 - 值」的形式增加一个参数。</p>
<pre><code><span class="keyword">...</span>
plot(X, C, color=<span class="string">"blue"</span>, linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"-"</span>, label=<span class="string">"cosine"</span>)
plot(X, S, color=<span class="string">"red"</span>,  linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"-"</span>, label=<span class="string">"sine"</span>)

legend(loc=<span class="string">'upper left'</span>)
<span class="keyword">...</span>
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_8.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_8.png" alt=""></a></p>
<h4 id=" 给一些特殊点做注释 ">给一些特殊点做注释</h4>
<p>我们希望在 $2\pi/3$ 的位置给两条函数曲线加上一个注释。首先，我们在对应的函数图像位置上画一个点；然后，向横轴引一条垂线，以虚线标记；最后，写上标签。</p>
<pre><code><span class="keyword">...</span>

t = <span class="number">2</span>*np.pi/<span class="number">3</span>
plot([t,t],[<span class="number">0</span>,np.cos(t)], color =<span class="string">'blue'</span>, linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"--"</span>)
scatter([t,],[np.cos(t),], <span class="number">50</span>, color =<span class="string">'blue'</span>)

annotate(r<span class="string">'$\sin(\frac{2\pi}{3})=\frac{\sqrt{3}}{2}$'</span>,
         xy=(t, np.sin(t)), xycoords=<span class="string">'data'</span>,
         xytext=(+<span class="number">10</span>, +<span class="number">30</span>), textcoords=<span class="string">'offset points'</span>, fontsize=<span class="number">16</span>,
         arrowprops=dict(arrowstyle=<span class="string">"-&gt;"</span>, connectionstyle=<span class="string">"arc3,rad=.2"</span>))

plot([t,t],[<span class="number">0</span>,np.sin(t)], color =<span class="string">'red'</span>, linewidth=<span class="number">2.5</span>, linestyle=<span class="string">"--"</span>)
scatter([t,],[np.sin(t),], <span class="number">50</span>, color =<span class="string">'red'</span>)

annotate(r<span class="string">'$\cos(\frac{2\pi}{3})=-\frac{1}{2}$'</span>,
         xy=(t, np.cos(t)), xycoords=<span class="string">'data'</span>,
         xytext=(-<span class="number">90</span>, -<span class="number">50</span>), textcoords=<span class="string">'offset points'</span>, fontsize=<span class="number">16</span>,
         arrowprops=dict(arrowstyle=<span class="string">"-&gt;"</span>, connectionstyle=<span class="string">"arc3,rad=.2"</span>))
<span class="keyword">...</span>
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_9.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_9.png" alt=""></a></p>
<h4 id=" 精益求精 ">精益求精</h4>
<p>坐标轴上的记号标签被曲线挡住了，作为强迫症患者（雾）这是不能忍的。我们可以把它们放大，然后添加一个白色的半透明底色。这样可以保证标签和曲线同时可见。</p>
<pre><code><span class="keyword">...</span>
<span class="keyword">for</span> label <span class="keyword">in</span> ax.get_xticklabels() + ax.get_yticklabels():
    label.set_fontsize(<span class="number">16</span>)
    label.set_bbox(dict(facecolor=<span class="string">'white'</span>, edgecolor=<span class="string">'None'</span>, alpha=<span class="number">0.65</span> ))
<span class="keyword">...</span>
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/exercice_10.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/exercice_10.png" alt=""></a></p>
<h3 id=" 图像、子图、坐标轴和记号 ">图像、子图、坐标轴和记号</h3>
<p>到目前为止，我们都用隐式的方法来绘制图像和坐标轴。快速绘图中，这是很方便的。我们也可以显式地控制图像、子图、坐标轴。Matplotlib 中的「图像」指的是用户界面看到的整个窗口内容。在图像里面有所谓「子图」。子图的位置是由坐标网格确定的，而「坐标轴」却不受此限制，可以放在图像的任意位置。我们已经隐式地使用过图像和子图：当我们调用 <code>plot</code> 函数的时候，matplotlib 调用 <code>gca()</code> 函数以及 <code>gcf()</code> 函数来获取当前的坐标轴和图像；如果无法获取图像，则会调用 <code>figure()</code> 函数来创建一个——严格地说，是用 <code>subplot(1,1,1)</code> 创建一个只有一个子图的图像。</p>
<h4 id=" 图像 ">图像</h4>
<p>所谓「图像」就是 GUI 里以「Figure #」为标题的那些窗口。图像编号从 1 开始，与 MATLAB 的风格一致，而于 Python 从 0 开始编号的风格不同。以下参数是图像的属性：</p>
<table border="1" class="docutils"><br><colgroup><br><col width="17%"><br><col width="28%"><br><col width="54%"><br></colgroup><br><thead valign="bottom"><br><tr><th class="head">参数</th><br><th class="head">默认值</th><br><th class="head">描述</th><br></tr><br></thead><br><tbody valign="top"><br><tr><td>num</td><br><td>1</td><br><td>图像的数量</td><br></tr><br><tr><td>figsize</td><br><td>figure.figsize</td><br><td>图像的长和宽（英寸）</td><br></tr><br><tr><td>dpi</td><br><td>figure.dpi</td><br><td>分辨率（点 / 英寸）</td><br></tr><br><tr><td>facecolor</td><br><td>figure.facecolor</td><br><td>绘图区域的背景颜色</td><br></tr><br><tr><td>edgecolor</td><br><td>figure.edgecolor</td><br><td>绘图区域边缘的颜色</td><br></tr><br><tr><td>frameon</td><br><td>True</td><br><td>是否绘制图像边缘</td><br></tr><br></tbody><br></table>

<p>这些默认值可以在源文件中指明。不过除了图像数量这个参数，其余的参数都很少修改。</p>
<p>你在图形界面中可以按下右上角的 X 来关闭窗口（OS X 系统是左上角）。Matplotlib 也提供了名为 <code>close</code> 的函数来关闭这个窗口。<code>close</code> 函数的具体行为取决于你提供的参数：</p>
<ol>
<li>不传递参数：关闭当前窗口；</li>
<li>传递窗口编号或窗口实例（instance）作为参数：关闭指定的窗口；</li>
<li><code>all</code>：关闭所有窗口。</li>
</ol>
<p>和其他对象一样，你可以使用 <code>setp</code> 或者是 <code>set_something</code> 这样的方法来设置图像的属性。</p>
<h4 id=" 子图 ">子图</h4>
<p>你可以用子图来将图样（plot）放在均匀的坐标网格中。用 <code>subplot</code> 函数的时候，你需要指明网格的行列数量，以及你希望将图样放在哪一个网格区域中。此外，<a href="http://matplotlib.sourceforge.net/users/gridspec.html" target="_blank"><code>gridspec</code></a> 的功能更强大，你也可以选择它来实现这个功能。</p>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/subplot-horizontal.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/subplot-horizontal.png" alt=""></a></p>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/subplot-vertical.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/subplot-vertical.png" alt=""></a></p>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/subplot-grid.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/subplot-grid.png" alt=""></a></p>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/gridspec.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/gridspec.png" alt=""></a></p>
<h4 id=" 坐标轴 ">坐标轴</h4>
<p>坐标轴和子图功能类似，不过它可以放在图像的任意位置。因此，如果你希望在一副图中绘制一个小图，就可以用这个功能。</p>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/axes.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/axes.png" alt=""></a></p>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/axes-2.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/axes-2.png" alt=""></a></p>
<h4 id=" 记号 ">记号</h4>
<p>良好的记号是图像的重要组成部分。Matplotlib 里的记号系统里的各个细节都是可以由用户个性化配置的。你可以用 Tick Locators 来指定在那些位置放置记号，用 Tick Formatters 来调整记号的样式。主要和次要的记号可以以不同的方式呈现。默认情况下，每一个次要的记号都是隐藏的，也就是说，默认情况下的次要记号列表是空的——<code>NullLocator</code>。</p>
<h5 id="Tick_Locators">Tick Locators</h5>
<p>下面有为不同需求设计的一些 Locators。</p>
<table border="1" class="docutils"><br><colgroup><br><col width="22%"><br><col width="78%"><br></colgroup><br><thead valign="bottom"><br><tr><th class="head">类型</th><br><th class="head">说明</th><br></tr><br></thead><br><tbody valign="top"><br><tr><td><tt class="docutils literal">NullLocator</tt></td><br><td><p class="first">No ticks.</p><br><img alt="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-NullLocator.png" class="last" src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-NullLocator.png"><br></td><br></tr><br><tr><td><tt class="docutils literal">IndexLocator</tt></td><br><td><p class="first">Place a tick on every multiple of some base number of points plotted.</p><br><img alt="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-IndexLocator.png" class="last" src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-IndexLocator.png"><br></td><br></tr><br><tr><td><tt class="docutils literal">FixedLocator</tt></td><br><td><p class="first">Tick locations are fixed.</p><br><img alt="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-FixedLocator.png" class="last" src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-FixedLocator.png"><br></td><br></tr><br><tr><td><tt class="docutils literal">LinearLocator</tt></td><br><td><p class="first">Determine the tick locations.</p><br><img alt="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-LinearLocator.png" class="last" src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-LinearLocator.png"><br></td><br></tr><br><tr><td><tt class="docutils literal">MultipleLocator</tt></td><br><td><p class="first">Set a tick on every integer that is multiple of some base.</p><br><img alt="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-MultipleLocator.png" class="last" src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-MultipleLocator.png"><br></td><br></tr><br><tr><td><tt class="docutils literal">AutoLocator</tt></td><br><td><p class="first">Select no more than n intervals at nice locations.</p><br><img alt="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-AutoLocator.png" class="last" src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-AutoLocator.png"><br></td><br></tr><br><tr><td><tt class="docutils literal">LogLocator</tt></td><br><td><p class="first">Determine the tick locations for log axes.</p><br><img alt="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-LogLocator.png" class="last" src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/ticks-LogLocator.png"><br></td><br></tr><br></tbody><br></table>

<p>这些 Locators 都是 <code>matplotlib.ticker.Locator</code> 的子类，你可以据此定义自己的 Locator。以日期为 ticks 特别复杂，因此 Matplotlib 提供了 <code>matplotlib.dates</code> 来实现这一功能。</p>
<h3 id=" 其他类型的图 ">其他类型的图</h3>
<p>接下来的内容是练习。请运用你学到的知识，从提供的代码开始，实现配图所示的效果。具体的答案可以点击配图下载。</p>
<h4 id=" 普通图 ">普通图</h4>
<pre><code><span class="built_in">from</span> pylab import *

n = <span class="number">256</span>
X = np.linspace(-np.<span class="constant">pi</span>,np.<span class="constant">pi</span>,n,endpoint=True)
Y = np.<span class="built_in">sin</span>(<span class="number">2</span>*X)

plot (X, Y+<span class="number">1</span>, color=<span class="string">'blue'</span>, alpha=<span class="number">1.00</span>)
plot (X, Y-<span class="number">1</span>, color=<span class="string">'blue'</span>, alpha=<span class="number">1.00</span>)
show()
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/plot_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/plot_ex.png" alt=""></a></p>
<h4 id=" 散点图 ">散点图</h4>
<pre><code><span class="built_in">from</span> pylab import *

n = <span class="number">1024</span>
X = np.<span class="built_in">random</span>.<span class="keyword">normal</span>(<span class="number">0</span>,<span class="number">1</span>,n)
Y = np.<span class="built_in">random</span>.<span class="keyword">normal</span>(<span class="number">0</span>,<span class="number">1</span>,n)

scatter(X,Y)
show()
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/scatter_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/scatter_ex.png" alt=""></a></p>
<h4 id=" 条形图 ">条形图</h4>
<pre><code>from pylab import *

n = <span class="number">12</span>
X = np.arange(n)
Y1 = (<span class="number">1</span>-X/<span class="keyword">float</span>(n)) * np.random.<span class="keyword">uniform</span>(<span class="number">0.5</span>,<span class="number">1.0</span>,n)
Y2 = (<span class="number">1</span>-X/<span class="keyword">float</span>(n)) * np.random.<span class="keyword">uniform</span>(<span class="number">0.5</span>,<span class="number">1.0</span>,n)

bar(X, +Y1, facecolor=<span class="string">'#9999ff'</span>, edgecolor=<span class="string">'white'</span>)
bar(X, -Y2, facecolor=<span class="string">'#ff9999'</span>, edgecolor=<span class="string">'white'</span>)

<span class="keyword">for</span> x,y <span class="keyword">in</span> zip(X,Y1):
    <span class="keyword">text</span>(x+<span class="number">0.4</span>, y+<span class="number">0.05</span>, <span class="string">'%.2f'</span> % y, ha=<span class="string">'center'</span>, va= <span class="string">'bottom'</span>)

ylim(-<span class="number">1.25</span>,+<span class="number">1.25</span>)
show()
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/bar_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/bar_ex.png" alt=""></a></p>
<h4 id=" 等高线图 ">等高线图</h4>
<pre><code><span class="keyword">from</span> pylab <span class="keyword">import</span> *

<span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x,y)</span>:</span> <span class="keyword">return</span> (<span class="number">1</span>-x/<span class="number">2</span>+x**<span class="number">5</span>+y**<span class="number">3</span>)*np.exp(-x**<span class="number">2</span>-y**<span class="number">2</span>)

n = <span class="number">256</span>
x = np.linspace(-<span class="number">3</span>,<span class="number">3</span>,n)
y = np.linspace(-<span class="number">3</span>,<span class="number">3</span>,n)
X,Y = np.meshgrid(x,y)

contourf(X, Y, f(X,Y), <span class="number">8</span>, alpha=<span class="number">.75</span>, cmap=<span class="string">'jet'</span>)
C = contour(X, Y, f(X,Y), <span class="number">8</span>, colors=<span class="string">'black'</span>, linewidth=<span class="number">.5</span>)
show()
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/contour_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/contour_ex.png" alt=""></a></p>
<h4 id=" 灰度图（Imshow）">灰度图（Imshow）</h4>
<pre><code><span class="keyword">from</span> pylab <span class="keyword">import</span> *

<span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x,y)</span>:</span> <span class="keyword">return</span> (<span class="number">1</span>-x/<span class="number">2</span>+x**<span class="number">5</span>+y**<span class="number">3</span>)*np.exp(-x**<span class="number">2</span>-y**<span class="number">2</span>)

n = <span class="number">10</span>
x = np.linspace(-<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>*n)
y = np.linspace(-<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>*n)
X,Y = np.meshgrid(x,y)
imshow(f(X,Y)), show()
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/imshow_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/imshow_ex.png" alt=""></a></p>
<h4 id=" 饼状图 ">饼状图</h4>
<pre><code>from pylab import *

n = <span class="number">20</span>
<span class="variable">Z</span> = np.random.uniform(<span class="number">0</span>,<span class="number">1</span>,n)
<span class="function"><span class="title">pie</span><span class="params">(<span class="variable">Z</span>)</span>, <span class="title">show</span><span class="params">()</span></span>
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/pie_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/pie_ex.png" alt=""></a></p>
<h4 id=" 量场图（Quiver_Plots）">量场图（Quiver Plots）</h4>
<pre><code>from pylab import *

n = <span class="number">8</span>
<span class="variable">X</span>,<span class="variable">Y</span> = np.mgrid[<span class="number">0</span>:n,<span class="number">0</span>:n]
<span class="function"><span class="title">quiver</span><span class="params">(<span class="variable">X</span>,<span class="variable">Y</span>)</span>, <span class="title">show</span><span class="params">()</span></span>
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/quiver_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/quiver_ex.png" alt=""></a></p>
<h4 id=" 网格 ">网格</h4>
<pre><code>from pylab import *

axes = gca()
axes<span class="preprocessor">.set</span>_xlim(<span class="number">0</span>,<span class="number">4</span>)
axes<span class="preprocessor">.set</span>_ylim(<span class="number">0</span>,<span class="number">3</span>)
axes<span class="preprocessor">.set</span>_xticklabels([])
axes<span class="preprocessor">.set</span>_yticklabels([])

show()
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/grid_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/grid_ex.png" alt=""></a></p>
<h4 id=" 多重网格 ">多重网格</h4>
<pre><code>from pylab import *

<span class="function"><span class="title">subplot</span><span class="params">(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>)</span>
<span class="title">subplot</span><span class="params">(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span>
<span class="title">subplot</span><span class="params">(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>)</span>

<span class="title">show</span><span class="params">()</span></span>
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/multiplot_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/multiplot_ex.png" alt=""></a></p>
<h4 id=" 极轴图 ">极轴图</h4>
<pre><code>from pylab import *

axes([<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>])

N = <span class="number">20</span>
theta = np<span class="preprocessor">.arange</span>(<span class="number">0.0</span>, <span class="number">2</span>*np<span class="preprocessor">.pi</span>, <span class="number">2</span>*np<span class="preprocessor">.pi</span>/N)
radii = <span class="number">10</span>*np<span class="preprocessor">.random</span><span class="preprocessor">.rand</span>(N)
width = np<span class="preprocessor">.pi</span>/<span class="number">4</span>*np<span class="preprocessor">.random</span><span class="preprocessor">.rand</span>(N)
bars = bar(theta, radii, width=width, bottom=<span class="number">0.0</span>)

for r,bar <span class="keyword">in</span> zip(radii, bars):
    bar<span class="preprocessor">.set</span>_facecolor( cm<span class="preprocessor">.jet</span>(r/<span class="number">10.</span>))
    bar<span class="preprocessor">.set</span>_alpha(<span class="number">0.5</span>)

show()
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/polar_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/polar_ex.png" alt=""></a></p>
<h4 id="3D_ 图 ">3D 图</h4>
<pre><code>from pylab import *
from mpl_toolkits.mplot3d import Axes3D

<span class="constant">fig</span> = figure()
<span class="constant">ax</span> = Axes3D(fig)
<span class="constant">X</span> = np.arange(-4, 4, 0.25)
<span class="constant">Y</span> = np.arange(-4, 4, 0.25)
X, Y = np.meshgrid(X, Y)
<span class="constant">R</span> = np.sqrt(X**2 + Y**2)
<span class="constant">Z</span> = np.sin(R)

ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap='hot')

show()
</code></pre><p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/plot3d_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/plot3d_ex.png" alt=""></a></p>
<h4 id=" 手稿 ">手稿</h4>
<p><a href="http://www.loria.fr/~rougier/teaching/matplotlib/scripts/text_ex.py" target="_blank"><img src="http://www.loria.fr/~rougier/teaching/matplotlib/figures/text_ex.png" alt=""></a></p>
<h3 id=" 结束篇 ">结束篇</h3>
<p>Matplotlib 能有今天这样强大的功能和广泛的使用得益于大量的文档和社区开发者。这里提供一些有益的链接。</p>
<h4 id=" 入门教程 ">入门教程</h4>
<ul>
<li><a href="http://matplotlib.sourceforge.net/users/pyplot_tutorial.html" target="_blank">Pyplot tutorial</a></li>
<li><a href="http://matplotlib.sourceforge.net/users/image_tutorial.html" target="_blank">Image tutorial</a></li>
<li><a href="http://matplotlib.sourceforge.net/users/index_text.html" target="_blank">Text tutorial</a></li>
<li><a href="http://matplotlib.sourceforge.net/users/artists.html" target="_blank">Artist tutorial</a></li>
<li><a href="http://matplotlib.sourceforge.net/users/path_tutorial.html" target="_blank">Path tutorial</a></li>
<li><a href="http://matplotlib.sourceforge.net/users/transforms_tutorial.html" target="_blank">Transforms tutorial</a></li>
</ul>
<h4 id="Matplotlib_ 文档 ">Matplotlib 文档</h4>
<ul>
<li><a href="http://matplotlib.sourceforge.net/users/index.html" target="_blank">用户指南</a></li>
<li><a href="http://matplotlib.sourceforge.net/faq/index.html" target="_blank">常见问题及回答</a></li>
<li><a href="http://matplotlib.sourceforge.net/users/screenshots.html" target="_blank">截屏</a></li>
</ul>
<h4 id=" 随代码分发的文档 ">随代码分发的文档</h4>
<p>Matplotlib 的代码是自文档（Self-documented）的。你可以在 Python 中快速查询某个命令的用法。</p>
<pre><code>&gt;&gt;&gt; <span class="built_in">from</span> pylab import *
&gt;&gt;&gt; help(plot)
Help <span class="command"><span class="keyword">on</span> <span class="title">function</span> <span class="title">plot</span> <span class="title">in</span> <span class="title">module</span> <span class="title">matplotlib</span>.<span class="title">pyplot</span>:</span>

plot(*args, **kwargs)
   Plot <span class="keyword">lines</span> <span class="operator">and</span>/<span class="operator">or</span> markers <span class="built_in">to</span> <span class="operator">the</span>
   :class:`~matplotlib.axes.Axes`.  *args* is <span class="operator">a</span> <span class="built_in">variable</span> <span class="built_in">length</span>
   argument, allowing <span class="keyword">for</span> multiple *x*, *y* pairs <span class="operator">with</span> <span class="operator">an</span>
   optional <span class="built_in">format</span> <span class="keyword">string</span>.  For example, <span class="keyword">each</span> <span class="operator">of</span> <span class="operator">the</span> following is
   legal::

       plot(x, y)         <span class="comment"># plot x and y using default line style and color</span>
       plot(x, y, <span class="string">'bo'</span>)   <span class="comment"># plot x and y using blue circle markers</span>
       plot(y)            <span class="comment"># plot y using x as index array 0..N-1</span>
       plot(y, <span class="string">'r+'</span>)      <span class="comment"># ditto, but with red plusses</span>

   If *x* <span class="operator">and</span>/<span class="operator">or</span> *y* is <span class="number">2</span>-dimensional, <span class="keyword">then</span> <span class="operator">the</span> corresponding columns
   will be plotted.
   ...
</code></pre><h4 id=" 画廊 ">画廊</h4>
<p><a href="http://matplotlib.sourceforge.net/gallery.html" target="_blank">Matplotlib 画廊</a> 也非常有用。其中的例子都有配图和对应的代码，当你不知道某一个效果如何实现的时候，你可以在这里找找。</p>
<p>哦，这里还有一个<a href="http://www.loria.fr/~rougier/coding/gallery/" target="_blank">小一点的画廊</a>。</p>
<h4 id=" 邮件列表 ">邮件列表</h4>
<p>你可以在<a href="https://lists.sourceforge.net/lists/listinfo/matplotlib-users" target="_blank">用户邮件列表</a>提问，或者在<a href="https://lists.sourceforge.net/lists/listinfo/matplotlib-devel" target="_blank">开发者邮件列表</a>里交流技术。</p>
<blockquote>
<p>译注：邮件列表是一个很正式的交流平台，其内的每一封邮件，列表的收听者都会看到，所以请不要在邮件列表灌水或发表质量低劣的文章。</p>
</blockquote>
<h4 id=" 快速查询 ">快速查询</h4>
<p>你可以在<a href="http://www.loria.fr/~rougier/teaching/matplotlib/#id12" target="_blank">这里</a>找到 Matplotlib 主要的属性表，以便按照需求个性化配置你的输出图样。</p>
]]></content>
    <summary type="html"><![CDATA[<h2 id="Matplotlib_ 教程 ">Matplotlib 教程</h2>
<blockquote>
<p>本文为译文，原文<a href="http://www.loria.fr/~rougier/teaching/matplotlib/" target="_blank">载于此</a>，译文<a href="http://liam0205.me/2014/09/11/matplotlib-tutorial-zh-cn/">原载于此</a>。本文欢迎转载，但请保留本段文字，尊重作者和译者的权益。谢谢。<code>: )</code></p>
</blockquote>
<h3 id=" 介绍 ">介绍</h3>
<p>Matplotlib 可能是 Python 2D- 绘图领域使用最广泛的套件。它能让使用者很轻松地将数据图形化，并且提供多样化的输出格式。这里将会探索 matplotlib 的常见用法。</p>
]]></summary>
    
      <category term="Python" scheme="http://liam0205.me/tags/Python/"/>
    
      <category term="Matplotlib" scheme="http://liam0205.me/tags/Matplotlib/"/>
    
      <category term="Tutorial" scheme="http://liam0205.me/tags/Tutorial/"/>
    
      <category term="IT" scheme="http://liam0205.me/categories/IT/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[一份其实很短的 LaTeX 入门文档]]></title>
    <link href="http://liam0205.me/2014/09/08/latex-introduction/"/>
    <id>http://liam0205.me/2014/09/08/latex-introduction/</id>
    <published>2014-09-08T03:46:31.000Z</published>
    <updated>2014-09-08T04:16:18.000Z</updated>
    <content type="html"><![CDATA[<h2 id=" 优雅的 _LaTeX">优雅的 LaTeX</h2>
<p>有很多 Geeks 或者 LaTeX’s Fanatical Fans 过分地强调了 LaTeX 的一些并非重点的特性，以至于很多初学者会觉得 LaTeX 很神秘很复杂，从而引发了初学者的畏难情绪甚至是负面情绪。尽管这些 Fans 说得并没有错，我是说在事实上，但是他们的表达方式和内心态度却间接阻碍了 LaTeX 的发展，我想这也是和他们的初衷相悖的。</p>
<p>我曾经也受到过这些言论的影响，但幸运的事，至今为止我已经越过了这些障碍，并更加坚信了他们所言（LaTeX 的优点）的正确性。因此我想以我自己的方式，向更多的人介绍 LaTeX —— <strong>这个优雅，但有着自己高傲，却绝不复杂甚至神秘的东西</strong>。</p>
<a id="more"></a>

<blockquote>
<p> 欢迎从校内转移过来的同学们，因为校内的技术原因，文章无法在校内继续更新。尽管非我之故，但还是给各位同学说声抱歉。同时，欢迎各位来到我的博客。<code>: )</code></p>
</blockquote>
<p>ps, 来自 楠哥 的吐槽：“这篇小文的例子因为要兼容中文，变得太复杂了，可以先看<a href="http://blog.renren.com/blog/bp/Q7LjRQLBcl" target="_blank">这篇文章</a>，再回来看这篇小文”。</p>
<h2 id=" 你将从这里看到 ">你将从这里看到</h2>
<ol>
<li>（几乎是）最简洁的 (La)TeX 编辑器——TeXworks——的基本使用方法；</li>
<li>如何使用 (Xe)LaTeX 进行简单的<strong>中英混排</strong>；</li>
<li>简单的文章组织结构；</li>
<li>如何用 (Xe)LaTeX 进行数学公式的排版；</li>
<li>如何在 (Xe)LaTeX 的文档中插入图片 / 表格；</li>
<li>如何进行简单的版面设置；</li>
<li>几个最常见的带有 TeX 的单词的含义；</li>
<li>出现问题应当如何处理 / 怎样聪明地提出你的问题——怎样从这里毕业。</li>
</ol>
<h2 id=" 你不会从这里看到 ">你不会从这里看到</h2>
<ol>
<li>如何安装 TeX 发行；</li>
<li>特殊需求（特殊宏包）的解决方法；</li>
<li>关于若干 TeX 发行的好坏比较；</li>
<li>关于各种 TeX 编辑器的好坏比较；</li>
<li>过多的废话。</li>
</ol>
<h2 id=" 你应当如何阅读本文 ">你应当如何阅读本文</h2>
<p>事实上本文在行文过程中，会有相当多的提示帮助你以正确的方式阅读。因此有必要在此先介绍一下最常用的一些标记。</p>
<ol>
<li>斜体：使用<em>斜体</em> 意味着如果忽略掉这些文字，你可能在<em>逻辑</em> 上很难理解后面某处的知识；</li>
<li>粗体：使用<strong>粗体</strong>意味如果忽略掉这些文字，你可能在<strong>TeX 的概念</strong>上很难理解后面某处的知识；</li>
<li>粗斜体：使用<strong><em>粗斜体</em></strong> 基本是最重要的部分，是上述两种情况的合并；</li>
<li>引用：使用引用，<blockquote>
<p>表明这些文字在你第一次阅读本文的时候<em>不需要</em> 了解，其中的内容可能过于深奥，或者过于琐碎。对于第一次接触 TeX 的你（如果你是 TeX 资深使用者当然不在此列），如果了解到这些内容可能会使你困惑，并且不会从实际上增加你对 TeX 的领悟以及对 TeX 的好感。</p>
</blockquote>
</li>
</ol>
<h1 id=" 关于编辑器的简单介绍 ">关于编辑器的简单介绍</h1>
<p>流行的 <em>TeX 发行</em>，比如 CTeX 和 TeX Live, 都自带有一些用于编辑文档的编辑器。这些编辑器差异还是很大的，从简单的 TeXworks 到复杂的 WinEdt, 各种各样。但是不管是什么样的编辑器，他们都是用来编辑纯文本的而已（.tex 就是纯文本），换言之他们只是 Windows 自带的记事本程序的加强版而已，<strong><em>他们本身并不是 TeX 系统的一部分</em></strong>。</p>
<blockquote>
<p>所谓 TeX 发行，指的是包括 TeX 系统的各种可执行程序，以及他们执行时需要的一些辅助程序和宏包文档的集合。</p>
</blockquote>
<p>国内的同学安装 CTeX 的比较多，CTeX 自带的编辑器，除了大家熟知的 WinEdt，还有 TeXworks。而 TeX Live 则只是自带了 TeXworks 而已。</p>
<p>本文只介绍 TeXworks 编辑器的使用。原因有二：</p>
<ul>
<li>WinEdt 过于繁琐，很多功能用不上，反而给新手增加学习成本；</li>
<li>TeXworks 是 TeX Live 自带的编辑器，而 TeX Live 是跨平台的，各个操作系统都可以使用。</li>
</ul>
<h2 id=" 启动 _TeXworks">启动 TeXworks</h2>
<p>启动 TeXworks 很简单，不论你安装的是 CTeX 还是 TeX Live, 你都可以在 Windows 启动对话框中输入 texworks 按回车。具体步骤是：</p>
<ul>
<li>按下键盘上的 Windows 徽标键，同时按下 R 键 —— <code>&lt;Win&gt; + R</code>;</li>
<li>键入 <code>texworks</code>；</li>
<li>回车。</li>
</ul>
<p>如果安装的是 CTeX，也可以进入开始菜单，从 CTeX - MiKTeX - TeXworks 打开。</p>
<p>启动之后，TeXworks 的界面，会默认占据你屏幕的左半边，右半边留空。效果如下图：<br><img src="http://ww4.sinaimg.cn/large/818901c1jw1e44dgufrnpj20iy0kimxz.jpg" alt=""></p>
<p>图中空白的部分，就是输入编辑文本的编辑框；在编辑框的右下角，显示有三个按钮，最左边的是换行符模式，中间是<em>编码模式</em>，右边标示当前光标所在位置；编辑框的上方是工具栏，工具栏的右半部分使大家熟悉的功能（新建、打开、保存、撤消、恢复、剪切、复制、黏贴、查找、替换），工具栏的左边则是<em>编译按钮</em> （TeXworks 也称其为“排版工具”）；工具栏在往上，则是菜单栏，此处按下不表。</p>
<blockquote>
<p>Windows，Unix 等操作系统对待“换行符”是有不同的。索性 TeXworks 为我们做了足够的提示，方面我们的选择（点击一下那个按钮就知道了）。一般而言，保持默认即可。</p>
<p>字符（包括英文字符和中文字符）在计算机中，经过编码以二进制的形式存储在计算机中。如果编辑器编码和计算机内部编码不一致，则会导致所谓“乱码”的现象。TeXworks 默认使用 UTF8 编码，在我们的文档中不需要进行任何更改，而对于一些其他的文档可能需要按照要求更改编码。</p>
</blockquote>
<h2 id=" 排版工具 ">排版工具</h2>
<p>TeXworks 为我们预设了若干排版工具（pdfTeX, pdfLaTeX, XeTeX, XeLaTeX 等），他们分别代表什么实在太过复杂并且也不是当前需要讲明白的。本文中需要用到的排版工具主要是 <strong><em>XeLaTeX</em></strong>，关于这些工具的介绍，可以参看后文。当你对 TeX 系统相当熟悉之后，也可以不适用 TeXworks 预设的工具，自己配置排版工具。</p>
<p>TeXworks 默认的排版工具是 pdfLaTeX，如果你希望更改这个默认值，可以在<em>编辑 - 首选项 - 排版 - 处理工具 - 默认</em> 中修改。</p>
<h2 id="Hello,_world!">Hello, world!</h2>
<p>在编辑框中，输入如下内容：</p>
<pre><code>\documentclass<span class="cell">{article}</span>
<span class="comment">% 这里是导言区</span>
\begin<span class="cell">{document}</span>
Hello, world!
\<span class="keyword">end</span><span class="cell">{document}</span>
</code></pre><p>将文档保存在你希望的位置，然后在排版工具的下拉选框中选中 <strong>XeLaTeX</strong> 后，按下绿色的编译按钮。一会儿，如果没有意外，屏幕的右边就会出现编译之后结果。如下图：<br><img src="http://ww4.sinaimg.cn/large/818901c1jw1e44e55rnkkj211y0kmwgi.jpg" alt=""></p>
<p>很容易发现，输入进编辑框的五行文字，在最终输出的 pdf 档中只显示了 1 行。事实上，交付 TeX 处理的文档内容，并不会全部输出。</p>
<p>此处的第一行<code>\documentclass{article}</code>中包含了一个控制序列（或称命令 / 标记）。所谓控制序列，是以反斜杠<code>\</code>开头，以第一个<strong><em>空格或非字母</em></strong> 的字符结束的一串文字，他们并不被输出，但是他们会影响输出文档的效果。这里的控制序列是<code>documentclass</code>，它后面紧跟着的<code>{article}</code>代表这个控制序列有一个必要的参数，该参数的值为<code>article</code>. 这个控制序列的作用，是调用名为 “article” 的文档类。</p>
<blockquote>
<p>部分控制序列还有被方括号<code>[]</code>包括的可选参数。</p>
<p>所谓文档类，即是 TeX 系统预设的（或是用户自定的）一些格式的集合。不同的文档类在输出效果上会有差别。</p>
</blockquote>
<p>此处的第二行以<code>%</code>开头。在 TeX 风格的文档中，从 “%” 开始，到该行末尾的所有字符，都会被 TeX 系统无视，只作为供人类阅读的注释。除非在 “%” 前加上反斜杠来取消这一特性，例如</p>
<pre><code>今年的净利润为 20<span class="command">\%</span>, 比去年高。
</code></pre><p>此处 “%” 被当做正常的百分号处理，其后的文字也将被正常输出。</p>
<p>其后出现了控制序列<code>begin</code>，这个控制序列总是与<code>end</code>成对出现。这两个控制序列以及他们中间的内容被称为“环境”；他们之后的第一个必要参数总是<strong>一致的</strong>，被称为环境名。</p>
<p>只有在 “document” 环境中的内容，才会被正常输出到文档中去或是作为控制序列对文档产生影响。因此，在<code>\end{document}</code>之后插入任何内容都是无效的。</p>
<p><code>\begin{document}</code>与<code>\documentclass{article}</code>之间的部分被称为导言区。导言区中的控制序列，通常会影响到整个输出文档。</p>
<h1 id=" 实现中英文混排 ">实现中英文混排</h1>
<p>除掉成功生成第一个文档，实现中文输出（或者说是中英文混排）恐怕是困扰中国的 TeX 使用者的第二个普遍问题。众所周知，TeX 系统是高教授开发的，当初并没有考虑到亚洲文字的问题。因此早期的 TeX 系统并不能直接支持中文，必须要用其他工具先处理一下（或者是一些宏包之类的）。</p>
<p>但是现在，XeTeX 原生支持 Unicode，并且可以方便地调用系统字体。可以说解决了困扰中国 TeX 使用者多年的大问题。</p>
<p>此外，除去中文支持，中文的版式处理和标点禁则也是不小的挑战。好在由吴凌云和江疆牵头，现在主要由刘海洋和李清（还有我打个酱油）维护的 <code>ctex</code> 宏包 / 文档类一次性解决了这些问题。<code>ctex</code> 宏包和文档类的优势在于，它适用于多种编译方式；在内部处理好了中文和中文版式的支持，隐藏了这些细节；并且，提供了不少中文用户需要的功能接口。</p>
<p>为了和原有的日志对接，这里分别用两种方法来介绍中英文混排。当然，老方法只是为了「兼容性」存在的，推荐使用新方法。</p>
<h2 id=" 新方法——使用 _ctex_ 文档类 ">新方法——使用 <code>ctex</code> 文档类</h2>
<p>在 TeXworks 编辑框中输入以下内容，保存，使用 XeLaTeX 编译：</p>
<pre><code>\documentclass<span class="matrix">[UTF8]</span><span class="cell">{ctexart}</span>
\begin<span class="cell">{document}</span>
你好，world!
\<span class="keyword">end</span><span class="cell">{document}</span>
</code></pre><p>如果没有意外，你将会看到类似下图的输出结果。</p>
<p><img src="http://ww2.sinaimg.cn/large/818901c1jw1e44g5azwaej20j00kimy3.jpg" alt=""></p>
<p>相较于之前的例子，这份代码只有细微的差异：</p>
<ol>
<li>文档类从 <code>article</code> 变为 <code>ctexart</code>；</li>
<li>增加了文档类选项 <code>UTF8</code>。</li>
</ol>
<p><code>ctex</code> 宏包和文档类的默认配置是为使用简体中文 Windows 系统的用户配置的，在 Linux 或 Unix 系统（包括 OS X）下使用会遇到一点困难。对此，项目组官方给出了一个 wiki 来解释说明。参见：</p>
<p><a href="https://code.google.com/p/ctex-kit/wiki/UnixFonts" target="_blank">https://code.google.com/p/ctex-kit/wiki/UnixFonts</a></p>
<p>对于安装了 MacTeX 的 OS X 系统的用户，应该做如下额外的配置：</p>
<p>打开路径 <code>/usr/local/texlive/2014/texmf-dist/tex/latex/ctex/cfg</code> 编辑文件 <code>ctex.cfg</code> 为以下内容：</p>
<pre><code>\setCJKmainfont<span class="matrix">[BoldFont=STHeiti,ItalicFont=STKaiti]</span><span class="cell">{STSong}</span>
\setCJKsansfont<span class="matrix">[BoldFont=STHeiti]</span><span class="cell">{STXihei}</span>
\setCJKmonofont<span class="cell">{STFangsong}</span>
\setCJKfamilyfont<span class="cell">{stsong}</span><span class="cell">{STSong}</span>
\setCJKfamilyfont<span class="cell">{sthei}</span><span class="cell">{STHeiti}</span>
\setCJKfamilyfont<span class="cell">{stkai}</span><span class="cell">{STKaiti}</span>
\setCJKfamilyfont<span class="cell">{stfs}</span><span class="cell">{STFangsong}</span>
\newcommand<span class="cell">{\songti}</span><span class="cell">{\CJKfamily{stsong}</span>} <span class="comment">% 宋体</span>
\newcommand<span class="cell">{\heiti}</span><span class="cell">{\CJKfamily{sthei}</span>}   <span class="comment">% 黑体</span>
\newcommand<span class="cell">{\kaishu}</span><span class="cell">{\CJKfamily{stkai}</span>}  <span class="comment">% 楷书</span>
\newcommand<span class="cell">{\fangsong}</span><span class="cell">{\CJKfamily{stfs}</span>} <span class="comment">% 仿宋</span>
\endinput
</code></pre><p>在同一个目录下，新建文件 <code>ctexopts.cfg</code>，编辑为以下内容：</p>
<pre><code><span class="command">\ExecuteOptions</span><span class="special">{</span>nofonts<span class="special">}</span>
<span class="command">\ExecuteOptions</span><span class="special">{</span>fntef<span class="special">}</span>

<span class="command">\endinput</span>
</code></pre><p>对于 Linux 的用户，<code>ctexopts.cfg</code> 的修改方式完全一致，<code>ctex.cfg</code> 则略有不同。由于 Linux 发行版众多，使用的字体也不一致，这里没有办法给出一套完整的方案。你可以参考本文后的「查看当前操作系统中的字体」一节，将合适的字体填入即可。</p>
<h2 id=" 老方法——直接调用 _xeCJk_ 宏包 ">老方法——直接调用 xeCJk 宏包</h2>
<p>在 TeXworks 编辑框中输入以下内容，保存，使用 XeLaTeX 编译：</p>
<pre><code>\documentclass<span class="cell">{article}</span>
\usepackage<span class="cell">{xeCJK}</span><span class="comment">% 调用 xeCJK 宏包</span>
\setCJKmainfont<span class="cell">{SimSun}</span><span class="comment">% 设置 CJK 主字体为 SimSun （宋体）</span>
\begin<span class="cell">{document}</span>
你好，world!
\<span class="keyword">end</span><span class="cell">{document}</span>
</code></pre><p>如果一切顺利，你将会在屏幕右边的窗口，看见类似下图的输出结果。<br><img src="http://ww2.sinaimg.cn/large/818901c1jw1e44g5azwaej20j00kimy3.jpg" alt=""></p>
<p>如果你的 TeX 系统提示找不到字体，请换用你的操作系统中可用的中文字体。关于如何寻找你的操作系统中可用的中文字体，请参考本章最后一小节。</p>
<p>除了 “document” 环境中同时出现了中文和英文，和最原始的 Hello, world! 不同点在于，导言区中多出了两条控制序列。他们的作用我已经用注释标出了。</p>
<p>所谓的宏包，就是一系列控制序列的合集。这些控制序列太常用，以至于人们会觉得每次将他们写在导言区太过繁琐，于是将他们打包放在同一个文件中，成为所谓的宏包（台湾方面称之为“巨集套件”）。<code>\usepackage{·}</code>可以用来调用宏包。</p>
<p><code>\setCJKmainfont{·}</code>是定义在 “xeCJK” 宏包中的控制序列，它可以用来设置 CJK 主字体。</p>
<p><strong><em>请注意，TeX 系统对宏包名称和控制序列的大小写是敏感的</em></strong></p>
<h2 id=" 查看当前操作系统中的字体 ">查看当前操作系统中的字体</h2>
<p>按照如下步骤打开系统命令行（*nix 系统请打开终端）：</p>
<ul>
<li>按下<code>&lt;win&gt; + R</code>；</li>
<li>键入<code>cmd</code>, 回车。</li>
</ul>
<p>在系统命令行中输入如下命令：</p>
<pre><code>fc-list <span class="symbol">:lang=zh-cn</span> &gt; <span class="constant">C</span><span class="symbol">:</span>\font_zh-cn.txt
</code></pre><p>（相信使用 *nix 的你，一定知道如何修改上述命令达到你想要的效果）</p>
<p>打开 C 盘根目录下的 <code>C:\font_zh-cn.txt</code> 纯文本文档，里面的内容就是你当前系统可用的全部中文字体，形如：</p>
<p><img src="http://ww1.sinaimg.cn/large/818901c1jw1e44gmvz7yuj20i40actcb.jpg" alt=""></p>
<p>每一个小黑框之间的内容，就对应着一个可用的字体。这些小黑框实际上是换行符，但是由于 Windows 系统的原因，他们没有被正常显示。如果看着不爽，你可以尝试用 TeXworks 打开这个文件查看（放心，能够打开的）。以下是我用 gVim 打开的效果：</p>
<p><img src="http://ww2.sinaimg.cn/large/818901c1jw1e44gpsi9fpj20km0f478v.jpg" alt=""></p>
<p>其中的每一行，都代表着一个可用的字体。其形式如下：</p>
<pre><code><span class="tag">&lt;<span class="title">字体文件路径</span>&gt;</span>: <span class="tag">&lt;<span class="title">字体标示名 1</span>&gt;</span>, <span class="tag">&lt;<span class="title">字体表示名 2</span>&gt;</span>:Style=<span class="tag">&lt;<span class="title">字体类型</span>&gt;</span>
</code></pre><p>我们可以看到图中的倒数第四行</p>
<pre><code><span class="constant">C</span><span class="symbol">:/WINDOWS/fonts/simsun</span>.<span class="symbol">ttc:</span> 宋体,<span class="constant">SimSun</span><span class="symbol">:style=Regular</span>
</code></pre><p>出现了之前文档里调用的字体<code>SimSun</code>，此处表明该字体有两个表示名：<code>宋体</code>和<code>SimSun</code>，我们在<code>\setCJKmainfont{·}</code>中填入任意一个都有同样的效果。</p>
<p>因此，如果之前的文档无法编译通过，请在你的操作系统字体中，选取一个自己喜欢的，将它的字体表示名填入到<code>\setCJKmainfont{·}</code>中去。</p>
<h1 id=" 组织你的文章 ">组织你的文章</h1>
<p>由于新的中英混排方法的引入，这里对于每一个效果提供两份代码（如果有必要）。如果没有特别的需求，应当使用新方法。</p>
<h2 id=" 作者、标题、日期 ">作者、标题、日期</h2>
<p>保存并用 XeLaTeX 编译如下文档，查看效果：</p>
<p>新方法：</p>
<pre><code><span class="command">\documentclass</span><span class="special">[</span>UTF8<span class="special">]</span><span class="special">{</span>ctexart<span class="special">}</span>
<span class="command">\title</span><span class="special">{</span>你好，world!<span class="special">}</span>
<span class="command">\author</span><span class="special">{</span>Liam<span class="special">}</span>
<span class="command">\date</span><span class="special">{</span><span class="command">\today</span><span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>document<span class="special">}</span>
<span class="command">\maketitle</span>
你好，world!
<span class="command">\end</span><span class="special">{</span>document<span class="special">}</span>
</code></pre><p>旧方法：</p>
<pre><code>\documentclass{article}
%
% 设置中文字体
% <span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span>
\usepackage[<span class="constant">SlantFont</span>,<span class="constant">BoldFont</span>,<span class="constant">CJKchecksingle</span>,<span class="constant">CJKnumber</span>]{xeCJK}
\newcommand\fontnamehei{<span class="constant">SimHei</span>}% 黑体
\newcommand\fontnamesong{<span class="constant">SimSun</span>}% 宋体
\newcommand\fontnamekai{<span class="constant">KaiTi_GB2312</span>}% 楷体
\newcommand\fontnameyahei{<span class="constant">Yahei</span> <span class="constant">Mono</span>}% 雅黑
\defaultfontfeatures{<span class="constant">Mapping</span>=tex-text}
\setCJKmainfont[<span class="constant">BoldFont</span>=\fontnamehei,<span class="constant">ItalicFont</span>=\fontnamekai]{\fontnamesong}
\setCJKmonofont{\fontnameyahei}
\setCJKsansfont[<span class="constant">BoldFont</span>=\fontnamehei]{\fontnameyahei}
\<span class="constant">XeTeXlinebreaklocale</span> <span class="string">"zh"</span>          % 使用中文的换行风格
\<span class="constant">XeTeXlinebreakskip</span> = 0pt plus <span class="number">1</span>pt  % 调整换行逻辑的弹性大小
%
% 设置标题、作者、日期
% <span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span>
\title{你好，world!}
\author{<span class="constant">Liam</span>}
\date{\today}
\<span class="keyword">begin</span>{document}
\maketitle
你好，world!
\<span class="keyword">end</span>{document}
</code></pre><p>导言区复杂了很多，但和之前的文档主要的区别只有两处（新方法只有一处，此处第 2 条）。</p>
<ol>
<li>深入定义了中文字体以及断行逻辑；<ul>
<li>调用<code>xeCJK</code>宏包的时候，添加了一些可选参数；</li>
<li>使用<code>\newcommand</code>命令，将系统字体名映射为相应的命令，方便维护；</li>
<li>在定义主字体的时候，用<code>[]</code>添加了一些可选参数，增强功能。</li>
</ul>
</li>
<li>定义了 标题、作者、日期。</li>
</ol>
<p>在<code>document</code>环境中，除了原本的<code>你好，world!</code>，还多了一个控制序列<code>maketitle</code>。这个控制序列能将在导言区中定义的 标题、作者、日期 按照预定的格式展现出来。</p>
<blockquote>
<p>使用<code>titling</code>宏包可以修改上述默认格式。参考<a href="http://texdoc.net/texmf-dist/doc/latex/titling/titling.pdf" target="_blank">TeXdoc</a>.</p>
</blockquote>
<h2 id=" 章节和段落 ">章节和段落</h2>
<p>保存并用 XeLaTeX 编译如下文档，查看效果：</p>
<p>新方法：</p>
<pre><code>\documentclass[UTF8]{ctexart}
\title{你好，world!}
\author{Liam}
\<span class="type">date</span>{\today}
\begin{document}
\maketitle
\section{你好中国}
中国在 East Asia.
\subsection{Hello Beijing}
北京是 capital <span class="keyword">of</span> China.
\subsubsection{Hello Dongcheng District}
\<span class="property">paragraph</span>{Tian'anmen Square}
<span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">the</span> center <span class="keyword">of</span> Beijing
\subparagraph{Chairman Mao}
<span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">the</span> center <span class="keyword">of</span> 天安门广场。
\subsection{Hello 山东}
\<span class="property">paragraph</span>{山东大学} <span class="keyword">is</span> one <span class="keyword">of</span> <span class="keyword">the</span> best university <span class="keyword">in</span> 山东。
\<span class="keyword">end</span>{document}
</code></pre><p>旧方法：</p>
<pre><code>\documentclass{article}
%
% 设置中文字体
% <span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span>
\usepackage[<span class="constant">SlantFont</span>,<span class="constant">BoldFont</span>,<span class="constant">CJKchecksingle</span>,<span class="constant">CJKnumber</span>]{xeCJK}
\newcommand\fontnamehei{<span class="constant">SimHei</span>}
\newcommand\fontnamesong{<span class="constant">SimSun</span>}
\newcommand\fontnamekai{<span class="constant">KaiTi_GB2312</span>}%<span class="constant">KaiTi</span>
\newcommand\fontnameyahei{<span class="constant">Yahei</span> <span class="constant">Mono</span>}
\defaultfontfeatures{<span class="constant">Mapping</span>=tex-text}
\setCJKmainfont[<span class="constant">BoldFont</span>=\fontnamehei,<span class="constant">ItalicFont</span>=\fontnamekai]{\fontnamesong}
\setCJKmonofont{\fontnameyahei}
\setCJKsansfont[<span class="constant">BoldFont</span>=\fontnamehei]{\fontnameyahei}
\<span class="constant">XeTeXlinebreaklocale</span> <span class="string">"zh"</span>          % 使用中文的换行风格
\<span class="constant">XeTeXlinebreakskip</span> = 0pt plus <span class="number">1</span>pt  % 调整换行逻辑的弹性大小
%
% 设置标题、作者、日期
% <span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span>
\title{你好，world!}
\author{<span class="constant">Liam</span>}
\date{\today}
\<span class="keyword">begin</span>{document}
\maketitle
\section{你好中国}
中国在<span class="constant">East</span> <span class="constant">Asia</span>.
\subsection{<span class="constant">Hello</span> <span class="constant">Beijing</span>}
北京是 capital of <span class="constant">China</span>.
\subsubsection{<span class="constant">Hello</span> <span class="constant">Dongcheng</span> <span class="constant">District</span>}
\paragraph{<span class="constant">Tian</span><span class="string">'anmen Square}
is in the center of Beijing
\subparagraph{Chairman Mao}
is in the center of 天安门广场。
\subsection{Hello 山东}
\paragraph{山东大学} is one of the best university in 山东。
\end{document}</span>
</code></pre><p>在文档类 <code>article</code>/<code>ctexart</code> 中，定义了五个控制序列来调整行文组织结构。他们分别是</p>
<ul>
<li><code>\section{·}</code></li>
<li><code>\subsection{·}</code></li>
<li><code>\subsubsection{·}</code></li>
<li><code>\paragraph{·}</code></li>
<li><code>\subparagraph{·}</code></li>
</ul>
<blockquote>
<p>在<code>report</code>/<code>ctexrep</code>中，还有<code>\chapter{·}</code>；在文档类<code>book</code>/<code>ctexbook</code>中，还定义了<code>\part{·}</code>。</p>
</blockquote>
<h2 id=" 插入目录 ">插入目录</h2>
<p>在上一节的文档中，找到<code>\maketitle</code>，在它的下面插入控制序列<code>\tableofcontents</code>，保存并用 XeLaTeX 编译<strong>两次</strong>，观察效果：</p>
<p>新方法：</p>
<pre><code>\documentclass[UTF8]{ctexart}
\title{你好，world!}
\author{Liam}
\<span class="type">date</span>{\today}
\begin{document}
\maketitle
\tableofcontents
\section{你好中国}
中国在 East Asia.
\subsection{Hello Beijing}
北京是 capital <span class="keyword">of</span> China.
\subsubsection{Hello Dongcheng District}
\<span class="property">paragraph</span>{Tian'anmen Square}
<span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">the</span> center <span class="keyword">of</span> Beijing
\subparagraph{Chairman Mao}
<span class="keyword">is</span> <span class="keyword">in</span> <span class="keyword">the</span> center <span class="keyword">of</span> 天安门广场。
\subsection{Hello 山东}
\<span class="property">paragraph</span>{山东大学} <span class="keyword">is</span> one <span class="keyword">of</span> <span class="keyword">the</span> best university <span class="keyword">in</span> 山东。
\<span class="keyword">end</span>{document}
</code></pre><p>旧方法：</p>
<pre><code>\documentclass{article}
%
% 设置中文字体
% <span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span>
\usepackage[<span class="constant">SlantFont</span>,<span class="constant">BoldFont</span>,<span class="constant">CJKchecksingle</span>,<span class="constant">CJKnumber</span>]{xeCJK}
\newcommand\fontnamehei{<span class="constant">SimHei</span>}
\newcommand\fontnamesong{<span class="constant">SimSun</span>}
\newcommand\fontnamekai{<span class="constant">KaiTi_GB2312</span>}%<span class="constant">KaiTi</span>
\newcommand\fontnameyahei{<span class="constant">Yahei</span> <span class="constant">Mono</span>}
\defaultfontfeatures{<span class="constant">Mapping</span>=tex-text}
\setCJKmainfont[<span class="constant">BoldFont</span>=\fontnamehei,<span class="constant">ItalicFont</span>=\fontnamekai]{\fontnamesong}
\setCJKmonofont{\fontnameyahei}
\setCJKsansfont[<span class="constant">BoldFont</span>=\fontnamehei]{\fontnameyahei}
\<span class="constant">XeTeXlinebreaklocale</span> <span class="string">"zh"</span>          % 使用中文的换行风格
\<span class="constant">XeTeXlinebreakskip</span> = 0pt plus <span class="number">1</span>pt  % 调整换行逻辑的弹性大小
%
% 设置标题、作者、日期
% <span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span>
\title{你好，world!}
\author{<span class="constant">Liam</span>}
\date{\today}
\<span class="keyword">begin</span>{document}
\maketitle
\tableofcontents
\section{你好中国}
中国在<span class="constant">East</span> <span class="constant">Asia</span>.

中国在<span class="constant">East</span> <span class="constant">Asia</span>.
\subsection{<span class="constant">Hello</span> <span class="constant">Beijing</span>}
北京是 capital of <span class="constant">China</span>.
\subsubsection{<span class="constant">Hello</span> <span class="constant">Dongcheng</span> <span class="constant">District</span>}
\paragraph{<span class="constant">Tian</span><span class="string">'anmen Square}
is in the center of Beijing
\subparagraph{Chairman Mao}
is in the center of 天安门广场。
\subsection{Hello 山东}
\paragraph{山东大学} is one of the best university in 山东。
\end{document}</span>
</code></pre><blockquote>
<p>试试交换<code>\maketitle</code>和<code>\tableofcontents</code>的顺序，看看会发生什么。</p>
</blockquote>
<p>请注意，在“你好中国”这一节中，两次“中国在 East Asia.”中夹有一个空行，但输出却只有一个换行并没有空行。这是因为 LaTeX 将一个换行当做是一个简单的空格来处理，如果需要换行另起一段，则需要用两个换行（一个空行）来实现。</p>
<h1 id=" 插入数学公式 ">插入数学公式</h1>
<p>首先恭喜你看到这里。如果前面的几个文档你都认真编译过了，那么你已经可以胜任许多文档的排版工作。下面我们进入 LaTeX 最为犀利的部分。</p>
<p>这部分的演示中，为了节省篇幅，将取消导言区中中文支持的部分。在实际使用中，你只需要将导言区中的相关部分加上，就可以同时使用中文，并编写数学公式了——这并不冲突。</p>
<p>为了使用 AMS-LaTeX 提供的数学功能，我们需要在导言区加载<code>amsmath</code>宏包：</p>
<pre><code>\usepackage<span class="list">{amsmath}</span>
</code></pre><h2 id=" 数学模式 ">数学模式</h2>
<p>LaTeX 的数学模式有两种：行内模式 (inline) 和行间模式 (display)。前者在正文的行文中，插入数学公式；后者独立排列单独成行。</p>
<p>在行文中，使用<code>$ ... $</code>可以插入行内公式，使用<code>\[ ... \]</code>可以插入行间公式，如果需要对行间公式进行编号，可以使用<code>equation</code>环境：<br>    \begin{equaion}<br>    …<br>    \end{equation}</p>
<blockquote>
<p>行内公式也可以使用<code>\(...\)</code>来插入，略嫌麻烦。无编号的行间公式也可以使用<code>$$ ... $$</code>来插入，但是这样做会改变行文的默认行间距，不推荐。</p>
</blockquote>
<h2 id=" 上下标 ">上下标</h2>
<p>示例代码（请保存后，使用 XeLaTeX 编译，查看效果）：</p>
<pre><code>\documentclass{article}
%
% 数学环境支持
% <span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span>
\usepackage{amsmath}
\<span class="keyword">begin</span>{document}
<span class="constant">Einstein</span> <span class="string">'s $E=mc^2$.

\[ E=mc^2. \]

\begin{equation}
E=mc^2.
\end{equation}
\end{document}</span>
</code></pre><p>值得一提的是，行内公式和行间公式对标点的要求是不同的。行内公式的标点，应该放在数学模式的限定符之外，而行间公式则应该放在数学模式限定符之内。</p>
<p>在数学模式中，需要表示上标，可以使用<code>^</code>来实现（下标则是<code>_</code>）。<strong>它默认只作用于之后的一个字符</strong>，如果想对连续的几个字符起作用，请将这些字符用花括号<code>{}</code>括起来，例如：</p>
<pre><code><span class="command">\[</span> z = r<span class="command">\cdot</span> e^<span class="special">{</span>2<span class="command">\pi</span> i<span class="special">}</span>. <span class="command">\]</span>
</code></pre><h2 id=" 根式与分式 ">根式与分式</h2>
<p>根式用<code>\sqrt{·}</code>来表示，分式用<code>\frac{·}{·}</code>来表示（第一个参数为分子，第二个为分母）。</p>
<p>示例代码（请保存后，使用 XeLaTeX 编译，查看效果）：</p>
<pre><code>\documentclass{article}
%
% 数学环境支持
% <span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span><span class="string">%%%</span>
\usepackage{amsmath}
\<span class="keyword">begin</span>{document}
<span class="variable">$\</span>sqrt{x}<span class="variable">$,</span> <span class="variable">$\</span>frac{<span class="number">1</span>}{<span class="number">2</span>}<span class="variable">$.</span>

\[ \sqrt{x}, \]

\[ \frac{<span class="number">1</span>}{<span class="number">2</span>}. \]
\<span class="keyword">end</span>{document}
</code></pre><p>可以发现，在行间公式和行内公式中，分式的输出效果是有差异的。如果要强制行内模式的分式显示为行间模式的大小，可以使用<code>\dfrac</code>, 反之可以使用<code>\tfrac</code>。</p>
<h2 id=" 运算符 ">运算符</h2>
<p>一些小的运算符，可以在数学模式下直接输入；另一些需要用控制序列生成，如</p>
<pre><code><span class="command">\[</span> <span class="command">\pm</span><span class="command">\;</span> <span class="command">\times</span> <span class="command">\;</span> <span class="command">\div</span><span class="command">\;</span> <span class="command">\cdot</span><span class="command">\;</span> <span class="command">\cap</span><span class="command">\;</span> <span class="command">\cup</span><span class="command">\;</span>
<span class="command">\geq</span><span class="command">\;</span> <span class="command">\leq</span><span class="command">\;</span> <span class="command">\neq</span><span class="command">\;</span> <span class="command">\approx</span> <span class="command">\;</span> <span class="command">\equiv</span> <span class="command">\]</span>
</code></pre><p>连加、连乘、极限、积分等大型运算符分别用<code>\sum</code>, <code>\prod</code>, <code>\lim</code>, <code>\int</code>生成。他们的上下标在行内公式中被压缩，以适应行高。我们可以用<code>\limits</code>和<code>\nolimits</code>来强制显式地指定是否压缩这些上下标。例如：</p>
<pre><code><span class="formula">$ <span class="command">\sum</span>_<span class="special">{</span>i=1<span class="special">}</span>^n i<span class="command">\quad</span> <span class="command">\prod</span>_<span class="special">{</span>i=1<span class="special">}</span>^n $</span>
<span class="formula">$ <span class="command">\sum</span><span class="command">\limits</span> _<span class="special">{</span>i=1<span class="special">}</span>^n i<span class="command">\quad</span> <span class="command">\prod</span><span class="command">\limits</span> _<span class="special">{</span>i=1<span class="special">}</span>^n $</span>
<span class="command">\[</span> <span class="command">\lim</span>_<span class="special">{</span>x<span class="command">\to</span>0<span class="special">}</span>x^2 <span class="command">\quad</span> <span class="command">\int</span>_a^b x^2 dx <span class="command">\]</span>
<span class="command">\[</span> <span class="command">\lim</span><span class="command">\nolimits</span> _<span class="special">{</span>x<span class="command">\to</span>0<span class="special">}</span>x^2<span class="command">\quad</span> <span class="command">\int</span><span class="command">\nolimits</span>_a^b x^2 dx <span class="command">\]</span>
</code></pre><p>多重积分可以使用<code>\iint</code>, <code>\iiint</code>, <code>\iiiint</code>, <code>\idotsint</code> 等命令输入。</p>
<pre><code><span class="command">\[</span> <span class="command">\iint</span><span class="command">\quad</span> <span class="command">\iiint</span><span class="command">\quad</span> <span class="command">\iiiint</span><span class="command">\quad</span> <span class="command">\idotsint</span> <span class="command">\]</span>
</code></pre><h2 id=" 分隔符 ">分隔符</h2>
<p>各种括号用<code>()</code>, <code>[]</code>, <code>\{\}</code>, <code>\langle\rangle</code> 等命令表示；注意花括号通常用来输入命令和环境的参数，所以在数学公式中它们前面要加<code>\</code>。因为 LaTeX 中<code>|</code>和<code>\|</code>的应用过于随意，amsmath 宏包推荐用<code>\lvert\rvert</code>和<code>\lVert\rVert</code>取而代之。</p>
<p>为了调整这些分隔符的大小，amsmath 宏包推荐使用<code>\big</code>, <code>\Big</code>, <code>\bigg</code>, <code>\Bigg</code>放在上述括号前面调整大小。</p>
<pre><code><span class="command">\[</span> <span class="command">\Bigg</span>(<span class="command">\bigg</span>(<span class="command">\Big</span>(<span class="command">\big</span>((x)<span class="command">\big</span>)<span class="command">\Big</span>)<span class="command">\bigg</span>)<span class="command">\Bigg</span>) <span class="command">\]</span>
<span class="command">\[</span> <span class="command">\Bigg</span><span class="special">[</span><span class="command">\bigg</span><span class="special">[</span><span class="command">\Big</span><span class="special">[</span><span class="command">\big</span><span class="special">[</span><span class="special">[</span>x<span class="special">]</span><span class="command">\big</span><span class="special">]</span><span class="command">\Big</span><span class="special">]</span><span class="command">\bigg</span><span class="special">]</span><span class="command">\Bigg</span><span class="special">]</span> <span class="command">\]</span>
<span class="command">\[</span> <span class="command">\Bigg</span> <span class="command">\{</span><span class="command">\bigg</span> <span class="command">\{</span><span class="command">\Big</span> <span class="command">\{</span><span class="command">\big</span> <span class="command">\{</span><span class="command">\{</span>x<span class="command">\}</span><span class="command">\big</span> <span class="command">\}</span><span class="command">\Big</span> <span class="command">\}</span><span class="command">\bigg</span> <span class="command">\}</span><span class="command">\Bigg</span><span class="command">\}</span> <span class="command">\]</span>
<span class="command">\[</span> <span class="command">\Bigg</span><span class="command">\langle</span><span class="command">\bigg</span><span class="command">\langle</span><span class="command">\Big</span><span class="command">\langle</span><span class="command">\big</span><span class="command">\langle</span><span class="command">\langle</span> x
<span class="command">\rangle</span><span class="command">\big</span><span class="command">\rangle</span><span class="command">\Big</span><span class="command">\rangle</span><span class="command">\bigg</span><span class="command">\rangle</span><span class="command">\Bigg</span><span class="command">\rangle</span> <span class="command">\]</span>
<span class="command">\[</span> <span class="command">\Bigg</span><span class="command">\lvert</span><span class="command">\bigg</span><span class="command">\lvert</span><span class="command">\Big</span><span class="command">\lvert</span><span class="command">\big</span><span class="command">\lvert</span><span class="command">\lvert</span> x
<span class="command">\rvert</span><span class="command">\big</span><span class="command">\rvert</span><span class="command">\Big</span><span class="command">\rvert</span><span class="command">\bigg</span><span class="command">\rvert</span><span class="command">\Bigg</span><span class="command">\rvert</span> <span class="command">\]</span>
<span class="command">\[</span> <span class="command">\Bigg</span><span class="command">\lVert</span><span class="command">\bigg</span><span class="command">\lVert</span><span class="command">\Big</span><span class="command">\lVert</span><span class="command">\big</span><span class="command">\lVert</span><span class="command">\lVert</span> x
<span class="command">\rVert</span><span class="command">\big</span><span class="command">\rVert</span><span class="command">\Big</span><span class="command">\rVert</span><span class="command">\bigg</span><span class="command">\rVert</span><span class="command">\Bigg</span><span class="command">\rVert</span> <span class="command">\]</span>
</code></pre><p><img src="http://ww2.sinaimg.cn/large/818901c1jw1e44jk66wwfj204x0a4aa0.jpg" alt=""></p>
<h2 id=" 省略号 ">省略号</h2>
<p>省略号用<code>\dots</code>, <code>\cdots</code>, <code>\vdots</code>, <code>\ddots</code> 等命令表示。<code>\dots</code> 和<code>\cdots</code>的纵向位置不同，前者一般用于有下标的序列。</p>
<pre><code><span class="command">\[</span> x_1,x_2,<span class="command">\dots</span> ,x_n<span class="command">\quad</span> 1,2,<span class="command">\cdots</span> ,n<span class="command">\quad</span>
<span class="command">\vdots</span><span class="command">\quad</span> <span class="command">\ddots</span> <span class="command">\]</span>
</code></pre><h2 id=" 矩阵 ">矩阵</h2>
<p>amsmath 的<code>pmatrix</code>, <code>bmatrix</code>, <code>Bmatrix</code>, <code>vmatrix</code>, <code>Vmatrix</code> 等环境可以在矩阵两边加上各种分隔符。</p>
<pre><code><span class="command">\[</span> <span class="command">\begin</span><span class="special">{</span>pmatrix<span class="special">}</span> a<span class="special">&amp;</span>b<span class="command">\\</span>c<span class="special">&amp;</span>d <span class="command">\end</span><span class="special">{</span>pmatrix<span class="special">}</span> <span class="command">\quad</span>
<span class="command">\begin</span><span class="special">{</span>bmatrix<span class="special">}</span> a<span class="special">&amp;</span>b<span class="command">\\</span>c<span class="special">&amp;</span>d <span class="command">\end</span><span class="special">{</span>bmatrix<span class="special">}</span> <span class="command">\quad</span>
<span class="command">\begin</span><span class="special">{</span>Bmatrix<span class="special">}</span> a<span class="special">&amp;</span>b<span class="command">\\</span>c<span class="special">&amp;</span>d <span class="command">\end</span><span class="special">{</span>Bmatrix<span class="special">}</span> <span class="command">\quad</span>
<span class="command">\begin</span><span class="special">{</span>vmatrix<span class="special">}</span> a<span class="special">&amp;</span>b<span class="command">\\</span>c<span class="special">&amp;</span>d <span class="command">\end</span><span class="special">{</span>vmatrix<span class="special">}</span> <span class="command">\quad</span>
<span class="command">\begin</span><span class="special">{</span>Vmatrix<span class="special">}</span> a<span class="special">&amp;</span>b<span class="command">\\</span>c<span class="special">&amp;</span>d <span class="command">\end</span><span class="special">{</span>Vmatrix<span class="special">}</span> <span class="command">\]</span>
</code></pre><p>效果图：</p>
<p><img src="http://ww2.sinaimg.cn/large/818901c1jw1e44jpqbz2aj208k024744.jpg" alt=""></p>
<p>使用<code>smallmatrix</code>环境，可以生成行内公式的小矩阵。</p>
<pre><code><span class="constant">Marry</span> has a little matrix <span class="variable">$ </span>( \<span class="keyword">begin</span>{smallmatrix} a&amp;b\\c&amp;d \<span class="keyword">end</span>{smallmatrix} ) <span class="variable">$.</span>
</code></pre><p>效果图：</p>
<p><img src="http://ww3.sinaimg.cn/large/818901c1jw1e44jsd9ldbj20680200si.jpg" alt=""></p>
<h2 id=" 多行公式 ">多行公式</h2>
<p>有的公式特别长，我们需要手动为他们换行；有几个公式是一组，我们需要将他们放在一起；还有些类似分段函数，我们需要给它加上一个左边的花括号。</p>
<h3 id=" 长公式 ">长公式</h3>
<h4 id=" 不对齐 ">不对齐</h4>
<p>无须对齐的长公式可以使用<code>multline</code>环境。</p>
<pre><code>\begin<span class="cell">{multline}</span>
x = a+b+c+<span class="cell">{}</span> \\
d+e+f+g
\<span class="keyword">end</span><span class="cell">{multline}</span>
</code></pre><p>效果：</p>
<p><img src="http://ww2.sinaimg.cn/large/818901c1jw1e44jzfychej20dv02sjr6.jpg" alt=""></p>
<p>如果不需要编号，可以使用<code>multiline*</code>环境代替。</p>
<h4 id=" 对齐 ">对齐</h4>
<p>需要对齐的公式，可以使用<code>aligned</code><em>次环境</em>来实现，它必须包含在数学环境之内。</p>
<pre><code><span class="command">\[</span><span class="command">\begin</span><span class="special">{</span>aligned<span class="special">}</span>
x =<span class="special">{</span><span class="special">}</span><span class="special">&amp;</span> a+b+c+<span class="special">{</span><span class="special">}</span> <span class="command">\\</span>
<span class="special">&amp;</span>d+e+f+g
<span class="command">\end</span><span class="special">{</span>aligned<span class="special">}</span><span class="command">\]</span>
</code></pre><p>效果图：</p>
<p><img src="http://ww3.sinaimg.cn/large/818901c1jw1e44k2acde4j205g02ft8h.jpg" alt=""></p>
<h3 id=" 公式组 ">公式组</h3>
<p>无需对齐的公式组可以使用<code>gather</code>环境，需要对齐的公式组可以使用<code>aligned</code>环境。他们都带有编号，如果不需要编号可以使用带星花的版本。</p>
<pre><code><span class="command">\begin</span><span class="special">{</span>gather<span class="special">}</span>
a = b+c+d <span class="command">\\</span>
x = y+z
<span class="command">\end</span><span class="special">{</span>gather<span class="special">}</span>
<span class="command">\begin</span><span class="special">{</span>align<span class="special">}</span>
a <span class="special">&amp;</span>= b+c+d <span class="command">\\</span>
x <span class="special">&amp;</span>= y+z
<span class="command">\end</span><span class="special">{</span>align<span class="special">}</span>
</code></pre><p>效果：</p>
<p><img src="http://ww4.sinaimg.cn/large/818901c1jw1e44k5od3xaj209u04lweb.jpg" alt=""></p>
<h3 id=" 分段函数 ">分段函数</h3>
<p>分段函数可以用<code>cases</code>次环境来实现，它必须包含在数学环境之内。</p>
<pre><code><span class="command">\[</span> y=<span class="command">\ </span>begin<span class="special">{</span>cases<span class="special">}</span>
-x,<span class="command">\quad</span> x<span class="command">\leq</span> 0 <span class="command">\\</span>
x,<span class="command">\quad</span> x&gt;0
<span class="command">\end</span><span class="special">{</span>cases<span class="special">}</span> <span class="command">\]</span>
</code></pre><p>效果图：</p>
<p><img src="http://ww1.sinaimg.cn/large/818901c1jw1e44k7zto1wj205o01pt8i.jpg" alt=""></p>
<h1 id=" 插入图片和表格 ">插入图片和表格</h1>
<h2 id=" 图片 ">图片</h2>
<p>在 LaTeX 中插入图片，有很多种方式。最好用的应当属利用<code>graphicx</code>宏包提供的<code>\includegraphics</code>命令。比如你在你的 TeX 源文件同目录下，有名为 a.jpg 的图片，你可以用这样的方式将它插入到输出文档中：</p>
<pre><code>\documentclass<span class="cell">{article}</span>
\usepackage<span class="cell">{graphicx}</span>
\begin<span class="cell">{document}</span>
\includegraphics<span class="cell">{a.jpg}</span>
\<span class="keyword">end</span><span class="cell">{document}</span>
</code></pre><p>图片可能很大，超过了输出文件的纸张大小，或者干脆就是你自己觉得输出的效果不爽。这时候你可以用<code>\includegraphics</code>控制序列的可选参数来控制。比如</p>
<pre><code><span class="command">\includegraphics</span><span class="special">[</span>width = .8<span class="command">\textwidth</span><span class="special">]</span><span class="special">{</span>a.jpg<span class="special">}</span>
</code></pre><p>这样图片的宽度会被缩放至页面宽度的百分之八十，图片的总高度会按比例缩放。</p>
<blockquote>
<p><code>\includegraphics</code>控制序列还有若干其他的可选参数可供使用，一般并用不到。感兴趣的话，可以去查看<a href="http://texdoc.net/texmf-dist/doc/latex/graphics/graphicx.pdf" target="_blank">该宏包的文档</a>。</p>
</blockquote>
<h2 id=" 表格 ">表格</h2>
<p><code>tabular</code>环境提供了最简单的表格功能。它用<code>\hline</code>命令表示横线，<code>|</code>表示竖线；用<code>&amp;</code>来分列，用<code>\\</code>来换行；每列可以采用居中、居左、居右等横向对齐方式，分别用<code>l</code>、<code>c</code>、<code>r</code> 来表示。</p>
<pre><code><span class="command">\begin</span><span class="special">{</span>tabular<span class="special">}</span><span class="special">{</span>|l|c|r|<span class="special">}</span>
 <span class="command">\hline</span>
操作系统<span class="special">&amp;</span> 发行版<span class="special">&amp;</span> 编辑器<span class="command">\\</span>
 <span class="command">\hline</span>
Windows <span class="special">&amp;</span> MikTeX <span class="special">&amp;</span> TexMakerX <span class="command">\\</span>
 <span class="command">\hline</span>
Unix/Linux <span class="special">&amp;</span> teTeX <span class="special">&amp;</span> Kile <span class="command">\\</span>
 <span class="command">\hline</span>
Mac OS <span class="special">&amp;</span> MacTeX <span class="special">&amp;</span> TeXShop <span class="command">\\</span>
 <span class="command">\hline</span>
通用<span class="special">&amp;</span> TeX Live <span class="special">&amp;</span> TeXworks <span class="command">\\</span>
 <span class="command">\hline</span>
<span class="command">\end</span><span class="special">{</span>tabular<span class="special">}</span>
</code></pre><p>效果：</p>
<p><img src="http://ww1.sinaimg.cn/large/818901c1jw1e44ku9n696j20cj05haad.jpg" alt=""></p>
<h2 id=" 浮动体 ">浮动体</h2>
<p>插图和表格通常需要占据大块空间，所以在文字处理软件中我们经常需要调整他们的位置。<code>figure</code>和<code>table</code>环境可以自动完成这样的任务；这种自动调整位置的环境称作浮动体 (float)。我们以<code>figure</code>为例。</p>
<pre><code><span class="command">\begin</span><span class="special">{</span>figure<span class="special">}</span><span class="special">[</span>htbp<span class="special">]</span>
<span class="command">\centering</span>
<span class="command">\includegraphics</span><span class="special">{</span>a.jpg<span class="special">}</span>
<span class="command">\caption</span><span class="special">{</span>有图有真相<span class="special">}</span>
<span class="command">\label</span><span class="special">{</span>fig:myphoto<span class="special">}</span>
<span class="command">\end</span><span class="special">{</span>figure<span class="special">}</span>
</code></pre><p>“htbp” 选项用来指定插图的理想位置，这几个字母分别代表 here, top, bottom, float page，也就是就这里、页顶、页尾、浮动页 (专门放浮动体的单独页面) 。<code>\centering</code>用来使插图居中；<code>\caption</code>命令设置插图标题，LaTeX 会自动给浮动体的标题加上编号。注意<code>\label</code>应该放在标题之后。</p>
<blockquote>
<p>图片和表格的各种特殊效果，限于篇幅此处无法详叙。请查看最后一章推荐的文档。</p>
</blockquote>
<h1 id=" 版面设置 ">版面设置</h1>
<h2 id=" 页边距 ">页边距</h2>
<p>设置页边距，推荐使用<code>geometry</code>宏包。可以在<a href="http://texdoc.net/texmf-dist/doc/latex/geometry/geometry.pdf" target="_blank">这里</a>查看它的说明文档。</p>
<p>比如我希望，将纸张的长度设置为 20cm、宽度设置为 15cm、左边距 1cm、右边距 2cm、上边距 3cm、下边距 4cm，可以在导言区加上这样几行：</p>
<pre><code>\usepackage<span class="list">{geometry}</span>
\geometry<span class="list">{papersize={20cm,15cm}</span>}
\geometry<span class="list">{left=1cm,right=2cm,top=3cm,bottom=4cm}</span>
</code></pre><h2 id=" 页眉页脚 ">页眉页脚</h2>
<p>设置页眉页脚，推荐使用<code>fancyhdr</code>宏包。可以在<a href="http://texdoc.net/texmf-dist/doc/latex/fancyhdr/fancyhdr.pdf" target="_blank">这里</a>查看它的说明文档。</p>
<p>比如我希望，在页眉左边写上我的名字，中间写上今天的日期，右边写上我的电话；页脚的正中写上页码；页眉和正文直接有一道宽为 0.4pt 的横线分割，可以在导言区加上如下几行：</p>
<pre><code><span class="command">\usepackage</span><span class="special">{</span>fancyhdr<span class="special">}</span>
<span class="command">\pagestyle</span><span class="special">{</span>fancy<span class="special">}</span>
<span class="command">\lhead</span><span class="special">{</span><span class="command">\author</span><span class="special">}</span>
<span class="command">\chead</span><span class="special">{</span><span class="command">\date</span><span class="special">}</span>
<span class="command">\rhead</span><span class="special">{</span>152xxxxxxxx<span class="special">}</span>
<span class="command">\lfoot</span><span class="special">{</span><span class="special">}</span>
<span class="command">\cfoot</span><span class="special">{</span><span class="command">\thepage</span><span class="special">}</span>
<span class="command">\rfoot</span><span class="special">{</span><span class="special">}</span>
<span class="command">\renewcommand</span><span class="special">{</span><span class="command">\headrulewidth</span><span class="special">}</span><span class="special">{</span>0.4pt<span class="special">}</span>
<span class="command">\renewcommand</span><span class="special">{</span><span class="command">\headwidth</span><span class="special">}</span><span class="special">{</span><span class="command">\textwidth</span><span class="special">}</span>
<span class="command">\renewcommand</span><span class="special">{</span><span class="command">\footrulewidth</span><span class="special">}</span><span class="special">{</span>0pt<span class="special">}</span>
</code></pre><h2 id=" 首行缩进 ">首行缩进</h2>
<p>中国人写文章，习惯每一段的段首都空出两个中文汉字的长度。美国人没有这个习惯，他们每一小节的段首都顶格。为了解决这个问题，我们可以在导言区调用<code>\usepackage{indentfirst}</code>.</p>
<p>就算是这样，首行缩进的长度，仍然不符合中国人的习惯。我们可以在导言区添加这样的控制序列<code>\setlength{\parindent}{2.45em}</code>来调整首行缩进的大小。这里的 2.45em 是中文小四号字大小两个中文字的长度。</p>
<h2 id=" 行间距 ">行间距</h2>
<p>我们可以通过<code>setspace</code>宏包提供的命令来调整行间距。比如在导言区添加如下内容，可以将行距设置为 1.5 倍：</p>
<pre><code><span class="command">\usepackage</span><span class="special">{</span>setspace<span class="special">}</span>
<span class="command">\onehalfspacing</span>
</code></pre><p>具体可以查看该宏包的<a href="http://texdoc.net/texmf-dist/doc/latex/setspace/README" target="_blank">文档</a>。</p>
<h2 id=" 段间距 ">段间距</h2>
<p>我们可以通过修改计数器<code>\parskip</code>的值来调整段间距。例如在导言区添加以下内容</p>
<pre><code>\addtolength<span class="list">{\parskip}</span><span class="list">{.4em}</span>
</code></pre><p>则可以在原有的基础上，增加段间距 0.4em. 如果需要减小段间距，只需将该数值改为负值即可。</p>
<h1 id="TeX_ 家族 ">TeX 家族</h1>
<p>恭喜你终于看到了这里。如果你认真完成了上面所有的练习，并琢磨了其中的意义，相信你已经可以用 LaTeX 排版出漂亮的文档了。现在我们说一点历史，帮助你更好地理解 TeX 这个系统。</p>
<p>带有 TeX 的词，仅仅是本文就已经提到了 TeX, LaTeX, XeLaTeX. 通常中国学生面对不了解意思的一群形近单词，都会有一种“本能的恐惧”（笑~）。<br>因此，“大神们”在为新手介绍 TeX 的时候，如果互相争论 “XXTeX 比 YYTeX 好”或者是“XXTeX 的 YYTeX 如何如何”，往往会蹦出下面这些带有 TeX 的词汇：<br>TeX, pdfTeX, XeTeX, LuaTeX, LaTeX, pdfLaTeX, XeLaTeX …</p>
<p>事实上，这部分的内容太过复杂，我自己的了解也实在有限。所以下面这部分的内容也只能是对我了解到的知识的一个概括，甚至可能有些许谬误。所以大家只需要将这部分的内容当做是一个参考就可以了。</p>
<h2 id="TeX_-_LaTeX">TeX - LaTeX</h2>
<p>TeX 是高德纳（Donald Ervin Knuth，1938 年 1 月 10 日 —）教授愤世嫉俗（大雾；追求完美）做出来的排版引擎，同时也是该引擎使用的标记语言（Markup Lang）的名称。这里所谓的引擎，是指能够实现断行、分页等操作的程序（请注意这并不是定义）；这里的标记语言，是指一种将控制命令和文本结合起来的格式，它的主体是其中的文本而控制命令则实现一些特殊效果（同样请注意这并不是定义）。</p>
<blockquote>
<p>你可以在<a href="http://en.wikipedia.org/wiki/TeX" target="_blank">这里</a>找到关于 TeX 引擎的具体描述；</p>
<p>你可以在<a href="http://en.wikipedia.org/wiki/Markup_language" target="_blank">这里</a>找到关于标记语言的具体描述。</p>
</blockquote>
<p>而 LaTeX 则是 L. Lamport （1941 年 2 月 7 日 — ） 教授开发的基于 TeX 的排版系统。实际上 LaTeX 利用 TeX 的控制命令，定义了许多新的控制命令并封装成一个可执行文件。这个可执行文件会去解释 LaTeX 新定义的命令成为 TeX 的控制命令，并最终交由 TeX 引擎进行排版。</p>
<blockquote>
<p>实际上，LaTeX 是基于一个叫做 plain TeX 的格式的。plain TeX 是高德纳教授为了方便用户，自己基于原始的 TeX 定义的格式，但实际上 plain TeX 的命令仍然十分晦涩。至于原始的 TeX 直接使用的人就更少了，因此 plain TeX 格式逐渐就成为了 TeX 格式的同义词，尽管他们事实上是不同的。</p>
</blockquote>
<p>因此在 TeX - LaTeX 组合中，</p>
<ol>
<li>最终进行断行、分页等操作的，是 TeX 引擎；</li>
<li>LaTeX 实际上是一个工具，它将用户按照它的格式编写的文档解释成 TeX 引擎能理解的形式并交付给 TeX 引擎处理，再将最终结果返回给用户。</li>
</ol>
<h2 id="pdfTeX_-_pdfLaTeX">pdfTeX - pdfLaTeX</h2>
<p>TeX 系统生成的文件是 <em>dvi</em> 格式，虽然可以用其他程序将其转换为例如 pdf 等更为常见的格式，但是毕竟不方便。</p>
<blockquote>
<p>dvi 格式是为了排版而产生的，它本身并不支持所谓的“交叉引用”，pdfTeX 直接输出 pdf 格式的文档，这也是 pdfTeX 相对 TeX 进步（易用性方面）的地方。</p>
</blockquote>
<p>为了解决这个问题，Hàn Thế Thành 博士在他的博士论文中提出了 pdfTeX 这个对 TeX 引擎的扩展。二者最主要的差别就是 pdfTeX 直接输出 pdf 格式文档，而 TeX 引擎则输出 dvi 格式的文档。</p>
<blockquote>
<p>pdfTeX 的信息可以查看<a href="http://en.wikipedia.org/wiki/PdfTeX" target="_blank">wiki</a>.</p>
</blockquote>
<p>pdfLaTeX 这个程序的主要工作依旧是将 LaTeX 格式的文档进行解释，不过此次是将解释之后的结果交付给 pdfTeX 引擎处理。</p>
<h2 id="XeTeX_-_XeLaTeX">XeTeX - XeLaTeX</h2>
<p>高德纳教授在实现 TeX 的当初并没有考虑到中日韩等字符的处理，而只支持 ASCII 字符。这并不是说中日韩字符就无法使用 TeX 引擎排版了，事实上 TeX 将每个字符用一个框包括起来（这被称为<strong>盒子</strong>）然后将一个个的盒子按照一定规则排列起来，因而 TeX 的算法理论上适用于任何字符。ASCII 字符简单理解，就是在半角模式下你的键盘能直接输出的字符。</p>
<p>在 XeTeX 出现之前，为了能让 TeX 系统排版中文，国人曾使用了 天元、CCT、<strong>CJK</strong> 等手段处理中文。其中 天元和 CCT 现在已经基本不用，CJK 因为使用时间长且效果相对较好，现在还有人使用。</p>
<p>不同于 CJK 等方式使用 TeX 和 pdfTeX 这两个不直接支持 Unicode 字符的引擎，XeTeX 引擎直接支持 Unicode 字符。也就是说现在不使用 CJK 也能排版中日韩文的文档了，并且这种方式要比之前的方式更加优秀。</p>
<p>XeLaTeX 和 XeTeX 的关系与 pdfLaTeX 和 pdfTeX 的关系类似，这里不再赘述。</p>
<p>使用 XeTeX 引擎需要使用 UTF-8 编码。</p>
<blockquote>
<p>所谓编码就是字符在计算机储存时候的对应关系。例如，假设有一种编码，将汉字“你”对应为数字“1”；“好”对应为数字“2”，则含有“你好”的纯文本文件，在计算机中储存为“12”（读取文件的时候，将“12”再转换为“你好”显示在屏幕上或打印出来）。</p>
<p>UTF-8 编码是 Unicode 编码的一种，可以参考它的 <a href="http://en.wikipedia.org/wiki/UTF-8" target="_blank">wiki</a>.</p>
</blockquote>
<h2 id="LuaTeX">LuaTeX</h2>
<p>LuaTeX 是正在开发完善的一个 TeX 引擎，相对它的前辈们还相当的不完善，这里不赘述。</p>
<h2 id="CTeX_-_MiKTeX_-_TeX_Live">CTeX - MiKTeX - TeX Live</h2>
<p>之前介绍了 TeX, LaTeX, pdfTeX, pdfLaTeX, XeTeX, XeLaTeX, LuaTeX 等，他们都是 TeX 家族的一部分。但是作为一个能够使用的 TeX 系统，仅仅有他们还是不够的。CTeX, MiKTeX, TeX Live 都是被称为“发行”的软件合集。他们包括了上述各种引擎的可执行程序，以及一些文档类、模板、字体文件、辅助程序等等。其中 CTeX 是建立在 MiKTeX 的基础之上的。</p>
<h2 id=" 总结 ">总结</h2>
<p>TeX - pdfTeX - XeTeX - LuaTeX 都是排版引擎，按照先进程度递增（LuaTeX 尚未完善）。</p>
<p>LaTeX 是一种格式，基于 TeX 格式定义了很多更方便使用的控制命令。上述四个引擎都有对应的程序将 LaTeX 格式解释成引擎能处理的内容。</p>
<p>CTeX, MiKTeX, TeX Live 都是 TeX 的发行，他们是许许多多东西的集合。</p>
<h1 id=" 出现问题应当如何处理 / 怎样聪明地提出你的问题——怎样从这里毕业 ">出现问题应当如何处理 / 怎样聪明地提出你的问题——怎样从这里毕业</h1>
<p>这篇文章原来的名字叫做<strong>慢慢爱上 LaTeX</strong>，后来行文的过程中发觉 LaTeX 实在是有太多的内容可以讲述，越发地没有把握让大家仅仅通过这一篇短小的文章就喜欢上 LaTeX，于是改成了现在这个名字。</p>
<p>限于篇幅，还有我的精力，这篇文章事实上还有许多的问题没有讲明白。它仅仅是提供了一些，在你学习使用 LaTeX 可能遇到的问题的解决方案，并不完全，而且没有教会你如何处理编译过程中可能遇到的形形色色的错误。<br>所以这最终只能是一篇小文，而不可能成为一篇正式的文档。</p>
<p>因此，如果通过我这篇小文，体验到了 LaTeX 带给你的一些乐趣，有了对 LaTeX 的兴趣（如果是这样，我就已经能够无比开心了~），请务必去阅读一些正式的 LaTeX 文档。</p>
<h2 id=" 去读文档 ">去读文档</h2>
<p>关于 LaTeX 的文档有很多，其中有些内容过时地很快。所以有必要告诉大家，哪些文档应该看，那些文档不应该看。<br>索性，这个问题，刘海洋 (milksea) 前辈已经叙述得很清楚了。前段时间，我和几个朋友，将现在看起来还未过时的文档打包上传到了我的博客。参考：</p>
<p><a href="http://liam0205.me/attachment/LaTeX-useful-tools/LaTeX_Docs_2014.rar">http://liam0205.me/attachment/LaTeX-useful-tools/LaTeX_Docs_2014.rar</a></p>
<h2 id=" 遇到问题怎么办 ">遇到问题怎么办</h2>
<ol>
<li>绝对的新手，先读完一本入门读物，了解基本的知识；</li>
<li>无论如何，先读文档！绝大部分问题都是文档可以解决的；</li>
<li>利用 Google 搜索你的问题；</li>
<li>在各个论坛或者 LaTeX 交流群里聪明地提出你的问题。</li>
</ol>
<p>参考：<a href="http://www.wapm.cn/smart-questions/smart-questions-zh.html" target="_blank">http://www.wapm.cn/smart-questions/smart-questions-zh.html</a>。</p>
<p>CTeX 论坛提问版：<a href="http://bbs.ctex.org/forum.php?mod=forumdisplay&amp;fid=6&amp;page=1" target="_blank">http://bbs.ctex.org/forum.php?mod=forumdisplay&amp;fid=6&amp;page=1</a></p>
<p>提供一个交流 QQ 群：141877998</p>
]]></content>
    <summary type="html"><![CDATA[<h2 id=" 优雅的 _LaTeX">优雅的 LaTeX</h2>
<p>有很多 Geeks 或者 LaTeX’s Fanatical Fans 过分地强调了 LaTeX 的一些并非重点的特性，以至于很多初学者会觉得 LaTeX 很神秘很复杂，从而引发了初学者的畏难情绪甚至是负面情绪。尽管这些 Fans 说得并没有错，我是说在事实上，但是他们的表达方式和内心态度却间接阻碍了 LaTeX 的发展，我想这也是和他们的初衷相悖的。</p>
<p>我曾经也受到过这些言论的影响，但幸运的事，至今为止我已经越过了这些障碍，并更加坚信了他们所言（LaTeX 的优点）的正确性。因此我想以我自己的方式，向更多的人介绍 LaTeX —— <strong>这个优雅，但有着自己高傲，却绝不复杂甚至神秘的东西</strong>。</p>
]]></summary>
    
      <category term="Introduction" scheme="http://liam0205.me/tags/Introduction/"/>
    
      <category term="ctex" scheme="http://liam0205.me/tags/ctex/"/>
    
      <category term="TeXworks" scheme="http://liam0205.me/tags/TeXworks/"/>
    
      <category term="LaTeX" scheme="http://liam0205.me/categories/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[在 Windows 下批量将位图转为 EPS 格式的图档]]></title>
    <link href="http://liam0205.me/2014/08/21/bitmap-convert-to-eps-batch/"/>
    <id>http://liam0205.me/2014/08/21/bitmap-convert-to-eps-batch/</id>
    <published>2014-08-21T02:38:38.000Z</published>
    <updated>2014-12-21T07:31:30.000Z</updated>
    <content type="html"><![CDATA[<p>虽然「LaTeX 只能识别 EPS 格式的图档」是多年的误传，但是仍有许多杂志和期刊只接受 EPS 格式的图档。所以，尽管在日常使用中，我们很少会用到 EPS 格式，但是有时候不得不用。</p>
<p>今天帮朋友排版论文的时候，就又遇到了这样无节操的期刊。没办法，转呗。结果一看傻眼了，一共五六十个图片，手工得弄到猴年马月……于是动了动脑，写了个批处理搞定。</p>
<a id="more"></a>

<p>在现在的 TeX 发行版中，一般都带有一个 <code>bmeps</code> 的小程序，它能将 <code>png</code>, <code>jpg</code> 和 <code>bmp</code> 等格式的位图转换成 EPS 格式的图档。我们用它来处理图片是最好不过了，以 <code>png</code> 格式为例，批处理命令如下</p>
<pre><code><span class="keyword">for</span> /f <span class="string">%%i in ('dir /b *.png') do (
    @echo %</span>%i
    bmeps -c <span class="string">%%i %</span>%~ni.eps
    <span class="variable">@echo</span> <span class="constant">Finished</span>
    )
</code></pre><p>这里用到了 <code>for</code> 循环，在当前目录下遍历所有后缀为 <code>png</code> 的文件，然后对当前文件依次执行 <code>bmeps</code> 命令。</p>
<p>我写了一个完整的批处理文件，可以在<a href="/attachment/LaTeX-useful-tools/epscolor.bat">这里</a>下载，置于位图所在的目录，双击运行即可。</p>
]]></content>
    <summary type="html"><![CDATA[<p>虽然「LaTeX 只能识别 EPS 格式的图档」是多年的误传，但是仍有许多杂志和期刊只接受 EPS 格式的图档。所以，尽管在日常使用中，我们很少会用到 EPS 格式，但是有时候不得不用。</p>
<p>今天帮朋友排版论文的时候，就又遇到了这样无节操的期刊。没办法，转呗。结果一看傻眼了，一共五六十个图片，手工得弄到猴年马月……于是动了动脑，写了个批处理搞定。</p>
]]></summary>
    
      <category term="Bitmap" scheme="http://liam0205.me/tags/Bitmap/"/>
    
      <category term="EPS" scheme="http://liam0205.me/tags/EPS/"/>
    
      <category term="Windows Batch" scheme="http://liam0205.me/tags/Windows%20Batch/"/>
    
      <category term="LaTeX" scheme="http://liam0205.me/categories/LaTeX/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[《失明症漫记》读后感]]></title>
    <link href="http://liam0205.me/2014/08/20/book-review-blindness/"/>
    <id>http://liam0205.me/2014/08/20/book-review-blindness/</id>
    <published>2014-08-20T10:13:38.000Z</published>
    <updated>2014-08-30T10:11:22.000Z</updated>
    <content type="html"><![CDATA[<p>《失明症漫记》（又名《盲流感》）是诺贝尔文学奖获得者，葡萄牙作家<a href="http://zh.wikipedia.org/zh/%E8%8B%A5%E6%B3%BD%C2%B7%E8%90%A8%E6%8B%89%E9%A9%AC%E6%88%88" target="_blank">萨拉马戈</a>的作品，中文翻译版本由范维信先生译著。</p>
<a id="more"></a>

<p>整本书都在尝试营造一种压抑的气氛，哪怕是最后看起来是大团圆的结局也是如此，而压抑的气氛中四处弥漫着隐喻。</p>
<p>小说篇幅中等，中译本能有两百多页。但是，作者以一种奇怪的方式来行文——书中出现的所有角色，包括动物，都没有明确的名称。我认为这样的手法是有意义的。其一，「偷车贼」、「戴墨镜的女人」这些称呼过于随意，读者可以在生活中简单地遇到，这种简单的指代予读者以代入感。其二，不赋姓名的未知感和不安全感，与书中所提及的「白色失明症」特征一致，相辅相成。其三，在探讨人性的时候，以不明确地指代，泛指某一类人，如<a href="http://www.wangmurong.org.cn/about/" target="_blank">王穆荣</a>所说，这就像「面向对象编程中的类名，在这里不需要实例化」。</p>
<blockquote>
<p>剧透，慎。</p>
</blockquote>
<p>小说以指代的方式来行文，必然的一个结果就是其剧情不会复杂。事实上，其剧情和典型的「灾难大片」类似：未知的疾病突然出现，政府紧张民众恐慌将病患隔离，疫情不受控制地爆发同时隔离区内沦丧的人类尊严和道德约束勾出人性中恶的一面，最终全国沦陷一群人重获新生。</p>
<p>然而，这不是一部大团圆的作品，而是一部残酷的作品。</p>
<ul>
<li>第一个失明者感受到人情温暖，被人送回家中；陪护者因为对方失明无惧暴露而大胆盗车。</li>
<li>政府隔离失明者的根本动机不是治愈疾病，而是为了「避免麻烦」；隔离区内定期响起的冠冕堂皇的「训令」无疑是对此的讽刺。</li>
<li>隔离区内的人们因为失明而无所顾忌，人性恶的一面完全爆发出来；贪婪、淫欲、麻木、虚伪和自私充斥着整个隔离区。</li>
<li>逃出隔离区，等待盲人们的却不是美好的世界，整个国家变得不再熟悉：基础设施瘫痪、卫生条件极差；所有人已无有人形，以兽的方式苟活于世。</li>
</ul>
<p>如果仅止于此，那么这部小说不配称为世界级的小说。</p>
<p>小说的最后，也是点睛之笔在于，当所有人的失明症逐渐消失能够看清世界的时候，作为失明症期间唯一一个看得见的人，医生的妻子抬头看见蓝天白云，恍惚以为失明症终于找上了自己。这是想说明医生的妻子害怕失明吗？我想不是的。如果她会害怕失明，那她就不会在隔离区内不断给大家以勇气；如果她害怕失明，那她就不会在隔离区内奋起杀掉荒淫的统治者；如果她害怕失明，她就不会在满目疮痍的城市里四处奔波，为伙伴们寻找食物。然而她终究是害怕的。她害怕在隔离区里大家失去生的勇气；她害怕隔离区里的统治者将所有人变得麻木而不再为人；她害怕伙伴们死去留下她一个人孤苦伶仃。</p>
<p>那么她究竟害怕什么？我认为，作为唯一一个看遍整个事件体现出的人性所有的恶的她，害怕经过恶的洗礼的城市无法在闪烁人性的光辉！</p>
<p>这绝不是一个大团圆的结局，只有神经衰弱者，才需要大团圆。</p>
]]></content>
    <summary type="html"><![CDATA[<p>《失明症漫记》（又名《盲流感》）是诺贝尔文学奖获得者，葡萄牙作家<a href="http://zh.wikipedia.org/zh/%E8%8B%A5%E6%B3%BD%C2%B7%E8%90%A8%E6%8B%89%E9%A9%AC%E6%88%88" target="_blank">萨拉马戈</a>的作品，中文翻译版本由范维信先生译著。</p>
]]></summary>
    
      <category term="Book review" scheme="http://liam0205.me/tags/Book%20review/"/>
    
      <category term="Blindness" scheme="http://liam0205.me/tags/Blindness/"/>
    
      <category term="Humanity" scheme="http://liam0205.me/tags/Humanity/"/>
    
      <category term="Literature and Social Sciences" scheme="http://liam0205.me/categories/Literature%20and%20Social%20Sciences/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[禁止 Kindle Paperwhite2 在连接 WiFi 的情况下静默升级]]></title>
    <link href="http://liam0205.me/2014/08/17/kindle-paperwhite2-stop-slient-updating/"/>
    <id>http://liam0205.me/2014/08/17/kindle-paperwhite2-stop-slient-updating/</id>
    <published>2014-08-17T02:40:38.000Z</published>
    <updated>2014-08-30T10:11:22.000Z</updated>
    <content type="html"><![CDATA[<p>又是关于 Kindle 的文章呢，不过心情和上一篇可谓截然相反。嘛，生活还要继续，不想了。</p>
<p>Kindle 的原生系统实在是欠调教，想要用得顺手不得不自己安装插件。若是如此也就罢了，恼人的是，Amazon 会在 Kindle 链接 WiFi 的情况下为 Kindle 推送更新，而这些不经过用户同意静默安装的升级，会使得不少插件失效。这样一来，每次升级就得重新安装优化不少插件，着实浪费时间，于是禁止静默升级变得十分有必要。</p>
<a id="more"></a>

<h2 id="BackDoorLock_ 介绍 ">BackDoorLock 介绍</h2>
<p><a href="http://www.mobileread.com/forums/showthread.php?t=205666" target="_blank">BackDoorLock</a> 是 <a href="http://www.mobileread.com/" target="_blank">mobileread 论坛</a> 上的 dsmid 前辈制作的插件，其作用只有一个：禁止 Amazon 在不经用户同意的情况下静默升级 Kindle 的固件。</p>
<p>BackDoorLock 并不会阻止 Kindle 从 Amazon 上取得升级所需的安装文件，它会在 Kindle 尝试安装升级的时候打断这个过程。这样设计是有意义的，因为如果阻止 Kindle 下载升级文件，则 Kindle 在联网的情况下会不断尝试下载，从而造成耗电量剧增，并最终影响电池寿命。</p>
<h2 id="BackDoorLock_ 的安装 ">BackDoorLock 的安装</h2>
<p>首先保证你的 Kindle PW2 已经越狱（参考<a href="http://liam0205.me/2014/05/20/koreader-on-kindle-paperwhite/">这篇文章</a>中关于越狱的部分）。dsmid 提供了两种方法安装 BackDoorLock。其一是下载 <code>.bin</code> 文件，放在 Kindle 根目录，使用「更新您的 Kindle」的方式安装。其二是先安装 KUAL (Kindle Unified Application Launcher) 安装，然后以查件的方式运行。这里推荐使用第二种方法。</p>
<h3 id=" 安装 _MKK">安装 MKK</h3>
<p>KUAL 需要 MKK (Mobileread Kindlet Kit) 的支持，所以先安装 MKK。</p>
<ul>
<li>到<a href="http://www.mobileread.com/forums/showthread.php?t=233932" target="_blank">这里</a>下载 MKK 的安装包。</li>
<li>使用 USB 数据线将 Kindle 与计算机连接。</li>
<li>ZIP 归档中有名为 <code>Update_mkk-20140214-k5-ALL_install.bin</code> 的文件，将其解压到 Kindle 根目录。</li>
<li>断开 Kindle 与计算机的 USB 连接。</li>
<li>依次进行如下操作<ul>
<li>主页按钮（[Home]）</li>
<li>菜单按钮（[Menu]）</li>
<li>设置选项（Settings）</li>
<li>菜单按钮（[Menu]）</li>
<li>更新您的 Kindle（Update Your Kindle）</li>
</ul>
</li>
</ul>
<h3 id=" 安装 _KUAL">安装 KUAL</h3>
<ul>
<li>到<a href="http://www.mobileread.com/forums/showthread.php?t=203326" target="_blank">这里</a>下载 KUAL 的安装包。</li>
<li>使用 USB 数据线将 Kindle 与计算机连接。</li>
<li>ZIP 归档中有名为 <code>KUAL-KDK-2.0.azw2</code> 的文件，将其解压到 Kindle 的 <code>documents</code> 目录。</li>
</ul>
<h3 id=" 安装 _BackDoorLock">安装 BackDoorLock</h3>
<ul>
<li>到<a href="http://www.mobileread.com/forums/showthread.php?t=205666" target="_blank">这里</a>下载 MKK 的安装包。</li>
<li>使用 USB 数据线将 Kindle 与计算机连接。</li>
<li>ZIP 归档中有名为 <code>backdoorlock</code> 的目录，将其完整地解压到 Kindle 的 <code>extensions</code> 目录（若不存在则新建）。</li>
</ul>
<h3 id=" 启用 _BackDoorLock">启用 BackDoorLock</h3>
<p>将 Kindle 从电脑中退出后，在 Kindle 首页能看到如下图所示的图标，标有「Kindle Launcher」的就是 KUAL 启动图标了。</p>
<p><img src="/attachment/images/Kindle/Home_KUAL.png" alt=" 安装完成后的主界面 "></p>
<p>点击 KUAL 图标，进入 KUAL 界面。</p>
<p><img src="/attachment/images/Kindle/KUAL_BackDoorLock.png" alt="KUAL 界面 "></p>
<p>点击 BackDoorLock，打开 BackDoorLock。</p>
<p><img src="/attachment/images/Kindle/BackDoorLock.png" alt="BackDoorLock 界面 "></p>
<p>这里</p>
<ul>
<li><code>Lock the back door</code> 是禁用静默升级，</li>
<li><code>Unlock the back door</code> 是启用静默升级，</li>
<li><code>Lock state</code> 是查看 BackDoorLock 的工作状态，</li>
<li><code>Delete update file(s)</code> 是删除升级文件，以腾出空间，</li>
<li><code>Move update file(s)</code> 则是移动升级文件。</li>
</ul>
]]></content>
    <summary type="html"><![CDATA[<p>又是关于 Kindle 的文章呢，不过心情和上一篇可谓截然相反。嘛，生活还要继续，不想了。</p>
<p>Kindle 的原生系统实在是欠调教，想要用得顺手不得不自己安装插件。若是如此也就罢了，恼人的是，Amazon 会在 Kindle 链接 WiFi 的情况下为 Kindle 推送更新，而这些不经过用户同意静默安装的升级，会使得不少插件失效。这样一来，每次升级就得重新安装优化不少插件，着实浪费时间，于是禁止静默升级变得十分有必要。</p>
]]></summary>
    
      <category term="Kindle" scheme="http://liam0205.me/tags/Kindle/"/>
    
      <category term="BackDoorLock" scheme="http://liam0205.me/tags/BackDoorLock/"/>
    
      <category term="KUAL" scheme="http://liam0205.me/tags/KUAL/"/>
    
      <category term="IT" scheme="http://liam0205.me/categories/IT/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[异步加载多说评论框以加快页面访问速度]]></title>
    <link href="http://liam0205.me/2014/07/22/duoshuo-delay/"/>
    <id>http://liam0205.me/2014/07/22/duoshuo-delay/</id>
    <published>2014-07-22T09:52:50.000Z</published>
    <updated>2014-08-30T10:11:22.000Z</updated>
    <content type="html"><![CDATA[<p>多说评论框可以让静态博客实现评论功能，对于搭在 GitHub Pages 上的博客来说是非常好用的功能。美中不足的是，多说评论框的加载速度有些慢；默认情况下，多说评论框总是随页面一起加载，拖慢了整个页面的加载速度。</p>
<p>本希望用自动异步加载的方式，在页面加载完成之后，再加载多说评论框。奈何多说没有提供所需的 API。于是只能退而求其次，采用手动的方法。</p>
<a id="more"></a>

<p>多说在其<a href="http://dev.duoshuo.com/docs/50b344447f32d30066000147" target="_blank">官博</a>提出了一种异步加载的方式。经测试，这个方法可用——只需要点击按钮，多说评论框就会弹出来。但是，官博提供的方法只能弹出，不能缩回，有些恼人。于是自己写了几行代码，解决了这个问题。</p>
<h2 id=" 详细步骤 ">详细步骤</h2>
<p>首先，我们需要加载多说的 <code>embed.js</code> 基础代码，并设置 <code>duoshuoQuery</code>。多说官博希望我们把这段代码放在网页的 head 中，我不推荐这样做。因为我们使用异步加载的原因，就是希望提高速度，而如果将多说的代码放在 head 中，又拖慢了速度。所以我们将代码放在多说评论框加载之前就可以了。</p>
<figure class="highlight html"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"><span class="keyword">var</span> duoshuoQuery = {short_name:<span class="string">" 你的多说二级域名 "</span>};</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://static.duoshuo.com/embed.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></td></tr></table></figure>



<p>多说二级域名是指你注册多说时，填写的 <code>abc.duoshuo.com</code> 中的 <code>abc</code> 部分。</p>
<p>紧接其后之后，我们要写入 JavaScript 函数，实现多说评论框的缩放功能。</p>
<figure class="highlight html"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
<span class="function"><span class="keyword">function</span> <span class="title">toggleDuoshuoComments</span><span class="params">(container, id, url)</span>{</span>
  <span class="keyword">if</span>(jQuery(container).has(<span class="string">"div"</span>).length&gt;<span class="number">0</span>){
    jQuery(container).empty();
    <span class="keyword">return</span>;
  }
  <span class="keyword">var</span> el = document.createElement(<span class="string">'div'</span>);
  el.setAttribute(<span class="string">'data-thread-key'</span>, id);
  el.setAttribute(<span class="string">'data-url'</span>, url);
  DUOSHUO.EmbedThread(el);
  jQuery(container).append(el);
}
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></td></tr></table></figure>



<p>在需要插入按钮的地方，我们建立一个 click 事件。</p>
<figure class="highlight html"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"javascript:void(0);"</span> <span class="attribute">onclick</span>=<span class="value">"toggleDuoshuoComments('#comment-box', &lt;%= item.title %&gt;, &lt;%- config.url %&gt;&lt;%- config.root %&gt;&lt;%- item.path %&gt;);"</span>&gt;</span>查看评论<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
</pre></td></tr></table></figure>



<p>其中 <code>&lt;%= item.title %&gt;</code> 和 <code>&lt;%- config.url %&gt;&lt;%- config.root %&gt;&lt;%- item.path %&gt;</code> 是 hexo 的语法。</p>
<p>最后，在需要弹出评论框的地方，插入一个 <code>div</code> 标签。</p>
<figure class="highlight html"><figcaption><span>demo </span></figcaption><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"comment-box"</span> &gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>



<p>这样就大功告成啦！</p>
]]></content>
    <summary type="html"><![CDATA[<p>多说评论框可以让静态博客实现评论功能，对于搭在 GitHub Pages 上的博客来说是非常好用的功能。美中不足的是，多说评论框的加载速度有些慢；默认情况下，多说评论框总是随页面一起加载，拖慢了整个页面的加载速度。</p>
<p>本希望用自动异步加载的方式，在页面加载完成之后，再加载多说评论框。奈何多说没有提供所需的 API。于是只能退而求其次，采用手动的方法。</p>
]]></summary>
    
      <category term="Blog" scheme="http://liam0205.me/tags/Blog/"/>
    
      <category term="Duoshuo" scheme="http://liam0205.me/tags/Duoshuo/"/>
    
      <category term="Async Loading" scheme="http://liam0205.me/tags/Async%20Loading/"/>
    
      <category term="IT" scheme="http://liam0205.me/categories/IT/"/>
    
  </entry>
  
</feed>
